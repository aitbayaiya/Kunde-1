/*  AdBridg Connect v2.1.0, copyright AdBridg Inc. All rights reserved. e2bb0993:kywwpy40:29g */
!function i(r,o,a){function s(n,e){if(!o[n]){if(!r[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);throw new Error("Cannot find module '"+n+"'")}t=o[n]={exports:{}};r[n][0].call(t.exports,function(e){var t=r[n][1][e];return s(t||e)},t,t.exports,i,r,o,a)}return o[n].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){var e=s(["dcn=","&pos=","&cmd=bid",""]);return e}function r(){var e=s(["","/bidRequest?"]);return e}function o(){var e=s(["","/pubapi/3.0/","/","/","/","/ADTECH;v=2;cmd=bid;cors=yes;alias=",";misc=",";",""]);return e}function s(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=e("../shim.js").polyfills,c=d.isInteger,u=d.logError,l=d.isEmpty,p=d.logWarn,g=d.getUniqueIdentifierStr,f=d._each,m=d.deepSetValue,h=(d.registerBidder,d.BANNER),b={AOL:"aol",VERIZON:"verizon",ONEMOBILE:"onemobile",ONEDISPLAY:"onedisplay"},v={GET:"display-get"},y={GET:"mobile-get",POST:"mobile-post"},_={TAG:"iframe",TYPE:"iframe"},w={TAG:"img",TYPE:"image"},x=["adserver.org","criteo.com","id5-sync.com","intentiq.com","liveintent.com","quantcast.com","verizonmedia.com","liveramp.com","yahoo.com"],S=B(o(),"host","network","placement","pageid","sizeid","alias","misc","dynamicParams"),I=B(r(),"host"),A=B(i(),"dcn","pos","dynamicParams"),E={us:"adserver-us.adtech.advertising.com",eu:"adserver-eu.adtech.advertising.com",as:"adserver-as.adtech.advertising.com"},T="https",k=1;function B(o){for(var e=arguments.length,a=new Array(1<e?e-1:0),t=1;t<e;t++)a[t-1]=arguments[t];return function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=n[n.length-1]||{},r=[o[0]];return a.forEach(function(e,t){e=(c(e)?n:i)[e];r.push(e,o[t+1])}),r.join("")}}function C(e){return e===b.AOL||e===b.VERIZON||e===b.ONEMOBILE}function z(e){if(C(e.bidder)&&e.params.id&&e.params.imp&&e.params.imp[0]){e=e.params.imp[0];return e.id&&e.tagid&&e.banner&&e.banner.w&&e.banner.h}}function R(e){return C(e.bidder)&&e.params.dcn&&e.params.pos}function j(e){return((t=e.bidder)===b.AOL||t===b.VERIZON||t===b.ONEDISPLAY)&&e.params.placement&&e.params.network;var t}function O(e){return e.userIdAsEids.filter(function(e){return-1!==x.indexOf(e.source)})}h={code:b.AOL,gvlid:25,aliases:[b.ONEMOBILE,b.ONEDISPLAY,b.VERIZON],supportedMediaTypes:[h],isBidRequestValid:function(e){return j(e)||(R(e=e)||z(e))},buildRequests:function(e,t){var n=this,i={};return t&&(i.gdpr=t.gdprConsent,i.uspConsent=t.uspConsent),e.map(function(e){var t=R(t=e)?y.GET:z(t)?y.POST:j(t)?v.GET:void 0;if(t)return n.formatBidRequest(t,e,i)})},interpretResponse:function(e,t){var n=e.body;if(n){e=this._parseBidResponse(n,t);if(e)return e}else u("Empty bid response",t.bidderCode,n)},getUserSyncs:function(e,t){t=!l(t)&&t[0].body;return t&&t.ext&&t.ext.pixels?this.parsePixelItems(t.ext.pixels):[]},formatBidRequest:function(e,t,n){var i;switch(e){case v.GET:i={url:this.buildMarketplaceUrl(t,n),method:"GET",ttl:60};break;case y.GET:i={url:this.buildOneMobileGetUrl(t,n),method:"GET",ttl:3600};break;case y.POST:i={url:this.buildOneMobileBaseUrl(t),method:"POST",ttl:3600,data:this.buildOpenRtbRequestData(t,n),options:{contentType:"application/json",customHeaders:{"x-openrtb-version":"2.2"}}}}return i.bidderCode=t.bidder,i.bidId=t.bidId,i.userSyncOn=t.params.userSyncOn,i},buildMarketplaceUrl:function(e,t){var n=e.params,i=n.server,e=n.region||"us";return E.hasOwnProperty(e)||(p("Unknown region '".concat(e,"' for AOL bidder.")),e="us"),i=i||E[e],n.region=e,this.applyProtocol(S({host:i,network:n.network,placement:parseInt(n.placement),pageid:n.pageId||0,sizeid:n.sizeId||0,alias:n.alias||g(),misc:(new Date).getTime(),dynamicParams:this.formatMarketplaceDynamicParams(n,t)}))},buildOneMobileGetUrl:function(e,t){var n=e.params,i=n.dcn,r=n.pos,o=n.ext;"object"===a(e.userId)&&(o=o||{},O(e).forEach(function(e){o["eid"+e.source]=e.uids[0].id}));e=this.buildOneMobileBaseUrl(e);return i&&r&&(t=this.formatOneMobileDynamicParams(o,t),e+=A({dcn:i,pos:r,dynamicParams:t})),e},buildOneMobileBaseUrl:function(e){return this.applyProtocol(I({host:e.params.host||"c2shb.ssp.yahoo.com"}))},applyProtocol:function(e){return/^https?:\/\//i.test(e)?e:(0===e.indexOf("//")?"".concat(T,":"):"".concat(T,"://")).concat(e)},formatMarketplaceDynamicParams:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={};d.utils.assign(n,this.formatKeyValues(e.keyValues)),d.utils.assign(n,this.formatConsentData(t));var i="";return f(n,function(e,t){i+="".concat(t,"=").concat(encodeURIComponent(e),";")}),i},formatOneMobileDynamicParams:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.isSecureProtocol()&&(e.secure=k),d.utils.assign(e,this.formatConsentData(t));var n="";return f(e,function(e,t){n+="&".concat(t,"=").concat(encodeURIComponent(e))}),n},buildOpenRtbRequestData:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={id:e.params.id,imp:e.params.imp};return this.isEUConsentRequired(t)&&(m(n,"regs.ext.gdpr",k),t.gdpr.consentString&&m(n,"user.ext.consent",t.gdpr.consentString)),t.uspConsent&&m(n,"regs.ext.us_privacy",t.uspConsent),"object"===a(e.userId)&&(n.user=n.user||{},n.user.ext=n.user.ext||{},0<(e=O(e)).length&&(n.user.ext.eids=e)),n},isEUConsentRequired:function(e){return!!(e&&e.gdpr&&e.gdpr.gdprApplies)},formatKeyValues:function(e){var n={};return f(e,function(e,t){n["kv".concat(t)]=e}),n},formatConsentData:function(e){var t={};return this.isEUConsentRequired(e)&&(t.gdpr=k,e.gdpr.consentString&&(t.euconsent=e.gdpr.consentString)),e.uspConsent&&(t.us_privacy=e.uspConsent),t},parsePixelItems:function(e){var n=/\w*(?=\s)/,i=/src=("|')(.*?)\1/,r=[];return!e||(e=e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi))&&e.forEach(function(e){var t=e.match(n)[0],e=e.match(i)[2];t&&e&&r.push({type:(t===w.TAG?w:_).TYPE,url:e})}),r},_parseBidResponse:function(e,t){var n,i;try{n=e.seatbid[0].bid[0]}catch(e){return}if(n.ext&&n.ext.encp)i=n.ext.encp;else if(null===(i=n.price)||isNaN(i))return void u("Invalid price in bid response",b.AOL,n);return{bidderCode:t.bidderCode,requestId:t.bidId,ad:n.adm,cpm:i,width:n.w,height:n.h,creativeId:n.crid||0,pubapiId:e.id,currency:e.cur||"USD",dealId:n.dealid,netRevenue:!0,meta:{advertiserDomains:n&&n.adomain?n.adomain:[]},ttl:t.ttl}},isOneMobileBidder:C,isSecureProtocol:function(){return"https:"===document.location.protocol}};t.exports=e("../shim.js").wrap({spec:h,unitIDKey:"placement",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":22}],2:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=e("../shim.js").polyfills,v=p.convertCamelToUnderscore,y=p.isArray,_=p.isNumber,w=p.isPlainObject,x=p.logError,S=p.logInfo,I=p.deepAccess,g=p.logMessage,r=p.convertTypes,f=p.isStr,A=p.getParameterByName,E=p.deepClone,T=p.chunk,m=p.logWarn,h=p.getBidRequest,k=p.createTrackPixelHtml,s=p.isEmpty,B=p.transformBidderParamKeywords,C=p.getMaxValueFromArray,z=p.fill,R=p.getMinValueFromArray,d=p.isArrayOfNums,c=p.isFn,a=p.isAllowZeroCpmBidsEnabled,j=p.Renderer,O=p.config,P=(p.registerBidder,p.getIabSubCategory),u=p.BANNER,D=p.NATIVE,l=p.VIDEO,U=p.ADPOD,N=p.auctionManager,q=p.find,M=p.includes,L=p.OUTSTREAM,F=p.INSTREAM,G=p.getStorageManager,Y="appnexus",K=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],V=["minduration","maxduration","skip","skipafter","playbackmethod","api"],J=["age","externalUid","segments","gender","dnt","language"],W=["geo","device_id"],H=["enabled","dongle","member_id","debug_timeout"],$={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},X={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},Q="<script",Z=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,ee="trk.js",te=G(32,Y),Y={code:Y,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"brealtime"},{code:"emxdigital",gvlid:183},{code:"pagescience"},{code:"defymedia"},{code:"gourmetads"},{code:"matomy"},{code:"featureforward"},{code:"oftmedia"},{code:"districtm",gvlid:144},{code:"adasta"},{code:"beintoo",gvlid:618}],supportedMediaTypes:[u,l,D],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var i=e.map(ae),r=q(e,de),o={};!0===O.getConfig("coppa")&&(o={coppa:!0}),r&&Object.keys(r.params.user).filter(function(e){return M(J,e)}).forEach(function(e){var t,n=v(e);"segments"===e&&y(r.params.user[e])?(t=[],r.params.user[e].forEach(function(e){_(e)?t.push({id:e}):w(e)&&t.push(e)}),o[n]=t):"segments"!==e&&(o[n]=r.params.user[e])});var n,a=q(e,ue);a&&a.params&&a.params.app&&(n={},Object.keys(a.params.app).filter(function(e){return M(W,e)}).forEach(function(e){return n[e]=a.params.app[e]}));var s=q(e,le);s&&s.params&&a.params.app&&a.params.app.id&&(h={appid:s.params.app.id});var d={},c={},u=te.getCookie("apn_prebid_debug")||null;if(u)try{d=JSON.parse(u)}catch(e){x("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{var l=q(e,pe);l&&l.debug&&(d=l.debug)}d&&d.enabled&&Object.keys(d).filter(function(e){return M(H,e)}).forEach(function(e){c[e]=d[e]});var p=q(e,ce),u=p?parseInt(p.params.member,10):0,l=e[0].schain,p=q(e,fe),g={tags:b(i),user:o,sdk:{source:"pbjs",version:"6.9.0-pre"},schain:l};p&&(g.iab_support={omidpn:"Appnexus",omidpv:"6.9.0-pre"}),0<u&&(g.member_id=u),a&&(g.device=n),s&&(g.app=h);var f,m,h=O.getConfig("appnexusAuctionKeywords");return w(h)&&(0<(f=B(h)).length&&f.forEach(ie),g.keywords=f),O.getConfig("adpod.brandCategoryExclusion")&&(g.brand_category_uniqueness=!0),c.enabled&&(g.debug=c,S("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(c,null,4))),t&&t.gdprConsent&&(g.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~")&&(f=(f=t.gdprConsent.addtlConsent).substring(f.indexOf("~")+1),g.gdpr_consent.addtl_consent=f.split(".").map(function(e){return parseInt(e,10)}))),t&&t.uspConsent&&(g.us_privacy=t.uspConsent),t&&t.refererInfo&&(m={rd_ref:encodeURIComponent(t.refererInfo.referer),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")},g.referrer_detection=m),q(e,ge)&&e.filter(ge).forEach(function(t){var e=function(e,t){var n=t.mediaTypes.video,i=n.durationRangeSec,r=n.requireExactDuration,n=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,i=e.requireExactDuration,e=R(n),e=Math.floor(t/e);return i?Math.max(e,n.length):e}(t.mediaTypes.video),o=C(i),e=e.filter(function(e){return e.uuid===t.bidId}),e=z.apply(void 0,b(e).concat([n]));{var a;r?(n=Math.ceil(n/i.length),a=T(e,n),i.forEach(function(t,e){a[e].map(function(e){me(e,"minduration",t),me(e,"maxduration",t)})})):e.map(function(e){return me(e,"maxduration",o)})}return e}(i,t),n=g.tags.filter(function(e){return e.uuid!==t.bidId});g.tags=[].concat(b(n),b(e))}),e[0].userId&&(be(m=[],I(e[0],"userId.flocId.id"),"chrome.com",null),be(m,I(e[0],"userId.criteoId"),"criteo.com",null),be(m,I(e[0],"userId.netId"),"netid.de",null),be(m,I(e[0],"userId.idl_env"),"liveramp.com",null),be(m,I(e[0],"userId.tdid"),"adserver.org","TDID"),be(m,I(e[0],"userId.uid2.id"),"uidapi.com","UID2"),m.length&&(g.eids=m)),i[0].publisher_id&&(g.publisher_id=i[0].publisher_id),function(e,t){var n=[],i={withCredentials:!0},r="https://ib.adnxs.com/ut/v3/prebid";oe(t)||(r="https://ib.adnxs-simple.com/ut/v3/prebid");"TRUE"!==A("apn_test").toUpperCase()&&!0!==O.getConfig("apn_test")||(i.customHeaders={"X-Is-Test":1});{var o;15<e.tags.length?(o=E(e),T(e.tags,15).forEach(function(e){o.tags=e;e=JSON.stringify(o);n.push({method:"POST",url:r,data:e,bidderRequest:t,options:i})})):(e=JSON.stringify(e),n={method:"POST",url:r,data:e,bidderRequest:t,options:i})}return n}(g,t)},interpretResponse:function(e,t){var n=this,i=t.bidderRequest;e=e.body;var r=[];if(e&&!e.error)return e.tags&&e.tags.forEach(function(e){var t=(t=e)&&t.ads&&t.ads.length&&q(t.ads,function(e){return e.rtb});t&&(a(i.bidderCode)?0<=t.cpm:0<t.cpm)&&M(n.supportedMediaTypes,t.ad_type)&&((e=function(t,e,n){var i=h(t.uuid,[n]),r={requestId:t.uuid,cpm:e.cpm,creativeId:e.creative_id,dealId:e.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:e.buyer_member_id,dealPriority:e.deal_priority,dealCode:e.deal_code}};e.adomain&&(r.meta=p.utils.assign({},r.meta,{advertiserDomains:[]}));e.advertiser_id&&(r.meta=p.utils.assign({},r.meta,{advertiserId:e.advertiser_id}));e.buyer_member_id&&(r.meta=p.utils.assign({},r.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(e)}));e.brand_id&&(r.meta=p.utils.assign({},r.meta,{brandId:e.brand_id}));if(e.rtb.video)switch(p.utils.assign(r,{width:e.rtb.video.player_width,height:e.rtb.video.player_height,vastImpUrl:e.notify_url,ttl:3600}),I(i,"mediaTypes.video.context")){case U:var o=P(i.bidder,e.brand_category_id);r.meta=p.utils.assign({},r.meta,{primaryCatId:o});var o=e.deal_priority;r.video={context:U,durationSeconds:Math.floor(e.rtb.video.duration_ms/1e3),dealTier:o},r.vastUrl=e.rtb.video.asset_url;break;case L:r.adResponse=t,r.adResponse.ad=r.adResponse.ads[0],r.adResponse.ad.video=r.adResponse.ad.rtb.video,r.vastXml=e.rtb.video.content,e.renderer_url&&(o=q(n.bids,function(e){return e.bidId===t.uuid}),o=I(o,"renderer.options"),r.renderer=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=j.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{n.setRender(he)}catch(e){m("Prebid Error calling setRender on renderer",e)}return n.setEventHandlers({impression:function(){return g("AppNexus outstream video impression event")},loaded:function(){return g("AppNexus outstream video loaded event")},ended:function(){g("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),n}(r.adUnitCode,e,o));break;case F:r.vastUrl=e.notify_url+"&redir="+encodeURIComponent(e.rtb.video.asset_url)}else if(e.rtb[D]){var a=e.rtb[D],s=e.viewability.config.replace("src=","data-src="),d=a.javascript_trackers;null==d?d=s:f(d)?d=[d,s]:d.push(s),r[D]={title:a.title,body:a.desc,body2:a.desc2,cta:a.ctatext,rating:a.rating,sponsoredBy:a.sponsored,privacyLink:a.privacy_link,address:a.address,downloads:a.downloads,likes:a.likes,phone:a.phone,price:a.price,salePrice:a.saleprice,clickUrl:a.link.url,displayUrl:a.displayurl,clickTrackers:a.link.click_trackers,impressionTrackers:a.impression_trackers,javascriptTrackers:d},a.main_img&&(r.native.image={url:a.main_img.url,height:a.main_img.height,width:a.main_img.width}),a.icon&&(r.native.icon={url:a.icon.url,height:a.icon.height,width:a.icon.width})}else{p.utils.assign(r,{width:e.rtb.banner.width,height:e.rtb.banner.height,ad:e.rtb.banner.content});try{if(e.rtb.trackers)for(var c=0;c<e.rtb.trackers[0].impression_urls.length;c++){var u=e.rtb.trackers[0].impression_urls[c],l=k(u);r.ad+=l}}catch(e){x("Error appending tracking pixel",e)}}return r}(e,t,i)).mediaType=function(e){e=e.ad_type;return e===l?l:e===D?D:u}(t),r.push(e))}),e.debug&&e.debug.debug_info&&(o=(o="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info).replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),g("https://console.appnexus.com/docs/understanding-the-debug-auction"),g(o)),r;var o="in response for ".concat(i.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),x(o),r},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,n){if(e.iframeEnabled&&oe({gdprConsent:n}))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(n,e){return n=r({member:"string",invCode:"string",placementId:"number",keywords:B,publisherId:"number"},n),e&&(n.use_pmt_rule="boolean"==typeof n.usePaymentRule&&n.usePaymentRule,n.usePaymentRule&&delete n.usePaymentRule,ne(n.keywords)&&n.keywords.forEach(ie),Object.keys(n).forEach(function(e){var t=v(e);t!==e&&(n[t]=n[e],delete n[e])})),n},onBidWon:function(e){e.native&&function(e){var t=function(e){var t;if(f(e)&&re(e))t=e;else if(y(e))for(var n=0;n<e.length;n++){var i=e[n];re(i)&&(t=i)}return t}(e.native.javascriptTrackers);if(t)for(var e="pbjs_adid="+e.adId+";pbjs_auc="+e.adUnitCode,n=function(e){var t=e.indexOf('src="')+5,n=e.indexOf('"',t);return e.substring(t,n)}(t),i=n.replace("dom_id=%native_dom_id%",e),r=document.getElementsByTagName("iframe"),o=!1,a=0;a<r.length&&!o;a++){var s=r[a];try{var d=s.contentDocument||s.contentWindow.document;if(d)for(var c=d.getElementsByTagName("script"),u=0;u<c.length&&!o;u++){var l=c[u];l.getAttribute("data-src")==n&&(l.setAttribute("src",i),l.setAttribute("data-src",""),l.removeAttribute&&l.removeAttribute("data-src"),o=!0)}}catch(e){if(!(e instanceof DOMException&&"SecurityError"===e.name))throw e}}}(e)}};function ne(e){return y(e)&&0<e.length}function ie(e){ne(e.value)&&""===e.value[0]&&delete e.value}function re(e){var t=e.match(Z),n=null!=t&&1<=t.length,t=e.match(ee),t=null!=t&&1<=t.length;return e.startsWith(Q)&&t&&n}function oe(e){var t=!0;return t=e&&e.gdprConsent&&e.gdprConsent.gdprApplies&&2===e.gdprConsent.apiVersion?!(!0!==I(e.gdprConsent,"vendorData.purpose.consents.1")):t}function ae(n){var i={};i.sizes=se(n.sizes),i.primary_size=i.sizes[0],i.ad_types=[],i.uuid=n.bidId,n.params.placementId?i.id=parseInt(n.params.placementId,10):i.code=n.params.invCode,i.allow_smaller_sizes=n.params.allowSmallerSizes||!1,i.use_pmt_rule=n.params.usePaymentRule||!1,i.prebid=!0,i.disable_psa=!0;var e=function(e){if(!c(e.getFloor))return e.params.reserve||null;e=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return!w(e)||isNaN(e.floor)||"USD"!==e.currency?null:e.floor}(n);e&&(i.reserve=e),n.params.position&&(i.position={above:1,below:2}[n.params.position]||0),n.params.trafficSourceCode&&(i.traffic_source_code=n.params.trafficSourceCode),n.params.privateSizes&&(i.private_sizes=se(n.params.privateSizes)),n.params.supplyType&&(i.supply_type=n.params.supplyType),n.params.pubClick&&(i.pubclick=n.params.pubClick),n.params.extInvCode&&(i.ext_inv_code=n.params.extInvCode),n.params.publisherId&&(i.publisher_id=parseInt(n.params.publisherId,10)),n.params.externalImpId&&(i.external_imp_id=n.params.externalImpId),s(n.params.keywords)||(0<(t=B(n.params.keywords)).length&&t.forEach(ie),i.keywords=t);var r,o,t=I(n,"ortb2Imp.ext.data.pbadslot");t&&(i.gpid=t),n.mediaType!==D&&!I(n,"mediaTypes.".concat(D))||(i.ad_types.push(D),0===i.sizes.length&&(i.sizes=se([1,1])),n.nativeParams&&(r=n.nativeParams,o={},Object.keys(r).forEach(function(e){var t=X[e]&&X[e].serverName||X[e]||e,n=X[e]&&X[e].requiredParams;o[t]=p.utils.assign({},n,r[e]),t!==X.image.serverName&&t!==X.icon.serverName||!o[t].sizes||(e=o[t].sizes,(d(e)||y(e)&&0<e.length&&e.every(function(e){return d(e)}))&&(o[t].sizes=se(o[t].sizes))),t===X.privacyLink&&(o.privacy_supported=!0)}),i[D]={layouts:[o]}));var a=I(n,"mediaTypes.".concat(l)),t=I(n,"mediaTypes.video.context");i.hb_source=a&&"adpod"===t?7:1,n.mediaType!==l&&!a||i.ad_types.push(l),(n.mediaType===l||a&&"outstream"!==t)&&(i.require_asset_url=!0),n.params.video&&(i.video={},Object.keys(n.params.video).filter(function(e){return M(K,e)}).forEach(function(e){switch(e){case"context":case"playback_method":var t=n.params.video[e],t=y(t)?t[0]:t;i.video[e]=$[e][t];break;case"frameworks":break;default:i.video[e]=n.params.video[e]}}),n.params.video.frameworks&&y(n.params.video.frameworks)&&(i.video_frameworks=n.params.video.frameworks)),a&&(i.video=i.video||{},Object.keys(a).filter(function(e){return M(V,e)}).forEach(function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof i.video[e]&&(i.video[e]=a[e]);break;case"skip":"boolean"!=typeof i.video.skippable&&(i.video.skippable=1===a[e]);break;case"skipafter":"number"!=typeof i.video.skipoffset&&(i.video.skippoffset=a[e]);break;case"playbackmethod":"number"!=typeof i.video.playback_method&&(t=a[e],1<=(t=y(t)?t[0]:t)&&t<=4&&(i.video.playback_method=t));break;case"api":var t;!i.video_frameworks&&y(a[e])&&(t=a[e].map(function(e){e=4===e?5:5===e?4:e;if(1<=e&&e<=5)return e}).filter(function(e){return e}),i.video_frameworks=t)}})),n.renderer&&(i.video=p.utils.assign({},i.video,{custom_renderer_present:!0})),n.params.frameworks&&y(n.params.frameworks)&&(i.banner_frameworks=n.params.frameworks);t=q(N.getAdUnits(),function(e){return n.transactionId===e.transactionId});return t&&t.mediaTypes&&t.mediaTypes.banner&&i.ad_types.push(u),0===i.ad_types.length&&delete i.ad_types,i}function se(e){var t=[],n={};if(y(e)&&2===e.length&&!y(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===o(e))for(var i=0;i<e.length;i++){var r=e[i];(n={}).width=parseInt(r[0],10),n.height=parseInt(r[1],10),t.push(n)}return t}function de(e){return!!e.params.user}function ce(e){return!!parseInt(e.params.member,10)}function ue(e){if(e.params)return!!e.params.app}function le(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function pe(e){return!!e.debug}function ge(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===U}function fe(e){var t=!1,n=e.params,i=e.params.video;return t=!(t=n.frameworks&&y(n.frameworks)?M(e.params.frameworks,6):t)&&i&&i.frameworks&&y(i.frameworks)?M(e.params.video.frameworks,6):t}function me(e,t,n){s(e.video)&&(e.video={}),e.video[t]=n}function he(e){var t;t=e.adUnitCode,(t=document.getElementById(t).querySelectorAll("div[id^='google_ads']"))[0]&&t[0].style.setProperty("display","none"),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push(function(){window.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},function(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}.bind(null,e))})}function be(e,t,n,i){return t&&(i?e.push({source:n,id:t,rti_partner:i}):e.push({source:n,id:t})),e}t.exports=e("../shim.js").wrap({spec:Y,unitIDKey:"placementId",floorKey:"reserve",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":22}],3:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=e("../shim.js").polyfills,a=i.getBidIdParameter,s=i._each,d=i.isArray,c=i.getWindowTop,u=i.getUniqueIdentifierStr,l=i.parseUrl,p=i.deepSetValue,g=i.logError,o=i.logWarn,f=i.createTrackPixelHtml,m=i.getWindowSelf,h=i.isFn,b=i.isPlainObject,v=(i.registerBidder,i.BANNER),y=i.config,_="brightcom",i={code:_,supportedMediaTypes:[v],isBidRequestValid:function(e){return e.bidder===_&&void 0!==e.params&&void 0!==e.params.publisherId},buildRequests:function(t,n){try{var e="";n&&n.refererInfo&&(e=n.refererInfo.referer);var o=[],i=a("publisherId",t[0].params);s(t,function(e){var t=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes||e.sizes,n=(t=(t=d(t)&&d(t[0])?t:[t]).filter(function(e){return d(e)})).map(function(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}),i=document.getElementById(e.adUnitCode),r=n.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e}),r=(t=i,function(){try{return m()!==c()}catch(e){return!0}}()||null===t?"na":function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=n.w,n=n.h;return"visible"===c().document.visibilityState?function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=n.w,n=n.h,n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.w,i=t.h,r=e.getBoundingClientRect(),o=r.width,a=r.height,s=r.left,t=r.top,e=r.right,r=r.bottom;(0===o||0===a)&&n&&i&&(e=s+(o=n),r=t+(a=i));return{width:o,height:a,left:s,top:t,right:e,bottom:r}}(e,{w:i,h:n}),t=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},n]);return null===t?0:(t=t.width*t.height,n=n.width*n.height,t/n*100)}(e,t,{w:i,h:n}):0}(i,c(),r)),r=isNaN(r)?r:Math.round(r),r={id:e.bidId,banner:{format:n,ext:{viewability:r}},tagid:String(e.adUnitCode)},e=function(e){if(!h(e.getFloor))return e.params.bidFloor||null;e=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return!b(e)||isNaN(e.floor)||"USD"!==e.currency?null:e.floor}(e);e&&(r.bidfloor=e),o.push(r)});var r={id:u(),imp:o,site:{domain:l(e).host,page:e,publisher:{id:i}},device:{devicetype:/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)?1:/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)?3:2,w:screen.width,h:screen.height},tmax:y.getConfig("bidderTimeout")};return n&&n.gdprConsent&&(p(r,"regs.ext.gdpr",+n.gdprConsent.gdprApplies),p(r,"user.ext.consent",n.gdprConsent.consentString)),{method:"POST",url:"https://brightcombid.marphezis.com/hb",data:JSON.stringify(r),options:{contentType:"text/plain",withCredentials:!1}}}catch(e){g(e,{bidReqs:t,bidderRequest:n})}},interpretResponse:function(t){if(!t.body||"object"!=r(t.body))return o("Brightcom server returned empty/non-json response: "+JSON.stringify(t.body)),[];var n=t.body,t=n.id,n=n.seatbid;try{var i=[];return t&&n&&0<n.length&&n[0].bid&&0<n[0].bid.length&&n[0].bid.map(function(e){i.push({requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,currency:"USD",netRevenue:!0,mediaType:v,ad:function(e){var t=e.adm;"nurl"in e&&(t+=f(e.nurl));return t}(e),ttl:60,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]}})}),i}catch(e){g(e,{id:t,seatbid:n})}},getUserSyncs:function(e,t,n){return[]}};t.exports=e("../shim.js").wrap({spec:i,unitIDKey:"publisherId",floorKey:"bidFloor",floorStr:!1,uspSupport:!1,gdprSupport:!0})},{"../shim.js":22}],4:[function(e,t,n){"use strict";var r=e("../shim.js").polyfills,i=r.logWarn,u=r.createTrackPixelHtml,o=(r.registerBidder,0),a="consumable",s={code:"consumable",isBidRequestValid:function(e){return!!(e.params.networkId&&e.params.siteId&&e.params.unitId&&e.params.unitName)},buildRequests:function(e,t){var n={method:"POST",url:"",data:"",bidRequest:[]};if(e.length<1)return n;o=e[0].params.siteId,a=e[0].bidder;var i=r.utils.assign({placements:[],time:Date.now(),url:t.refererInfo.referer,referrer:document.referrer,source:[{name:"prebidjs",version:"6.9.0-pre"}]},e[0].params);return t&&t.gdprConsent&&(i.gdpr={consent:t.gdprConsent.consentString,applies:"boolean"!=typeof t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies}),t&&t.uspConsent&&(i.ccpa=t.uspConsent),e.map(function(e){var t,n=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes||e.sizes||[],e=r.utils.assign({divName:e.bidId,adTypes:e.adTypes||(t=[],n.forEach(function(e){e=d.indexOf(e[0]+"x"+e[1]);0<=e&&t.push(e)}),t)},e.params);e.networkId&&e.siteId&&e.unitId&&e.unitName&&i.placements.push(e)}),n.data=JSON.stringify(i),n.bidRequest=e,n.bidderRequest=t,n.url="https://e.serverbid.com/api/v2",n},interpretResponse:function(e,t){var n=[],i=t.bidRequest;e=(e||{}).body;for(var r=0;r<i.length;r++){var o,a,s,d={},c=(s=i[r]).bidId;e&&(a=(o=e.decisions&&e.decisions[c])&&o.pricing&&o.pricing.clearPrice,o&&a&&(d.requestId=c,d.cpm=a,d.width=o.width,d.height=o.height,d.unitId=s.params.unitId,d.unitName=s.params.unitName,d.ad=(s=o,d.unitId,d.unitName,s.contents&&s.contents[0]&&s.contents[0].body+u(s.impressionUrl)),d.currency="USD",d.creativeId=o.adId,d.ttl=30,d.meta={advertiserDomains:o.adomain||[]},d.netRevenue=!0,d.referrer=t.bidderRequest.refererInfo.referer,n.push(d)))}return n},getUserSyncs:function(e,t){return e.iframeEnabled?[{type:"iframe",url:"https://sync.serverbid.com/ss/"+o+".html"}]:e.pixelEnabled&&0<t.length?t[0].body.pixels:void i(a+": Please enable iframe based user syncing.")}},d=[null,"120x90","120x90","468x60","728x90","300x250","160x600","120x600","300x100","180x150","336x280","240x400","234x60","88x31","120x60","120x240","125x125","220x250","250x250","250x90","0x0","200x90","300x50","320x50","320x480","185x185","620x45","300x125","800x250"];d[77]="970x90",d[123]="970x250",d[43]="300x600",d[286]="970x66",d[3230]="970x280",d[429]="486x60",d[374]="700x500",d[934]="300x1050",d[1578]="320x100",d[331]="320x250",d[3301]="320x267",d[2730]="728x250",t.exports=e("../shim.js").wrap({spec:s,unitIDKey:"unitId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":22}],5:[function(e,t,n){"use strict";var s=e("../shim.js").polyfills,i=s.isArray,r=s.logWarn,o=s.logError,a=s.parseUrl,d=s.deepAccess,c=s.isStr,u=s._each,l=s.getBidIdParameter,p=s.isFn,g=s.isPlainObject,f=(s.registerBidder,s.BANNER),m=s.VIDEO,h=s.Renderer,b=s.includes,v=s.find,y="emx_digital",_="https://js.brealtime.com/outstream/1.30.0/bundle.js",w=[{key:"idl_env",source:"liveramp.com",rtiPartner:"idl",queryParam:"idl"},{key:"uid2.id",source:"uidapi.com",rtiPartner:"UID2",queryParam:"uid2"}],x={validateSizes:function(e){return i(e)&&void 0!==e[0]?e.every(function(e){return i(e)&&2===e.length}):(r(y+": Sizes should be an array"),!1)},checkVideoContext:function(e){return e&&e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context&&("instream"===e.mediaTypes.video.context||"outstream"===e.mediaTypes.video.context)},buildBanner:function(e){var t=[],t=(e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes?e.mediaTypes.banner:e).sizes;return x.validateSizes(t)||(r(y+": could not detect mediaType banner sizes. Assigning to bid sizes instead"),t=e.sizes),{format:t.map(function(e){return{w:e[0],h:e[1]}}),w:t[0][0],h:t[0][1]}},formatVideoResponse:function(t,e,n){return t.vastXml=e.adm,n.bidderRequest&&n.bidderRequest.bids&&0<n.bidderRequest.bids.length&&v(n.bidderRequest.bids,function(e){return t.requestId&&e.bidId&&t.requestId===e.bidId&&e.mediaTypes&&e.mediaTypes.video&&"outstream"===e.mediaTypes.video.context})&&(t.renderer=x.createRenderer(t,{id:e.id,url:_})),t},isMobile:function(){return/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)},isConnectedTV:function(){return/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)},getDevice:function(){return{ua:navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,devicetype:x.isMobile()?1:x.isConnectedTV()?3:2,language:navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage}},cleanProtocols:function(e){return e.protocols&&b(e.protocols,7)&&(r(y+": VAST 4.0 is currently not supported. This protocol has been filtered out of the request."),e.protocols=e.protocols.filter(function(e){return 7!==e})),e},outstreamRender:function(t){t.renderer.push(function(){var e=t&&t.params&&t.params[0]&&t.params[0].video?t.params[0].video:{};window.emxVideoQueue=window.emxVideoQueue||[],window.queueEmxVideo({id:t.adUnitCode,adsResponses:t.vastXml,options:e}),window.emxVideoReady&&window.videojs&&window.emxVideoReady()})},createRenderer:function(e,t){t=h.install({id:t.id,url:_,loaded:!1});try{t.setRender(x.outstreamRender)}catch(e){r("Prebid Error calling setRender on renderer",e)}return t},buildVideo:function(e){var t=s.utils.assign(e.mediaTypes.video,e.params.video);return i(e.mediaTypes.video.playerSize[0])?(t.w=e.mediaTypes.video.playerSize[0][0],t.h=e.mediaTypes.video.playerSize[0][1]):(t.w=e.mediaTypes.video.playerSize[0],t.h=e.mediaTypes.video.playerSize[1]),x.cleanProtocols(t)},parseResponse:function(e){try{return decodeURIComponent(e.replace(/%(?![0-9][0-9a-fA-F]+)/g,"%25"))}catch(e){o("emx_digitalBidAdapter","error",e)}},getReferrer:function(){try{return window.top.document.referrer}catch(e){return document.referrer}},getSite:function(e){return{domain:a(e.referer).hostname,page:e.referer,ref:x.getReferrer()}},getGdpr:function(e,t){return e.gdprConsent&&(t.regs={ext:{gdpr:!0===e.gdprConsent.gdprApplies?1:0}}),e.gdprConsent&&e.gdprConsent.gdprApplies&&(t.user={ext:{consent:e.gdprConsent.consentString}}),t},getSupplyChain:function(e,t){return e.bids[0]&&e.bids[0].schain&&(t.source={ext:{schain:e.bids[0].schain}}),t},getEids:function(e){return w.map(x.getUserId(e)).filter(function(e){return e})},getUserId:function(i){return function(e){var t=e.key,n=e.source,e=e.rtiPartner,t=d(i,"userId.".concat(t));return t?x.formatEid(t,n,e):null}},formatEid:function(e,t,n){return{source:t,uids:[{id:e,ext:{rtiPartner:n}}]}}},S={code:y,gvlid:183,supportedMediaTypes:[f,m],isBidRequestValid:function(e){if(!e||!e.params)return r(y+": Missing bid or bid params."),!1;if(e.bidder!==y)return r(y+': Must use "emx_digital" as bidder code.'),!1;if(!e.params.tagid||!c(e.params.tagid))return r(y+": Missing tagid param or tagid present and not type String."),!1;if(e.mediaTypes&&e.mediaTypes.banner){var t=e.mediaTypes.banner.sizes||e.sizes;if(!x.validateSizes(t))return r(y+": Missing sizes in bid"),!1}else if(e.mediaTypes&&e.mediaTypes.video){if(!x.checkVideoContext(e))return r(y+": Missing video context: instream or outstream"),!1;if(!e.mediaTypes.video.playerSize)return r(y+": Missing video playerSize"),!1}return!0},buildRequests:function(e,t){var o=[],n="https://hb.emxdgt.com?t="+(t.timeout||"")+"&ts="+Date.now()+"&src=pbjs",a=-1<location.protocol.indexOf("https")?1:0,i=x.getDevice(),r=x.getSite(t.refererInfo);u(e,function(e){var t=l("tagid",e.params),n=parseFloat(function(e){if(!p(e.getFloor))return parseFloat(l("bidfloor",e.params));e=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return!g(e)||isNaN(e.floor)||"USD"!==e.currency?null:e.floor}(e))||0,i=!!e.mediaTypes.video,r={id:e.bidId,tid:e.transactionId,tagid:t,secure:a},t=d(e,"ortb2Imp.ext.data.adserver.adslot");(t=t||d(e,"ortb2Imp.ext.data.pbadslot"))&&(r.ext={gpid:t.toString()});e=i?{video:x.buildVideo(e)}:{banner:x.buildBanner(e)},n=s.utils.assign(r,e,0<n?{bidfloor:n,bidfloorcur:"USD"}:{});o.push(n)});i={id:t.auctionId,imp:o,device:i,site:r,cur:"USD",version:"1.5.1"},i=x.getGdpr(t,s.utils.assign({},i));return i=x.getSupplyChain(t,s.utils.assign({},i)),t&&t.uspConsent&&(i.us_privacy=t.uspConsent),!t.userId||0<(r=x.getEids(t)).length&&(i.user&&i.user.ext?i.user.ext.eids=r:i.user={ext:{eids:r}}),{method:"POST",url:n,data:JSON.stringify(i),options:{withCredentials:!0},bidderRequest:t}},interpretResponse:function(e,i){var r=[],e=e.body||{};return e.seatbid&&0<e.seatbid.length&&e.seatbid[0].bid&&e.seatbid.forEach(function(e){e=e.bid[0];var t=!1,n=x.parseResponse(e.adm)||"",n={requestId:e.id,cpm:e.price,width:e.w,height:e.h,creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,ttl:e.ttl,ad:n};e.adm&&-1<e.adm.indexOf("<?xml version=")&&(t=!0,n=x.formatVideoResponse(n,s.utils.assign({},e),i)),n.mediaType=t?m:f,e.adomain&&e.adomain.length&&(n.meta={advertiserDomains:e.adomain}),r.push(n)}),r},getUserSyncs:function(e,t,n,i){var r=[];return e.iframeEnabled&&(e="https://biddr.brealtime.com/check.html",n&&"string"==typeof n.consentString&&("boolean"==typeof n.gdprApplies?e+="?gdpr=".concat(Number(n.gdprApplies),"&gdpr_consent=").concat(n.consentString):e+="?gdpr_consent=".concat(n.consentString)),r.push({type:"iframe",url:e})),r}};t.exports=e("../shim.js").wrap({spec:S,unitIDKey:"tagid",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":22}],6:[function(e,t,n){"use strict";function o(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function f(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){var t,n;t=i,e=r[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=e("../shim.js").polyfills,h=p.logWarn,i=p._each,a=p.isBoolean,b=p.isStr,v=p.isArray,y=p.inIframe,g=p.mergeDeep,_=p.deepAccess,s=p.isNumber,w=p.deepSetValue,x=p.logInfo,d=p.logError,S=p.deepClone,r=p.convertTypes,I=(p.registerBidder,p.BANNER),A=p.VIDEO,E=p.NATIVE,T=p.config,c=p.Renderer,u="pubmatic",k="PubMatic: ",B=void 0,l="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),C="Video.Placement param missing",z={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},R={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},j={mimes:R.ARRAY,minduration:R.NUMBER,maxduration:R.NUMBER,startdelay:R.NUMBER,playbackmethod:R.ARRAY,api:R.ARRAY,protocols:R.ARRAY,w:R.NUMBER,h:R.NUMBER,battr:R.ARRAY,linearity:R.NUMBER,placement:R.NUMBER,minbitrate:R.NUMBER,maxbitrate:R.NUMBER,skip:R.NUMBER},O={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},P={ICON:1,LOGO:2,IMAGE:3},D=[{id:O.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:O.TITLE.ID,required:!0},{id:O.IMAGE.ID,required:!0}],U={1:"PMP",5:"PREF",6:"PMPG"},N={EID:1,SEGMENT:2},q={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,i=q.getRendererId("pubmatic",e.rendererCode),e=document.getElementById(e.adUnitCode),r=0;r<window.bluebillywig.renderers.length;r++)if(window.bluebillywig.renderers[r]._id===i){n=window.bluebillywig.renderers[r];break}n?n.bootstrap(t,e):h("".concat(k,": Couldn't find a renderer with ").concat(i))}else h("".concat(k,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){e=l.replace("$RENDERER",e),t=c.install({url:e,loaded:!1,adUnitCode:t});try{t.setRender(q.outstreamRender)}catch(e){h("".concat(k,": Error tying to setRender on renderer"),e)}return t},outstreamRender:function(e){e.renderer.push(function(){q.bootstrapPlayer(e)})},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},M=[I,A,E],L=0,F=!1,G={},Y={};function K(e,t){if(!b(t))return t&&h(k+"Ignoring param key: "+e+", expects string-value, found "+m(t)),B;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map(function(e){return e.trim()}).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||B;case"yob":return parseInt(t)||B;default:return t}}function V(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,b(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&h(u+": adSlot must be a string. Ignoring adSlot"),""));var t=(n=e.params.adSlot).split(":"),n=t[0];if(2==t.length&&(e.params.adUnitIndex=t[1]),t=n.split("@"),e.params.adUnit=t[0],1<t.length)2==(t=t[1].split("x")).length?(e.params.width=parseInt(t[0],10),e.params.height=parseInt(t[1],10)):h(k+"AdSlot Error: adSlot not in required format");else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(I)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,r=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&r.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=r,1<=e.mediaTypes.banner.sizes.length&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function J(e){var t,n,i=g(_(e.mediaTypes,"video"),e.params.video);if(i!==B){for(var r in t={},n=e.adUnitCode,_(i,"placement")||h(C+" for "+n),j)i.hasOwnProperty(r)&&(t[r]=function(e,t,n){var i,e="Ignoring param key: "+e+", expects "+n+", found "+m(t);switch(n){case R.BOOLEAN:i=a;break;case R.NUMBER:i=s;break;case R.STRING:i=b;break;case R.ARRAY:i=v}return i(t)?t:(h(k+e),B)}(r,i[r],j[r]));v(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):s(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=B,h(k+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function W(e,t,n){var i=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==i&&""!==i&&i.hasOwnProperty("segments")){var o=i.segments.length;r+="jw-id="+i.content.id;for(var a=0;a<o;a++)r+="|jw-"+i.segments[a]+"=1";n?void 0===e.dctr||0==e.dctr.length?e.dctr=r:e.dctr+="|"+r:(e=e.ext)&&void 0===e.key_val?e.key_val=r:e.key_val+="|"+r}}function H(e){var t,n,i,r,o,a,s,d,c={},u={},l=e.hasOwnProperty("sizes")?e.sizes:[],p="",g=[],c={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:K("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:K("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?K("currency",e.params.currency):"USD"};if(i=c,(o=e).params.deals&&(v(o.params.deals)?o.params.deals.forEach(function(e){b(e)&&3<e.length?(i.pmp||(i.pmp={private_auction:0,deals:[]}),i.pmp.deals.push({id:e})):h(k+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+e)}):h(k+"Error: bid.params.deals should be an array of strings.")),r=c,a="",(o=e).params.dctr&&(a=o.params.dctr,b(a)&&0<a.length?(o=a.split("|"),a="",o.forEach(function(e){a+=0<e.length?e.trim()+"|":""}),o=a.length,"|"===a.substring(o,o-1)&&(a=a.substring(0,o-1)),r.ext.key_val=a.trim()):h(k+"Ignoring param : dctr with value : "+a+", expects string-value, found empty or non-string value")),W(c,e),e.hasOwnProperty("mediaTypes"))for(p in e.mediaTypes)switch(p){case I:(t=function(e){var t,n=e.mediaTypes.banner.sizes,i=[];if(n!==B&&v(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=B,h(k+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}0<n.length&&(i=[],n.forEach(function(e){1<e.length&&i.push({w:e[0],h:e[1]})}),0<i.length&&(t.format=i)),t.pos=0,t.topframe=y()?0:1}else h(k+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=B;return t}(e))!==B&&(c.banner=t);break;case E:u.request=JSON.stringify(function(e){var t,n,i,r={assets:[]};for(t in e){if(e.hasOwnProperty(t)){var o={};if(!(r.assets&&0<r.assets.length&&r.assets.hasOwnProperty(t)))switch(t){case O.TITLE.KEY:e[t].len||e[t].length?o={id:O.TITLE.ID,required:e[t].required?1:0,title:{len:e[t].len||e[t].length,ext:e[t].ext}}:h(k+"Error: Title Length is required for native ad: "+JSON.stringify(e));break;case O.IMAGE.KEY:e[t].sizes&&0<e[t].sizes.length?o={id:O.IMAGE.ID,required:e[t].required?1:0,img:{type:P.IMAGE,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:B),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:B),wmin:e[t].wmin||e[t].minimumWidth||(e[t].minsizes?e[t].minsizes[0]:B),hmin:e[t].hmin||e[t].minimumHeight||(e[t].minsizes?e[t].minsizes[1]:B),mimes:e[t].mimes,ext:e[t].ext}}:h(k+"Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case O.ICON.KEY:e[t].sizes&&0<e[t].sizes.length?o={id:O.ICON.ID,required:e[t].required?1:0,img:{type:P.ICON,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:B),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:B)}}:h(k+"Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case O.VIDEO.KEY:o={id:O.VIDEO.ID,required:e[t].required?1:0,video:{minduration:e[t].minduration,maxduration:e[t].maxduration,protocols:e[t].protocols,mimes:e[t].mimes,ext:e[t].ext}};break;case O.EXT.KEY:o={id:O.EXT.ID,required:e[t].required?1:0};break;case O.LOGO.KEY:o={id:O.LOGO.ID,required:e[t].required?1:0,img:{type:P.LOGO,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:B),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:B)}};break;case O.SPONSOREDBY.KEY:case O.BODY.KEY:case O.RATING.KEY:case O.LIKES.KEY:case O.DOWNLOADS.KEY:case O.PRICE.KEY:case O.SALEPRICE.KEY:case O.PHONE.KEY:case O.ADDRESS.KEY:case O.DESC2.KEY:case O.DISPLAYURL.KEY:case O.CTA.KEY:n=Y[t],i=void 0,i=n.KEY,o={id:n.ID,required:e[i].required?1:0,data:{type:n.TYPE,len:e[i].len,ext:e[i].ext}}}}o&&o.id&&(r.assets[r.assets.length]=o)}var a=D.length,s=0;return D.forEach(function(e){for(var t=r.assets.length,n=0;n<t;n++)if(e.id==r.assets[n].id){s++;break}}),F=a!=s,r}(e.nativeParams)),F?h(k+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):c.native=u;break;case A:(n=J(e))!==B&&(c.video=n)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:y()?0:1},v(l)&&1<l.length&&((l=l.splice(1,l.length-1)).forEach(function(e){g.push({w:e[0],h:e[1]})}),t.format=g),c.banner=t;return s=c,d=f({},_(e,"ortb2Imp.ext.data")),Object.keys(d).forEach(function(e){"pbadslot"===e?"string"==typeof d[e]&&d[e]&&w(s,"ext.data.pbadslot",d[e]):"adserver"===e?["name","adslot"].forEach(function(e){var t=_(d,"adserver.".concat(e));"string"==typeof t&&t&&(w(s,"ext.data.adserver.".concat(e.toLowerCase()),t),"adslot"===e&&w(s,"ext.dfp_ad_unit_code",t))}):w(s,"ext.data.".concat(e),d[e])}),function(i,r){var o=-1;"function"!=typeof r.getFloor||T.getConfig("pubmatic.disableFloors")||[I,A,E].forEach(function(n){var t;i.hasOwnProperty(n)&&(t=[],"banner"===n&&(i[n].w&&i[n].h&&t.push([i[n].w,i[n].h]),v(i[n].format)&&i[n].format.forEach(function(e){return t.push([e.w,e.h])})),0===t.length&&t.push("*"),t.forEach(function(e){var t=r.getFloor({currency:i.bidfloorcur,mediaType:n,size:e});x(k,"floor from floor module returned for mediatype:",n," and size:",e," is: currency",t.currency,"floor",t.floor),"object"!==m(t)||t.currency!==i.bidfloorcur||isNaN(parseInt(t.floor))||(t=parseFloat(t.floor),x(k,"floor from floor module:",t,"previous floor value",o,"Min:",Math.min(t,o)),o=-1===o?t:Math.min(t,o),x(k,"new floor value:",o))}))});i.bidfloor&&(x(k,"floor from floor module:",o,"impObj.bidfloor",i.bidfloor,"Max:",Math.max(o,i.bidfloor)),o=Math.max(o,i.bidfloor));i.bidfloor=!isNaN(o)&&0<o?o:B,x(k,"new impObj.bidfloor value:",i.bidfloor)}(c,e),c.hasOwnProperty(I)||c.hasOwnProperty(E)||c.hasOwnProperty(A)?c:B}function $(e,t){var n=null,e=_(e,"0.userId.flocId");return n=e&&e.id?t===N.SEGMENT?{id:"FLOC",name:"FLOC",ext:{ver:e.version},segment:[{id:e.id,name:"chrome.com",value:e.id.toString()}]}:(N.EID,{source:"chrome.com",uids:[{atype:1,id:e.id,ext:{ver:e.version}}]}):n}function X(e){return!0===v(e)&&0<e.length}i(O,function(e){G[e.ID]=e.KEY}),i(O,function(e){Y[e.KEY]=e});i={code:u,gvlid:76,supportedMediaTypes:[I,A,E],aliases:[{code:"groupm",gvlid:98}],isBidRequestValid:function(e){if(e&&e.params){if(!b(e.params.publisherId))return h(k+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(A)){var t=_(e.mediaTypes,"video.mimes"),n=_(e,"params.video.mimes");if(!1===X(t)&&!1===X(n))return h(k+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[A].hasOwnProperty("context"))return d("".concat(k,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[A].context&&!b(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[A].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(I)||e.mediaTypes.hasOwnProperty(E)?(delete e.mediaTypes[A],h("".concat(k,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(d("".concat(k,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n;t&&t.refererInfo&&(n=t.refererInfo);var i,r,o,a,s={pageURL:(a=n)&&a.referer?a.referer:window.location.href,refURL:window.document.referrer},d=(o=s,{id:""+(new Date).getTime(),at:1,cur:["USD"],imp:[],site:{page:o.pageURL,ref:o.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}),c="",u=[],l=[];if(e.forEach(function(e){(i=S(e)).params.adSlot=i.params.adSlot||"",V(i),i.params.hasOwnProperty("video")||i.hasOwnProperty("mediaTypes")&&i.mediaTypes.hasOwnProperty(E)||0!==i.params.width||0!==i.params.height?(s.pubId=s.pubId||i.params.publisherId,(s=function(e,t){var n,i,r;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),z)z.hasOwnProperty(n)&&(i=e[n])&&("object"===m(r=z[n])&&(i=r.f(i,t)),b(i)?t[n]=i:h(k+"Ignoring param : "+n+" with value : "+z[n]+", expects string-value, found "+m(i)));return t}(i.params,s)).transactionId=i.transactionId,""===c?c=i.params.currency||B:i.params.hasOwnProperty("currency")&&c!==i.params.currency&&h(k+"Currency specifier ignored. Only one currency permitted."),i.params.currency=c,i.params.hasOwnProperty("dctr")&&b(i.params.dctr)&&u.push(i.params.dctr),i.params.hasOwnProperty("bcat")&&v(i.params.bcat)&&(l=l.concat(i.params.bcat)),(e=H(i))&&d.imp.push(e)):h(k+"Skipping the non-standard adslot: ",i.params.adSlot,JSON.stringify(i))}),0!=d.imp.length){d.site.publisher.id=s.pubId.trim(),L=s.pubId.trim(),d.ext.wrapper={},d.ext.wrapper.profile=parseInt(s.profId)||B,d.ext.wrapper.version=parseInt(s.verId)||B,d.ext.wrapper.wiid=s.wiid||t.auctionId,d.ext.wrapper.wv="prebid_prebid_6.9.0-pre",d.ext.wrapper.transactionId=s.transactionId,d.ext.wrapper.wp="pbjs",d.user.gender=s.gender?s.gender.trim():B,d.user.geo={},d.user.geo.lat=K("lat",s.lat),d.user.geo.lon=K("lon",s.lon),d.user.yob=K("yob",s.yob),d.device.geo=d.user.geo,d.site.page=s.kadpageurl.trim()||d.site.page.trim(),d.site.domain=(r=d.site.page,(a=document.createElement("a")).href=r,a.hostname),"object"===m(T.getConfig("content"))&&(d.site.content=T.getConfig("content")),"object"===m(T.getConfig("device"))&&(d.device=p.utils.assign(d.device,T.getConfig("device"))),w(d,"source.tid",s.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(d.test=1),e[0].schain&&w(d,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(w(d,"user.ext.consent",t.gdprConsent.consentString),w(d,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&w(d,"regs.ext.us_privacy",t.uspConsent),!0===T.getConfig("coppa")&&w(d,"regs.coppa",1),o=d,a=_(r=e,"0.userIdAsEids"),(r=$(r,N.EID))&&(a=a||[]).push(r),v(a)&&0<a.length&&w(o,"user.eids",a),o=d,0<(a=(a=l).filter(function(e){return"string"==typeof e||(h(k+"bcat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,n){return 3<e.length?n.indexOf(e)===t:void h(k+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)})).length&&(h(k+"bcat: Selected: ",a),o.bcat=a),a=d,(e=$(e=e,N.SEGMENT))&&(a.user||(a.user={}),a.user.data||(a.user.data=[]),a.user.data.push(e));e=T.getConfig("ortb2")||{};return e.site&&g(d,{site:e.site}),e.user&&g(d,{user:e.user}),"object"===m(T.getConfig("app"))&&(d.app=T.getConfig("app"),d.app.publisher=d.site.publisher,d.app.ext=d.site.ext||B,"object"!==m(d.app.content)&&(d.app.content=d.site.content||B),delete d.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(d),bidderRequest:t}}},interpretResponse:function(e,i){var r=[],o="USD",a=JSON.parse(i.data),s=a.site&&a.site.ref?a.site.ref:"";try{e.body&&e.body.seatbid&&v(e.body.seatbid)&&(o=e.body.cur||o,e.body.seatbid.forEach(function(e){e.bid&&v(e.bid)&&e.bid.forEach(function(t){var n={requestId:t.impid,cpm:(parseFloat(t.price)||0).toFixed(2),width:t.w,height:t.h,creativeId:t.crid||t.id,dealId:t.dealid,currency:o,netRevenue:!0,ttl:300,referrer:s,ad:t.adm,pm_seat:e.seat||null,pm_dspid:t.ext&&t.ext.dspid?t.ext.dspid:null,partnerImpId:t.id||""};a.imp&&0<a.imp.length&&a.imp.forEach(function(e){if(t.impid===e.id)switch(!function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=M[e.ext.bidtype];else{x(k+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n,i=e.adm,e=new RegExp(/VAST\s+version/);if(0<=i.indexOf('span class="PubAPIAd"'))t.mediaType=I;else if(e.test(i))t.mediaType=A;else try{(n=JSON.parse(i.replace(/\\/g,"")))&&n.native&&(t.mediaType=E)}catch(e){h(k+"Error: Cannot parse native reponse for ad response: "+i)}}}(t,n),n.mediaType){case I:break;case A:n.width=(t.hasOwnProperty("w")?t:e.video).w,n.height=(t.hasOwnProperty("h")?t:e.video).h,n.vastXml=t.adm,function(e,t){var n,i,r;if(t.bidderRequest&&t.bidderRequest.bids){for(var o=0;o<t.bidderRequest.bids.length;o++)t.bidderRequest.bids[o].bidId===e.requestId&&(n=t.bidderRequest.bids[o].params,i=t.bidderRequest.bids[o].mediaTypes[A].context,r=t.bidderRequest.bids[o].adUnitCode);i&&"outstream"===i&&n&&n.outstreamAU&&r&&(e.rendererCode=n.outstreamAU,e.renderer=q.newRenderer(e.rendererCode,r))}}(n,i);break;case E:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return h(k+"Error: Cannot parse native reponse for ad response: "+t.adm)}if(n&&n.native&&n.native.assets&&0<n.native.assets.length){t.mediaType=E;for(var i=0,r=n.native.assets.length;i<r;i++)switch(n.native.assets[i].id){case O.TITLE.ID:t.native.title=n.native.assets[i].title&&n.native.assets[i].title.text;break;case O.IMAGE.ID:t.native.image={url:n.native.assets[i].img&&n.native.assets[i].img.url,height:n.native.assets[i].img&&n.native.assets[i].img.h,width:n.native.assets[i].img&&n.native.assets[i].img.w};break;case O.ICON.ID:t.native.icon={url:n.native.assets[i].img&&n.native.assets[i].img.url,height:n.native.assets[i].img&&n.native.assets[i].img.h,width:n.native.assets[i].img&&n.native.assets[i].img.w};break;case O.SPONSOREDBY.ID:case O.BODY.ID:case O.LIKES.ID:case O.DOWNLOADS.ID:case O.PRICE:case O.SALEPRICE.ID:case O.PHONE.ID:case O.ADDRESS.ID:case O.DESC2.ID:case O.CTA.ID:case O.RATING.ID:case O.DISPLAYURL.ID:t.native[G[n.native.assets[i].id]]=n.native.assets[i].data&&n.native.assets[i].data.value}t.native.clickUrl=n.native.link&&n.native.link.url,t.native.clickTrackers=n.native.link&&n.native.link.clicktrackers||[],t.native.impressionTrackers=n.native.imptrackers||[],t.native.jstracker=n.native.jstracker||[],t.width||(t.width=0),t.height||(t.height=0)}}}(t,n)}}),t.ext&&t.ext.deal_channel&&(n.dealChannel=U[t.ext.deal_channel]||null),n.meta={},t.ext&&t.ext.dspid&&(n.meta.networkId=t.ext.dspid),t.ext&&t.ext.advid&&(n.meta.buyerId=t.ext.advid),t.adomain&&0<t.adomain.length&&(n.meta.advertiserDomains=t.adomain,n.meta.clickUrl=t.adomain[0]),e.ext&&e.ext.buyid&&(n.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),r.push(n)})}))}catch(e){d(e)}return r},getUserSyncs:function(e,t,n,i){var r=""+L;return n&&(r+="&gdpr="+(n.gdprApplies?1:0),r+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),i&&(r+="&us_privacy="+encodeURIComponent(i)),!0===T.getConfig("coppa")&&(r+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+r}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+r}]},transformBidParams:function(e,t,n,i){return W(e,n.bids[0],!0),r({publisherId:"string",adSlot:"string"},e)}};t.exports=e("../shim.js").wrap({spec:i,unitIDKey:"adSlot",floorKey:"kadfloor",floorStr:!0,uspSupport:!0,gdprSupport:!0})},{"../shim.js":22}],7:[function(e,t,n){"use strict";function o(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function p(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){var t,n;t=i,e=r[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}var i=e("../shim.js").polyfills,g=i._each,f=i.getBidIdParameter,m=i.isArray,h=i.deepClone,b=i.parseUrl,v=i.getUniqueIdentifierStr,y=i.deepSetValue,_=i.logError,w=i.deepAccess,r=i.isInteger,x=i.logWarn,a=(i.registerBidder,i.ADPOD),s=i.BANNER,d=i.VIDEO,S=i.createEidsArray,I=i.config,A={mimes:function(e){return Array.isArray(e)&&0<e.length&&e.every(function(e){return"string"==typeof e})},minduration:function(e){return r(e)},maxduration:function(e){return r(e)},protocols:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=10})},w:function(e){return r(e)},h:function(e){return r(e)},startdelay:function(e){return r(e)},placement:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=5})},linearity:function(e){return-1!==[1,2].indexOf(e)},skip:function(e){return-1!==[0,1].indexOf(e)},skipmin:function(e){return r(e)},skipafter:function(e){return r(e)},sequence:function(e){return r(e)},battr:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=17})},maxextended:function(e){return r(e)},minbitrate:function(e){return r(e)},maxbitrate:function(e){return r(e)},boxingallowed:function(e){return-1!==[0,1].indexOf(e)},playbackmethod:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=6})},playbackend:function(e){return-1!==[1,2,3].indexOf(e)},delivery:function(e){return-1!==[1,2,3].indexOf(e)},pos:function(e){return Array.isArray(e)&&e.every(function(e){return 0<=e&&e<=7})},api:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=6})}},i={code:"sovrn",supportedMediaTypes:[s,d],gvlid:13,isBidRequestValid:function(e){return!(!e.params.tagid||isNaN(parseFloat(e.params.tagid))||!isFinite(e.params.tagid)||w(e,"mediaTypes.video.context")===a)},buildRequests:function(e,t){try{var i,r,o,a,s=[],d=[];g(e,function(e){!o&&e.userId&&(o=S(e.userId)).forEach(function(e){e.uids&&e.uids[0]&&("criteo.com"===e.source&&(a=e.uids[0].id),d.push({source:e.source,uid:e.uids[0].id}))}),e.schain&&(r=r||e.schain),i=i||f("iv",e.params);var t=e.getFloor&&"function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.banner?"banner":"video",size:"*"}):{};t.floor=t.floor||f("bidfloor",e.params);var n={adunitcode:e.adUnitCode,id:e.bidId,tagid:String(f("tagid",e.params)),bidfloor:t.floor};w(e,"mediaTypes.banner")&&(t=w(e,"mediaTypes.banner.sizes")||e.sizes,t=(t=(t=m(t)&&m(t[0])?t:[t]).filter(function(e){return m(e)})).map(function(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}),n.banner={format:t,w:1,h:1}),w(e,"mediaTypes.video")&&(n.video=function(e){var t={},n=w(e,"mediaTypes.video",{}),i=w(e,"params.video",{}),r={};Array.isArray(n.playerSize)&&(e=Array.isArray(n.playerSize[0])?n.playerSize[0]:n.playerSize,r.w=e[0],r.h=e[1]);var o=p(p(p({},r),n),i);return Object.keys(A).forEach(function(e){o.hasOwnProperty(e)&&(A[e](o[e])?t[e]=o[e]:x("The OpenRTB video param ".concat(e," has been skipped due to misformating. Please refer to OpenRTB 2.5 spec.")))}),t}(e)),n.ext=f("ext",e.ortb2Imp)||void 0;e=f("segments",e.params);e&&(n.ext=n.ext||{},n.ext.deals=e.split(",").map(function(e){return e.trim()})),s.push(n)});var n=h(I.getConfig("ortb2")),c=n.site||{};c.page=t.refererInfo.referer,c.domain=b(c.page).hostname;var u={id:v(),imp:s,site:c,user:n.user||{}};r&&(u.source={ext:{schain:r}}),t.gdprConsent&&(y(u,"regs.ext.gdpr",+t.gdprConsent.gdprApplies),y(u,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&y(u,"regs.ext.us_privacy",t.uspConsent),o&&(y(u,"user.ext.eids",o),y(u,"user.ext.tpid",d),a&&y(u,"user.ext.prebid_criteoid",a));var l="https://ap.lijit.com/rtb/bid?src=prebid_prebid_6.9.0-pre";return i&&(l+="&iv=".concat(i)),{method:"POST",url:l,data:JSON.stringify(u),options:{contentType:"text/plain"}}}catch(e){_("Could not build bidrequest, error deatils:",e)}},interpretResponse:function(e){var t=e.body,e=t.id,t=t.seatbid;try{var n=[];return e&&t&&0<t.length&&t[0].bid&&0<t[0].bid.length&&t[0].bid.map(function(e){var t={requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,ttl:e.ext&&e.ext.ttl||90,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]}};e.nurl?(t.mediaType=s,t.ad=decodeURIComponent("".concat(e.adm,'<img src="').concat(e.nurl,'">'))):(t.mediaType=d,t.vastXml=decodeURIComponent(e.adm)),n.push(t)}),n}catch(e){_("Could not intrepret bidresponse, error deatils:",e)}},getUserSyncs:function(e,t,n,i){try{var r,o,a=[];return t&&0!==t.length&&(e.iframeEnabled&&(r=t.filter(function(e){return w(e,"body.ext.iid")}).map(function(e){return e.body.ext.iid}),o=[],n&&n.gdprApplies&&"string"==typeof n.consentString&&o.push(["gdpr_consent",n.consentString]),i&&o.push(["us_privacy",i]),r[0]&&(o.push(["informer",r[0]]),a.push({type:"iframe",url:"https://ap.lijit.com/beacon?"+o.map(function(e){return e.join("=")}).join("&")}))),e.pixelEnabled&&t.filter(function(e){return w(e,"body.ext.sync.pixels")}).reduce(function(e,t){return e.concat(t.body.ext.sync.pixels)},[]).map(function(e){return e.url}).forEach(function(e){return a.push({type:"image",url:e})})),a}catch(e){return[]}}};t.exports=e("../shim.js").wrap({spec:i,unitIDKey:"tagid",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":22}],8:[function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var o=e("../shim.js").polyfills,a=(o.registerBidder,o.BANNER),s=o.ajax,d=o.isFn,c=o.isPlainObject,a={code:"vrtcal",supportedMediaTypes:[a],isBidRequestValid:function(e){return""!=e.bidId&&""!=e.auctionId},buildRequests:function(e){return e.map(function(e){var t,n=0;d(e.getFloor)&&(t=e.getFloor({currency:"USD",mediaType:"banner",size:e.sizes.map(function(e){e=i(e,2);return{w:e[0],h:e[1]}})}),c(t)&&"USD"===t.currency&&!isNaN(parseFloat(t.floor))&&(n=Math.max(n,parseFloat(t.floor))));n={prebidJS:1,prebidAdUnitCode:e.adUnitCode,id:e.bidId,imp:[{id:"1",banner:{},bidfloor:n}],site:{id:"VRTCAL_FILLED",name:"VRTCAL_FILLED",cat:["VRTCAL_FILLED"],domain:decodeURIComponent(window.location.href).replace("https://","").replace("http://","").split("/")[0]},device:{ua:"VRTCAL_FILLED",ip:"VRTCAL_FILLED"}};return void 0!==e.mediaTypes&&void 0!==e.mediaTypes.banner&&void 0!==e.mediaTypes.banner.sizes?(n.imp[0].banner.w=e.mediaTypes.banner.sizes[0][0],n.imp[0].banner.h=e.mediaTypes.banner.sizes[0][1]):(n.imp[0].banner.w=e.sizes[0][0],n.imp[0].banner.h=e.sizes[0][1]),{method:"POST",url:"https://rtb.vrtcal.com/bidder_prebid.vap?ssp=1804",data:JSON.stringify(n),options:{withCredentials:!1,crossOrigin:!0}}})},interpretResponse:function(e,t){if(!e||!e.body)return[];var n=[],i=e.body;return i&&(e={requestId:i.id,cpm:i.seatbid[0].bid[0].price,width:i.seatbid[0].bid[0].w,height:i.seatbid[0].bid[0].h,creativeId:i.seatbid[0].bid[0].crid,currency:"USD",netRevenue:!0,ttl:900,ad:i.seatbid[0].bid[0].adm,nurl:i.seatbid[0].bid[0].nurl},i.seatbid[0].bid[0].adomain&&i.seatbid[0].bid[0].adomain.length&&(e.meta={advertiserDomains:i.seatbid[0].bid[0].adomain}),n.push(e)),n},onBidWon:function(e){if(!e.nurl)return!1;e=e.nurl.replace(/\$\{AUCTION_PRICE\}/,e.cpm);return s(e,null),!0}};t.exports=e("../shim.js").wrap({spec:a,unitIDKey:"0",floorKey:"bidFloor",floorStr:!1,uspSupport:!1,gdprSupport:!1})},{"../shim.js":22}],9:[function(e,t,n){var o=e("./utils.js");t.exports=o.wrapAsync(function(n,i){var r,e=!1,t=n.method||(n.data?"POST":"GET");window.XMLHttpRequest?(r=new window.XMLHttpRequest).onreadystatechange=o.wrapAsync(function(){if(4===r.readyState){var e=r.status;if(200<=e&&e<300||304===e){if(n.rawProcessor)try{n.rawProcessor(r)}catch(e){o.err("AjaxRawProcFail",e)}if(n.parseResponseJson)try{var t=JSON.parse(r.responseText||"null");i(null,t,r)}catch(e){i({err:e,type:"parse"},"",r)}else i(null,r.responseText,r)}else i(0===e?{err:"",type:"timeout"}:{err:r.statusText,type:"status="+e},"",r)}}):(e=!0,(r=new window.XDomainRequest).onload=o.wrapAsync(function(){if(n.rawProcessor)try{n.rawProcessor(r)}catch(e){o.err("AjaxRawProcFail",e)}if(n.parseResponseJson)try{var e=JSON.parse(r.responseText||"null");i(null,e,r)}catch(e){i({err:e,type:"parse"},"",r)}else i(null,r.responseText,r)}),r.onerror=o.wrapAsync(function(e){i({err:e,type:"error"},"",r)}),r.ontimeout=o.wrapAsync(function(e){i({err:e,type:"timeout"},"",r)}),r.onprogress=function(){}),r.open(t,n.url),0!==n.max_ms&&(r.timeout=n.max_ms||3e3,o.logl("at","Ajax >",n.url,r.timeout)),e||(n.withCredentials&&(r.withCredentials=!0),o.each(n.headers,function(e,t){r.setRequestHeader(t,e)}),n.preflight&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",n.contentType||"text/plain")),r.send("POST"===t&&n.data)})},{"./utils.js":24}],10:[function(e,t,s){function i(){for(var e="",t=0;t<10;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e}var p=e("./utils.js"),d=e("./config.js"),c=3,g={banner:1,native:2,video:3},r=i(),o="aX0";s.id=[2,o,r].join(",");var u="";d.afterConsent(function(e,t,n){try{u=(window.__tcfapi?"2":window.__cmp?"1":"0")+(window.__uspapi?"1":"0")+n,e&&(u+=".g"+(e.gdprApplies?"Y":"N")+(e.consentString||"")),t&&(u+=".u"+(t.version||0)+(t.uspString||""))}catch(e){p.err("ClogErr",e)}e&&e.gdprApplies||(o=(o=String((document.cookie.match(/_adb=([^;]+)/)||[""]).pop()))||"a2"+(new Date).getTime().toString(36)+i(),p.cw("_adb",o,365),s.id=[2,o,r].join(","))});function l(e,t,n,i,r){f[e]||(f[e]=[]),f[e].push(r),m[e]=i,h[e]||(h[e]=setTimeout(function(){a(e,t)},n))}function a(e,t){var n,i;clearTimeout(h[e]),h[e]=!1,f[e]&&f[e].length&&(n=m[e],i=e===c?"1//"+f[e].length+n:"",i+=f[e].join(n),f[e]=[],y(e,t,i))}var f={},m={},h={};s.flushNow=function(){for(var e in f)a(e)};function b(e,t){return _(e)+"`"+_(t)}function v(e){var t=[];return p.each(e,function(e){e=e.split("x");2==e.length&&t.push(b(e[0],e[1]))}),t.join(".")}var y=function(e,t,n){if(document.body){var i=s.id,r=function(){if(!f[c]||!f[c].length)return"";var e=f[c].join("&e=");return f[c]=[],e}(),o=p.vp(),a="https://adspsp.com/pt/"+d.getId()+"/"+e+"/"+t+"/?a="+i+"&aa="+u+"&b="+n+"&e="+r+"&c="+encodeURIComponent(p.url().href)+"&d="+encodeURIComponent(p.url().referrer)+"&f="+p.pgts().join(".")+"&g="+p.perfts()+"&u=e2bb0993:kywwpy40:29g&v="+_(o.w)+"."+_(o.h)+"."+_(o.y)+"."+_(document.body.clientHeight),o=w();for(o&&(a+="&m="+o),a=d.deca(a),p.each(x,function(e,t){p.isarr(e)||(e=[e]),p.each(e,function(e){a+="&"+t+"="+encodeURIComponent(e)})});S.length;)delete x[S.pop()];p.each(I,function(e,t){a+="&"+t+"="+encodeURIComponent(e)}),I={},a+=D(),p.mock()?p.logl("mock","bypass px",a):p.pixel(a,!0)}else setTimeout(function(){y(e,t,n)},50)},_=function(e){return(parseInt(e,10)||0).toString(36)},n=[];s.mod=function(e){-1===n.indexOf(e)&&n.push(e)};var w=function(){return n.length?n.join(""):""},x={};s.meta=p.thread(function(e,t){x[e]=t});var S=[];s.metaqx=p.thread(function(e,t){-1==S.indexOf(e)&&S.push(e),x[e]?p.isarr(x[e])||(x[e]=[x[e]]):x[e]=[],x[e].push(t)});var I={};s.ctr=p.thread(function(e,t){(t=void 0===t?1:t)&&(I[e]=(I[e]||0)+t)}),s.auctionConfigured=p.thread(function(e){var i=[];e.eachUnit(function(e){var n=[],t=v(e.all_sizes);e.eachBidReqConf(function(e){var t=e.bidder_id+"@"+(t=e.bidder_unit_id,String(t).replace(/[^\d\w-]/,"")),e=v(e.all_sizes);n.push(t+"^"+e)}),i.push(e.id+"^"+t+":"+n.join(","))});var n=e.instancectr+"//"+i.length+"-"+i.join("_");e.eachUnit(function(e){var t=B("auctionConfigured",e);n+="&bu="+[e.unique_id,encodeURIComponent(t.dom_id),encodeURIComponent(t.gpt_path)].join(",")}),y(1,2,n)});function A(e,i){var r="";return e.rawbid&&e.rawbid.meta&&(r=[],p.each(e.rawbid.meta,function(e,t){var n=k[String(t).toLowerCase()];n&&(p.isarr(e)||(e=[e]),p.each(e,function(e){r.push(n+i.id(e))}))}),r=r.join(".")),r}function E(e,t){var n=e._origin?t.id(e._origin.config.unit.unique_id):"";n?(c=(p.dts()-e.ts)/1e3,u=0|Math.max(0,e.extras.ttl-c),n+="@"+p.b62(u)):n=p.b62(0|e.ms);var i,r,o,a,s,d,c,u,l=[n];return(e._bid_cpm||e.extras.dealid)&&(i=t.id(e.width+"x"+e.height),r=p.b62(e.extras.ttl),o=e.extras.cur?t.id(e.extras.cur):"",a=e.extras.nr?1:0,s=g[e.extras.mediaType]||0,d=e.extras.crid!==e.config.id?t.id(e.extras.crid):"",c=e.extras.dealid?t.id(e.extras.dealid):"",u=e.cpm,n=A(e,t),l=l.concat([i,r,o,a,s,d,c,u,n]),e._bid_cpm!=e.cpm&&(l.push(e._bid_cpm),l.push(e._min_cpm),e.blocked&&l.push(t.id(e.blocked)))),l.join(",")}function T(){this.reset()}var k={advertisername:"0",advertiserdomains:"1",adomain:"1",advertiserid:"2",buyerid:"3",networkid:"4",brandid:"5",brandname:"6",dspid:"7",primarycatid:"8"},B=function(t,e){var n="",i="";try{n=e.get("dom_id").replace(/[:,]+/g,""),i=e.get("gpt_slot").getAdUnitPath().replace(/[:,]+/g,"")}catch(e){p.log(t,"failed to encode ids",e)}return{dom_id:n,gpt_path:i}};T.prototype.reset=function(){this.ids={},this.data=[],this.length=0},T.prototype.id=function(e){var t;return e=String(e).replace(/,/,"_"),this.ids[e]||(t=encodeURIComponent(e),this.length+=t.length,this.ids[e]=p.b62(this.data.push(t)-1)),this.ids[e]},s.auctionCompleted=p.thread(function(t){var a=new T,n=[],i=0;t.eachUnit(function(r){var e=B("bidRendered",r),e=[a.id(t.instancectr),a.id(t.id),a.id(r.id),a.id(r.unique_id),a.id(e.dom_id),a.id(e.gpt_path)].join(","),o=[];r.eachBidReqConf(!1,function(e){var i=a.id(e.bidder_id)+","+a.id(e.bidder_unit_id);e.responses.length?p.each(e.responses,function(e){var t=r.getWinner()===e?1:"",n=i,e=E(e,a);e&&(n+=","+t+","+e),o.push(n)}):o.push(i)}),encoded_unit=e+":"+o.join(":"),i+=encoded_unit.length,n.push(encoded_unit),3e3<i+a.length&&(y(11,3,n.join("&b=")+"&bi="+a.data.join(",")),a.reset(),n=[],i=0)}),i&&y(11,3,n.join("&b=")+"&bi="+a.data.join(","))}),s.bidRendered=p.thread(function(e,t,n){var i=B("bidRendered",e.config.unit),r=[e.config.unit.auction.instancectr,e.config.unit.id];r.push(e.config.bidder_id),r.push(e.config.bidder_unit_id),r.push(e.cpm),r.push(e.width),r.push(e.height),r.push(e.config.unit.unique_id),r.push(t),r.push(encodeURIComponent(i.dom_id)),r.push(encodeURIComponent(i.gpt_path));t=new T,i=A(e,t),t=t.data;i&&(e.extras.anfo=i,e.extras.anfd=t);t=JSON.stringify(e.extras);"{}"!=t&&r.push(encodeURIComponent(t));r=(n?5:1)+":"+r.join(",");d.libSettings().record_bidids&&(r+="&b=4:"+[e.config.unit.unique_id,e.config.unit.id,e.id].join(",")),l(12,2,100,"&b=",r)}),s.enhRendered=p.thread(function(e,t,n){n=[e,t,_(n.advertiserId),_(n.campaignId),_(n.creativeId),_(n.versionId)];l(12,1,100,"&b=","3:"+n.join(","))}),s.gptRendered=p.thread(function(e,t,n){var i=B("gptRendered",t);l(12,2,100,"&b=","2:"+[e.instancectr,t.id,_(n.advertiserId),_(n.campaignId),_(n.creativeId),n.isEmpty||"",_(n.lineItemId),n.size?b(n.size[0],n.size[1]):"",_(n.sourceAgnosticCreativeId),_(n.sourceAgnosticLineItemId),t.unique_id,encodeURIComponent(i.dom_id),encodeURIComponent(i.gpt_path)].join(","))}),s.gptViewed=p.thread(function(e,t,n){var i=B("gptViewed",t);l(15,2,100,"&b=","1:"+[e.instancectr,t.id,t.unique_id,encodeURIComponent(i.dom_id),encodeURIComponent(i.gpt_path)].join(","))});function C(){var e,n,i;clearTimeout(z),z=!1,R?z=setTimeout(C,100):(e=O,O={},R=j,j=new T,n=[],i=0,p.each(e,function(e,t){e=t+":"+e.join(":");i+=e.length,n.push(e),3e3<i+R.length&&(y(13,3,n.join("&b=")+"&bi="+R.data.join(",")),n=[],i=0)}),i&&y(13,3,n.join("&b=")+"&bi="+R.data.join(",")),R=!1)}var z,R,j=new T,O={};s.lateBid=p.thread(function(e){var t=B("lateBid",e.config.unit),t=[j.id(e.config.unit.auction.instancectr),j.id(e.config.unit.auction.id),j.id(e.config.unit.id),j.id(e.config.unit.unique_id),j.id(t.dom_id),j.id(t.gpt_path)].join(","),e=[j.id(e.config.bidder_id),j.id(e.config.bidder_unit_id),"",E(e,j)].join(",");O[t]||(O[t]=[]),O[t].push(e),z=z||setTimeout(C,500)}),p.onerr(function(){try{var t="";p.each(arguments,function(e){null!=e&&("object"==typeof e?e=e.stack?(e.message||"")+" "+e.stack:JSON.stringify(e):"string"!=typeof e&&"number"!=typeof e&&(e=e.toString?e.toString():String(e)),t+=" "+e)}),t=t.substr(0,300)+(300<t.length?"...":""),t="500.1:"+p.perfts()+":"+t,l(c,1,1e3,"&e=",t)}catch(e){p.isdebug()&&console.error("AdBridg error report failed: ",e)}}),s.rec=p.thread(function(e){l(17,1,500,"&b=",e)}),p.onrec(s.rec);var P={};s.sqz=p.thread(function(e,t,n,i,r){var o,a=t+"."+i;P[a]||(P[a]={qk:t,qd:i,s:!1,d:[]},t&&(P[a].s=new T)),!1===t?P[a].d.push(r):(p.isarr(n)||(n=[n]),o=[],p.each(n,function(e){o.push(P[a].s.id(e))}),o=o.join(","),P[a].d.push(o+":"+r)),l(18,1,e,"","")});var D=function(){var e=P;P={},f[18]=[];var n="";return p.each(e,function(t,e){t.qk&&(n+="&"+t.qk+"="+t.s.data.join(",")),p.each(t.d,function(e){n+="&"+t.qd+"="+e})}),n};s.init=p.thread(function(){l(19,1,100,"","")})},{"./config.js":12,"./utils.js":24}],11:[function(e,t,n){var h=e("./utils"),b=(e("./unit"),e("./analytics")),v=e("./modules"),y=e("./config"),_=0;t.exports=function(){var i,r;this.instancectr=++_,this.id=h.genID("A"),this.uuid=h.genUUID(),this.ts=0,this.jsts=0,this.jstsend,this.max_ms,y.afterConsent(function(e,t){i=e,r=t}),this.ajax_ms=y.libSettings().ajax_ms,"function"==typeof this.ajax_ms&&(this.ajax_ms=this.ajax_ms());var d,o=this,a={},s=[],c=[],u=[],l=!1,p=[],g=!1,f=[];this.addUnit=function(e){return c.push(e),u.push(e.alias),e.auction=o,e.eachBidder(function(e,t){!t.uspSupport&&r&&"Y"===r.uspString[2]||a[e]||(a[e]=t,.5<Math.random()?s.push(e):s.unshift(e))}),o.max_ms=o.max_ms?Math.min(o.max_ms,e.max_ms):e.max_ms,(!o.ajax_ms||o.ajax_ms<o.max_ms)&&(o.ajax_ms=o.max_ms+200),o},this.ctUnits=function(){return c.length},this.hasUnit=function(){return 0<c.length},this.eachUnit=function(e){h.each(c,e)},this.findUnit=function(e){for(var t=0;t<c.length;++t)if(e(c[t]))return c[t];return!1},this.eachBidRequest=function(e,n){"function"==typeof e&&(n=e,e=!1),this.eachUnit(function(t){t.eachBidReqConf(e,function(e){n(t,e)})})},this.getUnitByBidReqId=function(t){var n=!1;return o.eachUnit(function(e){e.getBidReqConf(t)&&(n=e)}),n},this.getBidRequest=function(t){var n=!1;return o.eachUnit(function(e){n=n||e.getBidReqConf(t)}),n},this.getBid=function(e){for(var t=0;t<c.length;++t){var n=c[t].getBid(e);if(n)return n}return!1},this.markBidEmpty=function(e){var t=o.getUnitByBidReqId(e);t?t.addEmptyBid(e):h.err("Cannot mark bid empty: unknown id",e)},this.markBidderEmpty=function(t){o.eachUnit(function(e){e.markEmpty(t)})},this.isDone=function(){return l},this.lock=function(e){-1==p.indexOf(e)&&(h.log("Auction ",o.id," locked: ",e),p.push(e))},this.unlock=h.wrapAsync(function(e){var t=p.indexOf(e);-1!=t?(p.splice(t,1),h.log("Auction ",o.id," unlocked: ",e,p),!p.length&&g&&g()):h.log("Auction ",o.id," lock not found: ",e)}),this.onHalt=function(e){f.push(e)},this.execute=function(e){o.ts=h.dts(),o.jsts=(new Date).getTime();var t=y.libSettings().fbo;"function"==typeof t&&(s=t(a)),d="started",v.trigger("auction.before_bids",o),h.log("Auction",o.id,"starting with",c.length,"units:",u,"/ bidders:",s,"/ timeout:",o.max_ms),d="inProgress",b.auctionConfigured(o),v.trigger("auction.start",o);var n=h.wrapAsync(function(){l||(l=!0,v.trigger("auction.bidding_done",o),o.eachUnit(function(e){e.halt()}),d="completed",o.jstsend=(new Date).getTime(),b.auctionCompleted(o),v.trigger("auction.complete",o),h.each(f,function(e){h.thread(e)()}),e(o))}),i=h.wrapAsync(function(){return p.length?(h.log("Auction ",o.id,"waiting on locks",p),void(g=n)):void n()}),r=0;o.eachUnit(function(e){e.onReady(h.wrapAsync(function(){l||++r>=c.length&&(h.log("Auction ",o.id," received bids for ",r," / ",c.length," units. Duration: ",h.dts()-o.ts,"ms"),i())}))}),h.each(s,function(e){var t=a[e];h.thread(function(){t.execute(o)})()}),setTimeout(function(){l||(h.log("Auction ",o.id," timing out with ",r," / ",c.length," units completed. Duration: ",h.dts()-o.ts,"ms"),i())},o.max_ms)};var t=[],m={};this.getBdrReqId=function(e){return t[e]||(t[e]=h.genID("R")),t[e]},this.toPrebidBidderReq=function(e){var n,t;return m[e]||(a[e],n=[],this.eachBidRequest(e,function(e,t){n.push(t.toPrebid())}),t={referer:h.url().href,stack:[h.url().href],reachedTop:window.top===window,numIframes:0|!(window.top===window)},m[e]={auctionId:this.uuid,auctionStart:this.jsts,bidderCode:e,bidderRequestId:this.getBdrReqId(e),bids:n,gdprConsent:i,uspConsent:(r||{}).uspString,timeout:this.max_ms,refererInfo:t}),m[e]},this.toPrebidBidderReqs=function(){var n=[];return h.each(a,function(e,t){n.push(this.toPrebidBidderReq(t))}.bind(this)),n},this.toPrebid=function(){var e=this.toPrebidBidderReqs(),n=[],i=[],r=[],o=[],a=[],s=[];return this.eachUnit(function(e){var t=e.toPrebidAdUnit();n.push(t),i.push(t.code);e=e.toPrebidResults();r=r.concat(e.noBids),o=o.concat(e.bidsReceived),a=a.concat(e.winningBids),s=s.concat(e.prebidWinningBids)}),{auctionId:this.uuid,timestamp:this.jsts,auctionEnd:this.jstsend,auctionStatus:d,adUnits:n,adUnitCodes:i,labels:void 0,bidderRequests:e,noBids:r,bidsReceived:o,winningBids:a,timeout:this.max_ms,prebidWinningBids:s}}}},{"./analytics":10,"./config":12,"./modules":16,"./unit":23,"./utils":24}],12:[function(d,e,t){function c(e,t,n){var i=t.mapping_rules;if(!i)return p.log("NO MAPPING RULES: ",t),0;var r,o=e.get("gpt_slot"),a=o.getAdUnitPath(),s=e.get("gpt_sizes"),d=e.get("dom_id"),c=e.get("dom_ad_class");for(r in i){if(!i.hasOwnProperty(r))return;var u=i[r],l=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if("vp.max_width"==r&&u<l)return;if("vp.min_width"==r&&l<u)return;if("lib"==r.substr(0,3)){l=n[r.substr(4)];if(("function"==typeof l&&l(o,a,s,d))!=u)return}if("gpt.adunit"==r&&u!=a)return;if("gpt.adunit_regex"==r&&!new RegExp(u,"i").test(a))return;if("gpt.domid"==r&&u!=d)return;if("gpt.domid_regex"==r&&!new RegExp(u,"i").test(d))return;if("gpt.has_size"==r&&!s.match(u))return;if("gpt.no_size"==r&&s.match(u))return;if("adb.ad_class"==r&&u!=c)return;if("adb.ad_class_regex"==r&&!new RegExp(u,"i").test(c))return}return p.log("Unit mapped: ",d,"->",t.alias),1}function u(e,t){return{id:t[0],alias:t[1],size:t[2],other_sizes:t[3]||[],min_cpm:t[4],max_ms:t[5],settings:t[6]||{},rule_order:t[7],mapping_rules:t[8],bid_req_confs:t[9]}}var p=d("./utils"),l=(d("./ajax"),{c:"3340835",s:{bid_strategy:".05:.05-7.5,.5:8-20,1:21-40,2:42-50",track_imps:!0,post_view:function(e,t){if(t.gfyReload)return t.gfyReload("GPT")},preconfigure_init:function(){var e=p.url(),t=p.vp();p.pixel("https://adspsp.com/pt/3340835/1337/1337/?t="+(e.is_top?1:0)+"&c="+encodeURIComponent(e.href)+"&d="+encodeURIComponent(e.referrer)+"&g="+p.perfts()+"&v="+t.w+","+t.h+","+t.y)},before_gpt:function(){p.log("Requiring GPT Sandbox SafeFrames"),AdBridg.gpt.pubads().setSafeFrameConfig({sandbox:!0})},gamconfig_filter:function(e){return!e.inject||!p.url().href.match("gfycat.com/ifr/")},getHouseAd:function(e,t){var n=[["https://gfycat.com/popular","https://assets.gfycat.com/self/mbl1/popular_mbl1.png"],["https://gfycat.com/signup","https://assets.gfycat.com/self/mbl1/collections_mbl1.png"],["https://gfycat.com/gaming","https://assets.gfycat.com/self/mbl1/gaming_mbl1.png"],["https://gfycat.com/signup","https://assets.gfycat.com/self/mbl1/profiles_mbl1.png"],["https://gfycat.com/signup","https://assets.gfycat.com/self/mbl1/saveyourgifs_mbl1.png"],["https://gfycat.com/signup","https://assets.gfycat.com/self/mbl1/sync_mbl1.png"]];t((n=n[n.length*Math.random()|0],'<a target="_blank" href="@href@"><img height="50" src="@src@"></img>'.replace("@href@",n[0]).replace("@src@",n[1])))},nogpt:function(){return location.href.includes("/ifr/")},unsafeBidders:"brightcom"},u:{1:[1,"Share Leaderboard Desktop","728x90",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Desktop_728x90$"},[[3,"div-gpt-ad-1539831873986-0",0,0],[5,"14183443",0,0],[8,"4979045",{pageId:1037401,sizeId:225},0],[9,"605440",0,0],[119,"67869",0,0],[157,"10581",{unitName:"cnsmbl-ebooks-728x90-slider",zoneIds:"[2005501]"},0],[157,"5986",{unitName:"cnsmbl-audio-728x90-slider",zoneIds:"[2001203]"},0],[166,"20087",0,0]]],2:[2,"Share Desktop Rectangle","300x250",[],.04,2e3,0,0,{"gpt.adunit_regex":"gfycat_desktop"},[[3,"div-gpt-ad-1536793174405-0",0,0],[5,"13955672",0,0],[8,"4949948",{pageId:1037401,sizeId:170},0],[9,"605439",0,0],[119,"67868",0,0],[157,"10580",{unitName:"cnsmbl-ebooks-300x250-slider",zoneIds:"[2005500]"},0],[157,"10586",{unitName:"cnsmbl-video-300x250-videoonly",zoneIds:"[2005503]",test:!0},0],[157,"5985",{unitName:"cnsmbl-audio-300x250-slider",zoneIds:"[2001202]"},0],[166,"20087",0,0]]],4:[4,"Share Mobile Leaderboard","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Mobile_320x50$"},[[3,"div-gpt-ad-1540311296874-0",0,0],[5,"14244150",0,0],[8,"5205683",{pageId:1047e3,sizeId:3055},0],[9,"605441",0,0],[119,"67871",0,0],[157,"10582",{unitName:"cnsmbl-ebooks-320x50-slider",zoneIds:"[2005502]"},0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0],[166,"20087",0,0],[177,"0",0,0]]],5:[5,"Feed Mobile Leaderboard","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_MobileSearch"},[[3,"div-gpt-ad-1540917940531-0",0,0],[5,"14304874",0,0],[8,"4998446",{pageId:1047e3,sizeId:3055},0],[9,"605441",0,0],[119,"67871",0,0],[157,"10582",{unitName:"cnsmbl-ebooks-320x50-slider",zoneIds:"[2005502]"},0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0],[166,"20087",0,0],[177,"0",0,0]]],6:[6,"Feed Desktop  Leaderboard","728x90",[],.04,2e3,0,0,{"gpt.adunit_regex":"Newpages_ABF"},[[3,"div-gpt-ad-1557883006889-0",0,0],[5,"14183443",0,0],[8,"4979045",{pageId:1037401,sizeId:225},0],[9,"605440",0,0],[119,"67869",0,0],[157,"10581",{unitName:"cnsmbl-ebooks-728x90-slider",zoneIds:"[2005501]"},0],[157,"5986",{unitName:"cnsmbl-audio-728x90-slider",zoneIds:"[2001203]"},0],[166,"20087",0,0]]],7:[7,"Feed Desktop Rectangle","300x250",[],.04,2e3,0,0,{"gpt.adunit_regex":"Category_page"},[[3,"div-gpt-ad-1558157128054-0",0,0],[5,"13955672",0,0],[8,"4949948",{pageId:1037401,sizeId:170},0],[9,"605439",0,0],[119,"67868",0,0],[157,"10580",{unitName:"cnsmbl-ebooks-300x250-slider",zoneIds:"[2005500]"},0],[157,"10586",{unitName:"cnsmbl-video-300x250-videoonly",zoneIds:"[2005503]",test:!0},0],[157,"5985",{unitName:"cnsmbl-audio-300x250-slider",zoneIds:"[2001202]"},0],[166,"20087",0,0]]],8:[8,"Discover Desktop Leaderboard","728x90",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Discover_728x90$"},[[3,"div-gpt-ad-1557883006889-0",0,0],[5,"14183443",0,0],[8,"4979045",{pageId:1037401,sizeId:225},0],[9,"605440",0,0],[119,"67869",0,0],[157,"10581",{unitName:"cnsmbl-ebooks-728x90-slider",zoneIds:"[2005501]"},0],[157,"5986",{unitName:"cnsmbl-audio-728x90-slider",zoneIds:"[2001203]"},0],[166,"20087",0,0]]],9:[9,"Discover Mobile Leaderboard","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Discover_320x50$"},[[3,"div-gpt-ad-1540311296874-0",0,0],[5,"14304874",0,0],[8,"4998446",{pageId:1047e3,sizeId:3055},0],[9,"605441",0,0],[119,"67871",0,0],[157,"10582",{unitName:"cnsmbl-ebooks-320x50-slider",zoneIds:"[2005502]"},0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0],[166,"20087",0,0],[177,"0",0,0]]],10:[10,"Player Bottom Leaderboard","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_PlayerBottom_320x50$"},[[3,"gfy-player-bottom",0,0],[5,"18929314",0,0],[8,"5205684",{pageId:1047e3,sizeId:3055},0],[9,"605441",0,0],[119,"67871",0,0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0],[166,"20087",0,0],[177,"0",0,function(e){return!!/Mobi/.test(navigator.userAgent)&&e}]]],11:[11,"Adhesion Bottom Mobile","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Mobile_AdhesionBottom_320x50$"},[[3,"div-gpt-ad-1540311296874-0",0,0],[5,"18929300",0,0],[8,"4998446",{pageId:1047e3,sizeId:3055},0],[9,"605441",0,0],[119,"67871",0,0],[157,"10582",{unitName:"cnsmbl-ebooks-320x50-slider",zoneIds:"[2005502]"},0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0],[166,"20087",0,0],[177,"0",0,0]]]}}),g={},f={},n={};window.AdBridg=window.AdBridg||{cmd:[]},window.AdBridg.global=function(e,t){if(void 0===t)return p.logl("g","Global read: ",e,n[e]),n[e];n[e]=t,p.logl("g","Global set: ",e,t)},window.AdBridg.globals={version:"v6.9.0-pre"},l.s.preconfigure_init&&p.wrapAsync(l.s.preconfigure_init)(l.s),t.getId=function(){return l.c},t.libSettings=function(t){if(t){var e,n;try{n="function"==typeof l.s[t]?(e=Array.prototype.slice.apply(arguments,[1]),l.s[t].apply(null,e)):l.s[t]}catch(e){p.err("ConfigKeyFail",t,e)}return n}return l.s},t.kvp=function(e){var t=l.s.gpt_kvp_overrides;return t&&t[e]?t[e]:e},t.proc=function(e){l.s.pub=l.s.pub||{},p.each(e,function(e,t){l.s.pub[t]=e}),p.log("Publisher config update: ",JSON.stringify(l.s.pub)),d("./modules.js").trigger("pub.config",l.s.pub)},t.deca=function(e){if(l.s.alter_adb_pixel)try{e=l.s.alter_adb_pixel(e)}catch(e){p.err("Alter adb fail",e)}return e};t.configureUnit=function(e,t){var n,i=!1,r=[];for(n in l.u)if(l.u.hasOwnProperty(n)){var o=u(0,l.u[n]);if(d("./modules.js").trigger("unit.dynamic",o,l.s,e),l.s.dynamic_configuration)try{var a=l.s.dynamic_configuration(o,l.s,e);if(!(o="object"==typeof a||!1===a?a:o))continue}catch(e){p.err("Failed dynamic configuration",e)}if(t){if(t!==o.id)continue;i=o;break}if(o.rule_order)r[o.rule_order]=o;else if(c(e,o,l.s)){i=o;break}}if(!i&&r.length)for(var s=0;s<r.length;++s)if(r[s]&&c(e,r[s],l.s)){i=r[s];break}i&&(e.configure(i),function(e,t){if(t.bid_req_confs&&t.bid_req_confs.length)for(var n=0;n<t.bid_req_confs.length;++n){var i=t.bid_req_confs[n],r={bidder_id:i[0],bidder_unit_id:i[1],settings:i[2]||{},mutate:i[3]||!1};0;i=f[String(r.bidder_id)];p.qsab(i,r.bidder_id)&&(e.addBidder(i,g[i]),e.addBidReqConf(i,r,l.s))}}(e,i))},t.units=function(n){p.each(l.u,function(e,t){n(u(0,e))})};var i=l.s.usp;(i="function"==typeof i?i():i)&&p.cfusp(i.image,i.iframe,i.delay),t.afterConsent=d("./consent.js")(l);function r(n,i,r){t.afterConsent(function(e){return e&&e.gdprApplies&&!e.consentString?p.log("GDPR skip register",n,e):void(g[n]?p.err("Duplicate bidder alias "+n):(t={bidder_id:r[0],settings:r[1]||{},mutate:r[2]||!1},g[n]=new i(n,t.bidder_id,t.settings,e,o),g[n].alias=n,g[n].id=t.bidder_id,g[n].settings=t.settings,g[n].mutate=t.mutate||!1,f[String(t.bidder_id)]=n));var t})}var o=d("./modules.js");o.setup(t);var a=d("./adapters/vrtcal.js"),s=d("./adapters/brightcom.js"),m=d("./adapters/consumable.js"),h=d("./adapters/emx_digital.js"),b=d("./adapters/sovrn.js"),v=d("./adapters/aol.js"),i=d("./adapters/appnexusast.js");r("pubmatic",d("./adapters/pubmatic.js"),[3,{publisherId:"157495"},0]),r("appnexus",i,[5,0,0]),r("aol",v,[8,{network:"11545.1"},0]),r("sovrn",b,[9,0,0]),r("emx",h,[119,0,0]),r("consumable",m,[157,{siteId:"2000766",networkId:"9969"},0]),r("brightcom",s,[166,0,0]),r("vrtcal",a,[177,0,0]),t.afterConsent(function(e){d("./modules.js").trigger("consent.check_complete",e)})},{"./adapters/aol.js":1,"./adapters/appnexusast.js":2,"./adapters/brightcom.js":3,"./adapters/consumable.js":4,"./adapters/emx_digital.js":5,"./adapters/pubmatic.js":6,"./adapters/sovrn.js":7,"./adapters/vrtcal.js":8,"./ajax":9,"./consent.js":13,"./modules.js":16,"./utils":24}],13:[function(i,e,t){var r,s=i("./utils.js");e.exports=s.wrapAsync(function(e){return r=e,function(e){I(e)}});var n,o,a="",d=function(e,t){a+=e,t&&(a+=t)},c={iab:"A",conversant:"B"},u={geoblock:"C",geoblockbids:"D",geocmp:"E"},l="M",p="AT,BE,BG,CR,CY,CZ,DK,EE,FI,FR,DE,GR,HU,IE,IT,LV,LI,LU,MT,NL,PL,PT,RO,SK,SI,SP,SE,GB,NO,IS,LI,GI,AX,GF,GP,MQ,YT,RE,MF,FK,CH,AD,MC,SM,VA,",g=!1,f=!1,m=!1,h=[];s.qs("adb_skip_consent")&&(s.log("Consent: skipped by qs"),f=g=!0);function b(){if(g&&f)for(;h.length;){var e=h.shift();A(e)}}function v(){k||(k=!0,s.log("Consent: removing action configurations."),r.u=[],d("N"))}function y(){googletag&&googletag.cmd&&!B&&(B=!0,s.log("Consent: set GPT setRequestNonPersonalizedAds(1)."),d("L"),googletag.cmd.push(function(){googletag.pubads().setRequestNonPersonalizedAds(1)}))}function _(){googletag&&googletag.cmd&&!C&&(C=!0,s.log('Consent: set GPT setPrivacySettings({ "restrictDataProcessing": true }).'),d(l),googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})}))}var w,x,S,I=s.wrapAsync(function(e){"function"==typeof e?(e=s.wrapAsync(e),g&&f?A(e):(h.push(e),m||(m=!0,z(),P()))):s.err("Consent: invalid cb",e)}),A=function(e){e(n,o,a)},E=s.wrapAsync(function(e){s.log("Consent: done gathering GDPR consent",e),n=e,g=!0,d("u"),b()}),T=s.wrapAsync(function(e){s.log("Consent: done gathering USP consent",e),o=e,f=!0,d("h"),b()}),k=!1,B=!1,C=!1,z=function(){var e=r.s.cmp;"function"==typeof e?(d("t"),e(r.s,s.wrapAsync(function(e){R(e)}))):R(e)},R=s.wrapAsync(function(n){return n?"pubblock"===n?(s.log("Consent: gdpr: pubblock"),d("F"),v(),y(),void E({gdprApplies:!0,consentString:""})):"iab"===n||"conversant"===n?(d(c[n]),void O(n)):"geoblock"===n||"geoblockbids"===n||"geocmp"===n?(d(u[n]),void q(function(e){if(-1===p.indexOf(e.slice(0,2)))return s.log("Consent: gdpr: not in EU:",e),d("y"),void E({gdprApplies:!1,consentString:""});if("geocmp"===n){var t=r.s.cmp_for_geo;return s.log("Consent: gdpr: in EU, checking cmp:",t),d("x"),void setTimeout(function(){R(t)},0)}if("geoblock"===n)return d("v"),s.rec("GDPRBlockAll"),void s.log("Consent: gdpr: in EU, disabling ads");d("w"),s.log("Consent: gdpr: geoblockbids - preventing auctions and continuing to GAM"),v(),y(),E({gdprApplies:!0,consentString:""})})):(d("z"),s.err("Consent: unrecognized cmp value",n),void E()):(d("G"),void E())}),j=0,O=s.wrapAsync(function(){if("function"!=typeof window.__cmp&&"function"!=typeof window.__tcfapi){var e=r.s.cmp_check_interval,t=r.s.cmp_check_max;if(e&&j<t)return 0===j&&(d("p"),s.log("Consent: gdpr: cmp not found yet - checking every ",e,"ms; max ",t,"intervals")),j+=1,void setTimeout(O,e);var n=r.s.cmp_fallback;return n?(s.log("Consent: gdpr: fallback to",n),d("o"),void setTimeout(function(){R(n)},0)):(d("n"),void s.log("Consent: gdpr: CMP object not found, preventing further execution."))}var o,a;window.__tcfapi?(s.log("Consent: gdpr: calling TCFv2"),d("U"),o=!1,(a=function(){window.__tcfapi("getTCData",2,s.wrapAsync(function(e,t){var n,i,r;if(e){if(d("s"),n=e.tcString,(r=(i=e).gdprApplies)&&!n)return o||(o=!0,s.log("Consent: gdpr: TCFv2 not ready yet. Waiting...")),void setTimeout(a,200)}else d("r");E({consentString:n,vendorData:i,gdprApplies:r})}))})()):(s.log("Consent: gdpr: calling CMP"),d("q"),window.__cmp("getVendorConsents",null,s.wrapAsync(function(e){var t,n,i;s.log("Consent: gdpr: CMP result",e),e?(t=e.metadata||e.consentData,n=e.vendorConsents,i=e.gdprApplies,d("s")):d("r"),E({consentString:t,vendorData:n,gdprApplies:i})})))}),P=function(){var e=r.s.ccpa;if("optout"===e)return s.log("Consent: ccpa: opting out all users, restricting gpt processing"),d("l"),_(),void T({version:1,uspString:D()});if(0!==(e||"").indexOf("geoblock,"))return!e&&window.__uspapi&&(e="iab",d("k")),e?"iab"===e?(d("j"),void N()):(s.log("Consent: ccpa: unknown strategy, continuing as normal; strategy=",e),d("i"),void T()):(s.log("Consent: ccpa: no strategy defined, continuing as normal"),d("m"),void T());var t=e.split(",").slice(1);q(function(e){-1!==t.indexOf(e)?(s.log("Consent: ccpa: opting out ",t," users, restricting gpt processing"),d("O"),_(),T({version:1,uspString:D()})):(s.log("Consent: ccpa: region OK",e),d("T"),T({version:1,uspString:"1---"}))})},D=function(){var e=r.s.ccpa_signatory||"N";return"1"+(r.s.ccpa_button||"N")+"Y"+e},U=0,N=s.wrapAsync(function(){var n=r.s.usp_check_interval||500,i=r.s.usp_check_max||30;if(!window.__uspapi)return n&&U<i?(0===U&&(s.log("Consent: usp: __uspapi not found yet - checking every ",n,"ms; max ",i,"intervals"),d("b")),U+=1,void setTimeout(N,n)):(s.log("Consent: usp: __uspapi not found, preventing further execution."),void d("a"));0===U&&d("c"),window.__uspapi("getUSPData",1,s.wrapAsync(function(e,t){return s.log("Consent: usp: result",e,t),t||e&&e.uspString?(e&&e.uspString?(d("g"),"Y"===e.uspString.substr(2,1)&&_()):d("d"),void T(e)):n&&U<i?(0===U&&(s.log("Consent: usp: result empty, re-checking in ",n,"ms"),d("e")),U+=1,void setTimeout(N,n)):(s.log("Consent: usp: __uspapi returned invalid, defaulting to Opt Out"),d("f"),_(),void T({version:1,uspString:D()}))}))}),q=(S=[],function(e){var t,n;"function"==typeof e?(e=s.wrapAsync(e),w||(t=s.cr("adbrgn"))&&(s.log("Consent: region cookie found",t),d("S"),w=t),w?e(w):(S.push(e),x||(s.log("Consent: geo region requested"),n=function(){for(;S.length;)S.shift()(w)},x=!0,i("./ajax.js")({url:"https://geo.adspsp.com",withCredentials:!1,parseResponseJson:!1},s.wrapAsync(function(e,t){return e?(s.err("geo/region",e),r.s.cmp_allow_geofail?(w="????",s.log("Consent: error getting region, continuing"),d("P"),void n()):(s.log("Consent: region check failed; preventing further action"),void d("Q"))):(w=t,s.log("Consent: region check result",w),s.cw("adbrgn",w),s.log("Consent: cached region",w),d("R"),void n())}))))):s.err("Consent: bad region cb",e)})},{"./ajax.js":9,"./utils.js":24}],14:[function(e,t,n){if(window.AdBridg=window.AdBridg||{cmd:[]},window.googletag=window.googletag||{cmd:[]},window.pbjs=window.pbjs||{que:[]},AdBridg.gpt=window.googletag,!(AdBridg.exists||window.googletag&&googletag.cmd&&googletag.cmd===AdBridg.cmd)){AdBridg.exists=!0;var a,s,m=e("../utils.js"),u=e("../unit.js"),l=e("../auction.js"),h=e("../config.js"),b=e("../analytics.js"),v=e("../modules.js"),r=e("../mockprebid.js");if(!m.qs("adb_off")){if(e=m.vp(),/headless/i.test(navigator.userAgent)||0===e.w||0===e.h)return m.log("headless browser detected; shutting down"),void m.rec("headless");s={enableSingleRequest:Se,disableInitialLoad:Se,addEventListener:(a={add:function(e,t){a[e]=(a[e]||[]).concat(t)},remove:function(e,t){a[e]=(a[e]||[]).filter(function(e){return e!==t})},trigger:function(){var t=[].slice.apply(arguments),e=t.shift();(a[e]||[]).forEach(function(e){e.apply(0,t)})}}).add,removeEventListener:a.remove,safeFrameConfig:!1,setSafeFrameConfig:function(e){s.safeFrameConfig=e},targeting:{},setTargeting:function(e,t){s.targeting[e]=t},refresh:function(e){e.forEach(function(e){var n=document.createElement("iframe"),t=document.getElementById(e.getSlotElementId()),i=!s.safeFrameConfig||e.getTargeting("unsafe")[0];n.height=e.sizes[0][1],n.width=e.sizes[0][0],n.border="0px",n.hspace="0",n.vspace="0",n.marginWidth="0",n.marginHeight="0",n.style.border="0",n.scrolling="no";var r={slot:e,advertiserId:0,campaignId:0,creativeId:0,isEmpty:!(n.frameBorder="0"),lineItemId:0,size:null,sourceAgnosticCreativeId:0,sourceAgnosticLineItemId:0},o=e.getTargeting(h.kvp("adb_adid"))[0];i?n.src="about:blank":(s.safeFrameConfig&&s.safeFrameConfig.sandbox&&(n.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),n.src="https://prod.adspsp.com/iframe.html"),t.innerHTML="",t.appendChild(n),o?(n.contentDocument.open(),n.contentDocument.write(i?'<script>try { top.AdBridg.render(document, "'+o+'") } catch(e) {}<\/script>':'<html><head><script type="text/javascript" src="https://prod.adspsp.com/adbpmc2.js"><\/script><script type="text/javascript">AdBridgServe("'+location.href+'", "'+o+'");<\/script></head><body></body></html>'),a.trigger("slotRenderEnded",r)):"function"==typeof(o=h.libSettings().getHouseAd)?o(e,function(e,t){n.contentDocument.open(),n.contentDocument.write(e),r.isEmpty=!1,a.trigger("slotRenderEnded",m.assign(r,t))}):(m.log(e.getAdUnitPath(),"nothing to render"),r.isEmpty=!0,a.trigger("slotRenderEnded",r))})}},AdBridg.gptStub={cmd:{push:function(e){e()}},pubads:function(){return s},defineSlot:function(e,t,n){var i={sizes:t,targeting:{},addService:Se,getSlotElementId:function(){return n},getAdUnitPath:function(){return e},setTargeting:function(e,t){i.targeting[e]=t},getTargeting:function(e){return[].concat(i.targeting[e],s.targeting[e]).filter(Boolean)},getTargetingMap:Se};return i},enableServices:Se,display:Se},("function"==typeof h.libSettings().nogpt&&h.libSettings().nogpt()||m.qs("adb_nogpt"))&&(m.log("Disabling GPT"),AdBridg.gpt=AdBridg.gptStub);function p(e){return function(){var d=m.mock();o||(o=!0,v.on("icu.iab",c)),m.each(e,function(e){var t,n,i,r,o,a=e.getSlotElementId(),s=document.getElementById(a);s&&(s.innerHTML="",n=t=!1,r=i=0,m.each(e.getSizes(),function(e){"fluid"===e?t=!0:(0===r||"small"===d&&r>e.height||"large"===d&&r<e.height||"native"===d&&Math.random()<.5)&&(i=e.width,r=e.height)}),t&&!r?(n=!0,i="100%",r=m.random(90,600)+"px"):(i+="px",r+="px"),a="border: 0pt none; display: inline-block; width: "+i+"; height: "+r+"; background: #dbbdf1;",(o=document.createElement("div")).setAttribute("style",a),o.innerText=i+" x "+r+" // "+e.getAdUnitPath(),s.appendChild(o),t&&"native"===d&&setTimeout(function(){i="100%",r=m.random(90,600)+"px",o.style.width=i,o.style.height=r,o.innerText=i+" x "+r+" (native resize) // "+e.getAdUnitPath()},m.random(100,500)),se({mocked:!0,slot:e,isEmpty:!1,size:n?"fluid":[i,r],serviceName:"publisher_ads",advertiserId:1,campaignId:1,comoanyIds:null,creativeId:1,creativeTemplateId:null,isBackfill:!1,labelIds:null,lineItemId:1,slotContentChanged:!0,sourceAgnosticCreativeId:1,sourceAgnosticLineItemId:1}))})}}var o=!1,c=function(e,t){for(var n=AdBridg.gpt.pubads().getSlots(),i=0;i<n.length;++i){var r=n[i];if(r.getSlotElementId()===t.d)return m.log("MOCK VIEWED SLOT!",t.d),void ce({mocked:!0,slot:r})}},d=!1,g=[],f=!1,y=[],_=!1,w=[],x=[],S={},I={},A={},E={},T=!1,k=[],B=[],C={},z=[],R="Workflow |",j=!0,e=h.libSettings().sra_if;(e&&!e()||h.libSettings().no_sra)&&(j=!1);function O(n,i,a){return m.wrapAsync(function(o){be("ra",function(){var r=[];o.eachUnit(function(t){if(o===f){if(!t.get("gpt_slot")||t.get("preload_used"))return;t.set("preload_used",1)}try{var e=h.libSettings().post_auc_ufilter;if(e){var n=e(t,a);if(n)return void m.log("Ignoring",t.alias,t.get("dom_id"),n)}}catch(e){m.err("Err auc unit filter ",t.alias,t.get("dom_id"),e)}try{var i=t.getWinner();if(t.settings.require_bid&&!i)return m.log("Discarding unit ",t.alias,t.get("dom_id")," -- requires bid but had none."),void m.thread(function(){AdBridg.destroySlots([t.get("gpt_slot")])})();i&&(i.config.unit.setImpData("adb_mtype",i.extras.mediaType),t.gptTargetSet(i)),function(e){var t=h.libSettings().bid_strategy,n=e.getWinner(),i=e.get("gpt_slot");N(i),v.trigger("gpt.set_targeting",e,i);var r,o=e.get("adb_imp_data");if(o&&(r=i.getTargeting("adb_imp")||[],m.isarr(r)||(r=[r]),m.each(o,function(e){e&&-1===r.indexOf(e)&&r.push(e)}),r.length&&i.setTargeting(h.kvp("adb_imp"),r)),h.libSettings().track_alias&&i.setTargeting(h.kvp("adb_cfg"),e.alias),!n)return i.setTargeting(h.kvp("adb_bdr"),["none"]),M(i,-1),v.trigger("gpt.no_hbc",e,i,function(e){return m.toRange(e,t)},function(e,t){q(e),M(e,t)});AdBridg.gpt!==window.googletag&&(i.setTargeting("unit",e),(h.libSettings().unsafeBidders||"").split(",").filter(function(e){return e===n.config.bidder_name}).length&&i.setTargeting("unsafe",!0));var a=(C[n.id]=n).config.dfp_bidder_name||n.config.bidder_name,s=n.cpm,o=h.libSettings().cur;o&&(o.exclude&&-1<o.exclude.indexOf(n.config.bidder_id)?m.log("Currency conversion skipped: ",n.config.bidder_name):(m.log("Currency conversion: USD = ",s,"; Rate = ",o.rate,"; DFP = ",o.rate*s),s*=o.rate));var d=m.toRange(s,t),c=d.kv;v.trigger("gpt.modify_hbc",e,i,{bid:n,range:d,mod:function(e){return s=e,d=m.toRange(s,t),c=d.kv,d}}),m.qs("adb_force_bidder")?(a="force",c=""):m.qs("adb_force_sf_bidder")&&(a="forcesf",c=""),m.qs("adb_force_pbuc")&&(a="force_pbuc",c="",m.log("Forcing PBUC"));e=h.libSettings().vs_threshold;if("function"==typeof e)try{var u=e(s);u&&i.setTargeting(h.kvp("adb_vs"),u)}catch(e){m.err("HVfail",e)}i.setTargeting(h.kvp("adb_bdr"),[a]),i.setTargeting(h.kvp("adb_hbc"),[c]),i.setTargeting(h.kvp("adb_adid"),[n.id]),h.libSettings().track_mtype&&n.extras&&n.extras.mediaType&&i.setTargeting(h.kvp("adb_mtype"),[n.extras.mediaType]),m.log("Set GPT targeting for ",i.getAdUnitPath()," / ",i.getSlotElementId(),": ",a,c),M(i,s)}(t),r.push(t.get("gpt_slot"))}catch(e){m.err("Err setting unit ",t.alias,t.get("dom_id"),e)}});var e,t=B.concat(r);if(B=[],D(t),"function"==typeof n&&n(o),j&&!(t=V("AC",t)).length)return m.err("All units cancelled",o.id);(j||a)&&(te(),m.log(R,"GPT Batch: ",t.length),(e=h.libSettings("gpt_refresh_options",i))&&(i=e),v.trigger("gpt.before_request",t,i,a),m.mock()?(e=Math.floor(1900*Math.random())+100,m.logl("mock","bypass gpt",e,a),setTimeout(p(t),e)):AdBridg.gpt.pubads().refresh(t,i),v.trigger("gpt.request_adbridg",o,a))})})}function P(){var e,t;T&&(e=k.length,(k=V("PT",k)).length?(m.isdebug()&&(t=[],m.each(k,function(e){t.push(e.getAdUnitPath()+" / "+e.getSlotElementId())}),m.log("Non-bid request with",k.length," units: ",t)),be("rp",function(){var e,t,n=k;k=[],n.length&&(te(),D(n),m.log(R,"GPT PT Batch: ",n.length),e=h.libSettings("gpt_refresh_options")||{},v.trigger("gpt.before_request",n,e),m.mock()?(t=Math.floor(1900*Math.random())+100,m.logl("mock","bypass gpt-pt",t),setTimeout(p(n),t)):AdBridg.gpt.pubads().refresh(n,e),v.trigger("gpt.request_passthrough",n))})):e&&m.err("PT units cancelled"))}function D(e){m.each(e,function(e){var t=e.getSlotElementId(),n=(F[t]||0)+1;F[t]=n;t=h.libSettings().track_imps;if(t)try{"string"!=typeof t&&(t="1:1-11");for(var i=Math.floor(m.toRange(n,t).kv.split("-")[0]),r=e.getTargeting("adb_imp"),o=r.length-1;0<=o;--o)String(r[o]).match(/^\d+$/)&&r.splice(o,1);r.push(i),e.setTargeting(h.kvp("adb_imp"),r)}catch(e){m.err("Counter failed: ",e)}})}function U(e){return G[e.getSlotElementId()]}var N=function(e){var t,n,i=h.libSettings().gpt_clear_kvps,r=[],o=e.getTargetingMap(),a=!1;for(n in o)o.hasOwnProperty(n)&&("adb_"===n.substr(0,4)||i&&0<=i.indexOf(n)?a=!0:r.push([n,o[n]]));if(a)for(e.clearTargeting(),t=0;t<r.length;++t)e.setTargeting(r[t][0],r[t][1]);q(e)},q=function(e){var t=h.libSettings().gpt_exclusions;if(t){for(var n=!1,i=e.getCategoryExclusions(),r=i.length-1;0<=r;--r){var o=i[r];t.hasOwnProperty(o)&&(i.splice(r,1),n=!0)}if(n)for(e.clearCategoryExclusions(),r=0;r<i.length;++r)e.setCategoryExclusion(i[r])}},M=function(e,t){var n=h.libSettings().gpt_exclusions;if(n){var i,r=[];for(i in n){var o=n[i];("function"==typeof o&&o(e,t)||o<=t)&&(e.setCategoryExclusion(i),r.push(i))}r.length&&m.log("Set GPT category exclusions for ",e.getAdUnitPath()," / ",e.getSlotElementId(),": ",r)}},L={},F={},G={};AdBridg.has_gpt_lock=U;function Y(e){m.log("Locked slot: ",e.getSlotElementId()),G[e.getSlotElementId()]=!0}function K(e,i,r){var o=[],o=Number(e[0])===e[0]?[e]:[].concat(e),a=[];if(m.each(o,function(e,t){if("string"==typeof e[t]){var n=e[t].split("x");return 0!==n[0]&&0!==n[1]||m.err("0 size in",i,r,e[t]),void(e[t].match(/^\d+x\d+$/)||a.push(t))}0!==e[0]&&0!==e[1]||m.err("0 size in",i,r,e.join?e.join("x"):e),o[t]=e.join("x")}),a.length)for(var t=a.length-1;0<=t;--t)o.splice(t,1);return o}var V=m.wrapAsync(function(r,e,o){var a=h.libSettings().max_imp_ctr;"function"==typeof a&&(a=a());var s=[];return m.each(e,function(e){var t=e&&e.getSlotElementId?e:e.get("gpt_slot");if(t){var n=t.getSlotElementId();if(!A[n]){if(J("F"+r,n))return m.log("Slot excluded; element hidden",n);if(o){if(U(t))return m.log("Cannot refresh locked dom_id: ",t.getSlotElementId());if(a){var i=F[n]||0;if(a<=i)return L[n]?m.log("Slot excluded; too many imps: ",t,i+" > "+a):m.err("Slot imp max: ",t.getAdUnitPath(),n,a)}}n=[];if(v.trigger("gpt.filter_slot",r,t,o,n),n.length)return m.log("Module blocking",r,t,n);s.push(e)}}}),s}),J=function(e,t,n){var i=m.dom_invisible(t);if(i){n=n||0;var r=h.libSettings().block_invisible;if(r="function"==typeof r?r(e,t,i):r)return m.logl("dei","DEI.R",e,t,i,n),i;m.logl("dei","DEI.A",e,t,i,n)}return!1};window.AdBridg.defineSlot=m.wrapAsync(function(e,t,n){var i=J("DS",n);if(i)return m.log("Slot definition blocked: ",n,i),!1;var r=h.libSettings().block_slot;if("function"==typeof r)try{if(r(e,n))return void m.err("Blocking slot:  ",e," with dom_id: ",n)}catch(e){m.err("DefineOverride",e)}var o=h.libSettings().override_define;if("function"==typeof o)try{var a=o(e,t,n);if(!1===a)return m.log("Param override prevented defineSlot",e," dom_id=",n),!1;"object"==typeof a&&(a.dfp_ad_unit_path&&(e=a.dfp_ad_unit_path),a.dfp_sizes&&(t=a.dfp_sizes),a.dom_id&&(n=a.dom_id))}catch(e){m.err("DefineOverride",e)}t&&(!m.isarr(t)||t.length)||(b.ctr("dsea"),t=[1,1]);i=AdBridg.gpt.defineSlot(e,t,n);if(!i)return i;i.addService(AdBridg.gpt.pubads()),Y(i);var r=K(t,e,n),o=r.join(","),s=new u({dom_id:n,gpt_slot:i,gpt_sizes:o,imp_ctr:(F[n]||0)+1});s.restrictSizesTo(r),S[n]=o;a=400,r=h.libSettings().lazy;return"object"==typeof(r="function"==typeof r?r(s,i,n,h.libSettings()):r)?(r.distance&&(a=r.distance),r.duration&&r.duration):"number"==typeof r&&(a=r),r&&(m.log("Requiring lazy: ",n,"distance=",a),s.set("lock.lazy",1),r=h.libSettings().lazy_measurement_filter,m.dom(n,a,0,function(){m.logl("wf",R,"unit triggered lazy load",s.alias,s.get("dom_id")),s.set("lock.lazy",!1),j?AdBridg.serve():AdBridg.display(n)},r,h.libSettings().lazy_compatible_collapse)),w.push(s),m.log(R,"Defined slot: ",e,n,o),v.trigger("gpt.define",s,i,e,t,n),h.libSettings().allow_serve_from_display&&E[n]&&(m.logl("wf",R,"triggering serve from define after display",n),AdBridg.serve()),j||(t="function"==typeof(t=h.libSettings().nonsra_poll)?t():t)&&(m.log("Nonsra poll for DOM ids"),H(n)),i}),window.AdBridg.defineOutOfPageSlot=m.wrapAsync(function(e,t){var n=AdBridg.gpt.defineOutOfPageSlot(e,t);if(!n)return n;n.addService(AdBridg.gpt.pubads()),Y(n);var i=new u({dom_id:t,gpt_slot:n,gpt_sizes:""});return w.push(i),m.log(R,"Defined OOP slot: ",e,t),v.trigger("gpt.define",i,n,e,!1,t),h.libSettings().allow_serve_from_display&&E[t]&&(m.logl("wf",R,"triggering serve from defineOOP after display",t),AdBridg.serve()),n});var W={},H=function(t){W[t]=W[t]||{ct:0,tx:-1};var n=W[t];clearTimeout(n.tx),10!==n.ct?(n.ct+=1,n.tx=setTimeout(m.wrapAsync(function(){if(!E[t]){var e=!!document.getElementById(t);if(m.log("Nonsra display poll #"+n.ct+": ",t,"; display received =",!!E[t],"; dom exists =",e),e)return m.log("Nonsra issuing display from poll",t),void AdBridg.display(t);H(t)}}),1e3)):m.log("Nonsra display poll is giving up on",t)};window.AdBridg.display=m.wrapAsync(function(e,t,n){if(n?(AdBridg.defineSlot(e,t,n),AdBridg.serve()):n=e,E[n]=!0,m.logl("wf",R,"display received",n),h.libSettings().allow_serve_from_display&&w.length&&(m.logl("wf",R,"triggering serve from display",n),AdBridg.serve()),T=!0,!j){w.length&&(x=x.concat(w),w=[]);for(var i=x.length-1;0<=i;--i){var r,o=x[i].get("dom_id");E[o]&&((r=x.splice(i,1)[0]).get("gpt_sizes")?w.push(r):m.logl("Ignoring display for unit with no sizes",o))}return w.length?(m.logl("wf",R,"nonsra issuing serve",w.length),void ie(function(i,r){be("dn",function(){i?i.eachUnit(function(e){m.logl("wf",R,"display resolved",e.get("dom_id"),"auction=",i),AdBridg.gpt.display(e.get("dom_id")),v.trigger("gpt.request_nosra",e.get("dom_id"))}):(m.logl("wf",R,"display resolved",r," as passthrough"),AdBridg.gpt.display(r),v.trigger("gpt.request_nosra",r));var e=x.length;if(e){m.logl("wf",R,"nonsra units queued: ",e);for(var t=e-1;0<=t;--t){var n=x[t].get("dom_id");if(E[n]){setTimeout(function(){AdBridg.display(n)},0);break}}}})})):void m.logl("wf",R,"nonsra display waiting on definition/serve")}be("ds",function(){te(),m.logl("wf",R,"display resolved",n),AdBridg.gpt.display(n)}),P()}),window.AdBridg.refresh=m.wrapAsync(function(e,t,n){if(e=e||AdBridg.gpt.pubads().getSlots(),h.libSettings().allow_serve_from_refresh&&w.length){for(var i=e.length-1;0<=i;i--)for(var r=w.length-1;0<=r;r--)e[i]===w[r].get("gpt_slot")&&e.splice(i,1);if(AdBridg.serve(),!e.length)return}var o,a,s,d,c;v.trigger("gpt.filter_refresh",e,t),e.length&&(o=e.length,e=V("RF",e,!0),m.logl("wf",R,"refresh: ",o,"slots requested; ",o-e.length,"filtered out;",e.length,"remaining."),e.length?(a=new l,!(s=!0)!==n&&"no_auction"!==h.libSettings().refresh||(s=!1),d=[],c=[],m.each(e,function(e){try{N(e)}catch(e){return m.err("Failed to clear slot: ",e)}var t=e.getSlotElementId();Y(e);var n,i,r=S[t]||"";I[t]&&(i=(n=I[t].adb||I[t].gpt)&&"0x0"!==n&&n.match(/^\d{2,}x\d{2,}\d/),m.logl("sz","Refresh size restriction for",t,"=",n,"; is_valid=",i),i&&(r=n));t=new u({dom_id:t,gpt_slot:e,gpt_sizes:r,is_refresh:!0,imp_ctr:(F[t]||0)+1});s&&(h.configureUnit(t),m.logl("sz","Refresh restricting sizes to ",r),t.restrictSizesTo(r.split(","))),t.hasBidReqConf()?a.addUnit(t):(c.push(e.getAdUnitPath()+" / "+e.getSlotElementId()),d.push(e))}),d.length&&(m.log("Refreshing",d.length,"non-bid units: ",c),be("rn",function(){te(),D(d),m.log(R,"GPT RF Batch: ",d.length);var e=h.libSettings("gpt_refresh_options",t);e&&(t=e),v.trigger("gpt.before_request",d,t,!0),m.mock()?(e=Math.floor(1900*Math.random())+100,m.logl("mock","bypass gpt-pt-rf",e),setTimeout(p(d),e)):AdBridg.gpt.pubads().refresh(d,t),v.trigger("gpt.request_passthrough",d,!0)})),a.hasUnit()&&(z.push(a),a.execute(O(null,t,!0)))):o&&m.err("RF units cancelled"))});var $={},e=m.wrapAsync(function(e){var t=String(e.message||e.data);if("string"==typeof e.data)try{var n=JSON.parse(e.data);if("Prebid Request"===n.message)return void AdBridg.render({safeframe:!0,source:e.source,origin:e.origin,pbuc:!0},n.adId)}catch(e){}var i=t.substr(0,9),t=t.substr(10);if("adbsrverr"===i)return m.err("Safeframe error: ",t);if("adbsrvlog"===i)return m.log("Safeframe: ",t);if("adbvidend"===i)return v.trigger("bid.outstream_end",t);if("adbductag"!==i)return"adbconfbl"===i?v.trigger("adb.confiant_block_sf",t):"adbsrvreq"===i?$.hasOwnProperty(t)?m.err("SafeframeDupe:",t):void AdBridg.render({safeframe:!0,source:e.source},t):void 0;i=JSON.stringify((t=ae(i=t),i={},t&&(t=t.pbjsBid.adserverTargeting,i.targetingMap=t,i.hbPb=t.hb_pb,i.size=t.hb_size),i));e.source.postMessage("adbductape:"+i,e.origin)});window.addEventListener?window.addEventListener("message",e,!1):document.attachEvent&&window.attachEvent("onmessage",e);function X(e,t,n){return e?(e=e.replace(/\$\{AUCTION_PRICE\}/g,t),n&&n.clickThrough?e.replace(/\$\{CLICKTHROUGH\}/g,n.clickThrough):e):""}window.AdBridg.render=m.wrapAsync(function(t,e,n){var i=C[e],r=!1;if(i||(r=!0,i=ae(e))){r?m.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," [override] creative from ",i.config.bidder_name," BR ",i.config.id):(c=i._origin?"(pooled bid from "+i._origin.config.unit.unique_id+")":"",m.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," creative from ",i.config.bidder_name,c," BR ",i.config.id));var o=i.config.unit.get("dom_id"),a=m.dom_invisible(o);J("AR",o,i.config.bidder_id),a&&m.log("AdBridg render detected invisible container at time of render:",o,a);var s={config:i.config.unit.alias,bidder:i.config.bidder_name,size:i.width+"x"+i.height,extras:i.extras,dom_id:o};r&&(s.override=1);var d=JSON.stringify(s);i.creative=X(i.creative,i.cpm,n),i.creative_url=X(i.creative_url,i.cpm,n),i.config.unit.bidRendered(i,s);var c=0,a=n&&n.pbuc;if(t.pbuc)i.creative&&(i.creative="\x3c!-- AdBridg Delivery PBUC (SF): "+d+" --\x3e"+i.creative),t.source.postMessage(JSON.stringify({message:"Prebid Response",ad:i.creative,adUrl:i.creative_url,adId:e,width:i.width,height:i.height}),t.origin),c=1;else if(t.safeframe&&t.source&&t.source.postMessage){var u=h.libSettings().pmmutatefn;if(!i.creative)return m.err("AD1245F Safeframe render fail: no creative");var l={ad:"\x3c!-- AdBridg Delivery (SF): "+d+" --\x3e"+i.creative},p=JSON.stringify(l);"function"==typeof u?l=u(i,l):v.trigger("adb.confiant_pmmutate",i,l);c=JSON.stringify(l)!==p?2:3;t.source.postMessage("adbsrvad:"+JSON.stringify(l),"*")}else if(i.creative){n=h.libSettings().pubrenderfn,u="pubrenderfn",p={};v.trigger("adb.get_ff_renderer",p);l=Object.keys(p);l.length&&(n?m.log("Module renderers ignored; dbmock pubrenderfn set"):(u=l[0],1<l.length&&m.err("More than one module provided renderer; using",u,"of",JSON.stringify(l)),n=p[u]));p=!1;"function"==typeof n&&(t.write("\x3c!-- AdBridg Delivery (ER="+u+"): "+d+" --\x3e"),n(t,i.creative,i.config.bidder_name,i.width,i.height,i,a)?(p=!0,m.log("Creative rendered externally"),c=a?"B":4):m.log("External render skipped")),p||(t.write("\x3c!-- AdBridg Delivery: "+d+" --\x3e"),t.write(i.creative),t.close(),c=a?8:5)}else if(i.creative_url)try{var g=m.iiframe();g.width=i.width,g.height=i.height,g.style.display="inline",g.style.overflow="hidden",g.src=i.creative_url,t.body.appendChild(document.createComment("AdBridg Delivery: "+d)),t.body.appendChild(g),c=a?9:6}catch(e){return m.err("AD1245F Delivery failure from ",i.config.bidder_name," / ",i.config.bidder_unit_id,e)}else{if("function"!=typeof i.render)return m.err("AD1245F No creative from ",i.config.bidder_name," / ",i.config.bidder_unit_id);i.rawbid.adUnitCode=document.getElementById(o).children[0].id,document.getElementById(i.rawbid.adUnitCode).innerHTML="";try{i.render(),m.rec("winner.render:"+i.id)}catch(e){return m.err("AD1245F Renderer",e)}c=a?"A":7}b.bidRendered(i,c,r);d=i.resize_pad_top||!1,a=document.getElementById(o);if(a.style.textAlign="center",(r=(c=a).getElementsByClassName("adbridg-dyn-pad")).length&&m.each(r,function(e){e.parent.removeChild(e)}),d&&((r=m.prepend(c,"span")).className="adbridg-dyn-pad",r.innerHTML="&nbsp;",r.style="display:block;width:1px;height:"+d+"px;overflow:hidden;",(r=document.createElement("span")).className="adbridg-dyn-pad",r.innerHTML="&nbsp;",r.style="display:block;width:1px;height:"+d+"px;overflow:hidden;",c.appendChild(r)),t.safeframe)try{var f=a.getElementsByTagName("iframe");m.each(f,function(e){e.contentWindow===t.source&&(m.logl("RS","RS SF element: ",e.id,i.width,i.height),m.resize_element(e,i.width,i.height),String(e.parentNode.id).match(/google_ads_iframe.*container/)&&(m.logl("RS","RS SF parent: ",e.parentNode.id,i.width,i.height),m.resize_element(e.parentNode,i.width,i.height)))})}catch(e){m.err("Frame resize fail: ",e)}else t.defaultView&&t.defaultView.frameElement&&(t.defaultView.frameElement.width=i.width,t.defaultView.frameElement.height=i.height),m.logl("RS","RS iframe: ",i.width,i.height),m.resize_iframe(window,t,i.width,i.height);h.libSettings().refresh_keep_size&&(I[o]||(I[o]={gpt:"",adb:""}),I[o].adb=s.size,m.log("SIZE REFRESH KEEPING ADB: ",o,I[o]));o=h.libSettings().post_render;"function"==typeof o&&o(i)}else m.err("AD1245F Render failed for ID ",e)}),window.AdBridg.getSizes=m.wrapAsync(function(e){var t=[];return m.each(e,function(e){t.push([e.viewport,e.sizes])}),Ie(t)});var Q=[],Z=(Z=m.qs("adb_restrict_size"))&&Z.split(",");window.AdBridg.sizeMapping=m.wrapAsync(function(){var e,r=[],o=AdBridg.gpt.sizeMapping(),a={addSize:m.wrapAsync(function(e,t){if(Z){for(var n=t.length-1;0<=n;--n){var i=t[n].join("x");0<=Z.indexOf(i)&&(m.log("adb_restrict_size - Size ignored",i),t.splice(n,1))}if(!t.length)return a}return o.addSize(e,t),r.push([e,t]),a}),build:m.wrapAsync(function(){return e=o.build(),Q.push({gpt_map:e,sizes:r}),e})};return a}),window.AdBridg.useSizeMapping=m.wrapAsync(function(e,t,n){var i,r=!1,o=e.getSlotElementId(),a=e.getAdUnitPath();for(e.defineSizeMapping(t),i=Q.length-1;0<=i;--i)if(Q[i].gpt_map===t){r=Q[i].sizes;break}if(r){var s=Ie(r),d=K(s,a,o),s=d.join(",");S[o]=s;var c=n||!1;if(!c)for(i=w.length-1;0<=i;--i)if(w[i].get("gpt_slot")===e){c=w[i];break}if(!c)return m.err("No unit for size map: ",a,o);c.set("gpt_sizes",s),c.restrictSizesTo(d),S[o]?m.log("Applied size mapping to ",o," / ",a,": ",s):(A[o]=1,m.log("Excluding unit ",o," / ",a," because it has no valid sizes"))}else m.err("Size mapping not found: ",a,o)}),window.AdBridg.resetInternals=function(){};var ee=!(window.AdBridg.destroySlots=function(e){e=e||AdBridg.gpt.pubads().getSlots();var n=[];return m.each(e,function(e){var t;e&&(t=e.getSlotElementId(),delete F[t],delete S[t],delete I[t],delete A[t],delete G[t],delete E[t],m.undom(t),v.trigger("gpt.destroy",e,t),n.push(t))}),m.log("Destroyed slots: ",n),AdBridg.gpt.destroySlots(e)}),te=function(){var e;ee||(ee=!0,"function"==typeof(e=h.libSettings().before_gpt)&&m.wrapAsync(e)(),v.trigger("gpt.before_enable_services"),AdBridg.gpt.enableServices(),v.trigger("gpt.after_enable_services"))},ne=!1,ie=m.wrapAsync(function(e){m.logl("wf",R,"serve called with",w.length,"pending units");var t=!1;te();for(var n=!1,i=0;w.length>i;){var r=w.shift(),o=r.get("lock.lazy"),a=r.get("lock.batch");if(o||a)m.logl("wf",R,"serve skipped ("+(o?"lazy":"batch")+")",r.alias,r.get("dom_id")),i+=1,w.push(r);else{o=r.get("dom_id");if(A[o]||!J("AS",o))if(h.configureUnit(r),r.hasBidReqConf()){if(f){var s=y.indexOf(r.id);if(0<=s){var d=!1;if(f.eachUnit(function(e){var t,n,i;e.id===r.id&&(d=!0,y.splice(s,1),m.log("Proxy into preload ",r.alias),t=r.get("gpt_slot"),n=r.get("dom_id"),i=S[n]||r.get("gpt_sizes")||"",e.set({dom_id:n,gpt_slot:t,gpt_sizes:i}),e.restrictSizesTo(i.split(",")),v.trigger("unit.pre_attach",e))}),d){n=!0;continue}}}(t=t||new l).addUnit(r)}else j?k.push(r.get("gpt_slot")):(D([r.get("gpt_slot")]),m.thread(e)(!1,r.get("dom_id")));else m.err("Slot rejected before auction, element hidden:",o)}}(t||f)&&h.libSettings().gpt_keep_oop&&k.length&&(m.log("Batching passthrough units with auction units"),B=B.concat(k),k=[]),t&&(z.push(t),t.execute(O(e)),t=!1),n&&!ne&&(ne=!0,we(O())),P()}),re=!1;window.AdBridg.serve=function(e){if(clearTimeout(re),j){m.logl("wf",R,"queuing serve");var t=h.libSettings().batch_delay;if(0===(t="function"==typeof t?t(w):t))return m.log("Starting auctions ASAP."),ie(e);t=t||100,re=setTimeout(function(){ie(e)},t)}else for(var n=w.length-1;0<=n;--n){var i=w[n].get("dom_id");if(E[i]){setTimeout(function(){AdBridg.display(i)},0);break}}};function oe(e){for(var t,n,i=z.length-1;0<=i&&!(t=(n=z[i]).findUnit(e));--i);return!!(t=!t&&f?(n=f).findUnit(e):t)&&{auction:n,unit:t}}var ae=function(e){for(var t=z.length-1;0<=t;--t){var n=z[t].getBid(e);if(n)return n}return!1},se=m.wrapAsync(function(t){var e=t.slot.getSlotElementId();!t.isEmpty&&J("RE",e)&&m.log("Slot rendered from GPT, but element hidden by CSS:",e);try{i=t.slot,m.log("Unlocked slot: ",i.getSlotElementId()),G[i.getSlotElementId()]=!1,N(i)}catch(e){m.err("Unlock failed")}var n=F[e];v.trigger("gpt.render_raw",t,n);var i=oe(function(e){return e.get("gpt_slot")===t.slot});if(h.libSettings().refresh_keep_size&&t.size&&2===t.size.length&&(I[e]||(I[e]={gpt:"",adb:""}),I[e].gpt=t.size.join("x")),i){if(!i.auction)return m.err("AUQ",t.slot.getAdUnitPath(),t.slot.getSlotElementId());AdBridg.gpt===window.googletag?b.gptRendered(i.auction,i.unit,t):b.enhRendered(i.auction.instancectr,i.unit.id,t),v.trigger("gpt.render",i.unit,t,n),m.qdusp()}else v.trigger("gpt.render_pt",!1,t,n)}),de=m.wrapAsync(function(e){v.trigger("gpt.loaded_raw",e)}),ce=m.wrapAsync(function(t){v.trigger("gpt.viewed_raw",t);var e=oe(function(e){return e.get("gpt_slot")===t.slot});if(e){b.gptViewed(e.auction,e.unit);try{var n=h.libSettings().post_view;"function"==typeof n&&n(t,e.unit)}catch(e){m.err("PostView fail",e)}v.trigger("gpt.viewed",t.slot,e.unit);e=t.slot.getSlotElementId();J("VE",e)&&m.log("Slot viewed from GPT, but element hidden by CSS:",e)}}),ue=[],le={},pe=!1;window.AdBridg.lock=function(e){if(le[e])return le[e]=null,m.log("-== GPT lock already cleared: ",e);m.log("-== GPT locked by: ",e),ue.push(e)},window.AdBridg.unlock=function(e,t){for(var n=!1,i=0;i<ue.length;++i)if(ue[i]===e){m.log("-== GPT lock cleared: ",e),ue.splice(i,1),n=!0;break}n||t||(le[e]=!0,m.log("-== GPT unrecognized lock cleared: ",e)),ve()};function ge(){AdBridg.cmd.unshift(function(){window.AdBridg.lock("window.focus"),ye<=99&&(ye+=1),b.meta("wb",ye)})}function fe(){AdBridg.cmd.push(function(){window.AdBridg.unlock("window.focus",!0),b.meta("wb",0)})}var me,he=[],be=function(e,t){he.push({n:e,f:m.wrapAsync(t)}),ve()},ve=function(){if(!ue.length&&!pe){for(pe=!0;he.length;)he.shift().f();setTimeout(function(){pe=!1,he.length&&ve()},0)}},ye=0;window.addEventListener?(window.addEventListener("blur",ge),window.addEventListener("focus",fe)):window.attachEvent&&(window.attachEvent("onblur",ge),window.attachEvent("onfocus",fe)),m.isdebug()&&(AdBridg.auctions=z,AdBridg.utils=m);var _e=m.wrapAsync(function(){clearTimeout(me);var e={delay:!1};if(v.trigger("adb.init_check",e),"number"!=typeof e.delay){v.trigger("adb.init"),AdBridg.gpt.pubads().addEventListener("slotRenderEnded",se),AdBridg.gpt.pubads().addEventListener("slotOnload",de),AdBridg.gpt.pubads().addEventListener("impressionViewable",ce),d=!0;var t=h.libSettings().initfn;for(t&&AdBridg.cmd.push(t);g.length;){var n=g.shift();AdBridg.cmd.push(n)}}else me=setTimeout(_e,e.delay)});window.AdBridg.lazy=function(e,t,n,i){"function"==typeof n&&(i=n,n=0),m.dom(e,t,n,i)},m.log("First execution."),h.afterConsent(function(e){if(!e||!e.gdprApplies||e.consentString){e=h.libSettings().preload&&h.libSettings().preload()||[];if(e.length){function t(n){function i(e){function t(e){2===e.length&&1<e[0]&&1<e[1]?n.push(e):m.err("Invalid preload size: ",e)}var n=[];return m.isarr(e)&&(m.isarr(e[0])?m.each(e,t):t(e)),n}var r=i(n.size||[]);return function(){var t,e=AdBridg.defineSlot(n.gpt_path,r,n.dom_id);m.isarr(n.size_map)&&(t=AdBridg.sizeMapping(),m.each(n.size_map,function(e){t.addSize(e.viewport,i(e.sizes))}),t=t.build(),e.defineSizeMapping(t),AdBridg.useSizeMapping(e,t)),AdBridg.serve()}}for(var n=AdBridg.cmd.length;0<=n;n--){var i=AdBridg.cmd[n];i&&i.gpt_path&&AdBridg.cmd.splice(n,1,t(i))}e&&e.length&&(f=new l,m.each(e,function(e){if(e=parseInt(e),m.log("Preloading",e),e){var t=new u;if(h.configureUnit(t,e),!t.hasBidReqConf())return m.err("Preload bad id",e);y.push(e),f.addUnit(t)}}),f.hasUnit()&&(m.log("Preload kickoff",f),f.execute(m.wrapAsync(function(e){m.log("Preload complete"),_&&_(e)}))))}}});var we=function(e){f.isDone()?e(f):_=e};h.afterConsent(function(){AdBridg.gpt.cmd.push(function(){m.log("Initializing. SRA is",(j?"enabled":"disabled")+"."),j&&(AdBridg.gpt.pubads().enableSingleRequest(),AdBridg.gpt.pubads().disableInitialLoad()),_e()})});function xe(){return z}m.wrapAsync(function(){for(b.init(),AdBridg.cmd.push=AdBridg.cmd.unshift=function(t){if(m.qs("adb_critfail"))throw new Error("Simulating critical failure");if("function"==typeof h.libSettings().cmd_override)try{var e=h.libSettings().cmd_override(t);if(!e)return void m.log("AdBridg command cancelled",t);t=e}catch(e){m.err("CmdOverrideFail",e)}var n,i;if("object"==typeof t&&((t=m.copy(t)).targeting&&(n=t.targeting,delete t.targeting,m.log("Publisher targeting set queued:",n),i=m.genID("gpt_targeting_"),AdBridg.lock(i),v.trigger("pub.set_targeting",n),AdBridg.gpt.cmd.push(function(){m.each(n,function(e,t){AdBridg.gpt.pubads().setTargeting(t,e)}),m.log("Publisher targeting set complete:",n),AdBridg.unlock(i)})),t.config&&(h.proc(t.config),delete t.config),!t.gpt_path&&t.events&&(m.each(t.events,function(e,t){v.on(t,e)}),delete t.events),t.action&&(m.log("Publisher event triggered: ","pub."+t.action),v.trigger("pub."+t.action),delete t.action),!Object.getOwnPropertyNames(t).length))return;if(d){if("object"==typeof t&&(t.gpt_path||t.length))try{m.log("Initialization command object processing:",t);function r(r){AdBridg.gpt.cmd.push(function(){var n,e;if(r.oop)n=AdBridg.defineOutOfPageSlot(r.gpt_path,r.dom_id);else if((n=AdBridg.defineSlot(r.gpt_path,r.size||[1,1],r.dom_id))&&r.size_map){for(var t=AdBridg.sizeMapping(),i=0;i<r.size_map.length;i++)t=t.addSize(r.size_map[i].viewport,r.size_map[i].sizes);t=t.build(),n.defineSizeMapping(t),AdBridg.useSizeMapping(n,t)}n&&r.targeting&&m.each(r.targeting,function(e,t){n.setTargeting(t,e)}),n&&r.events&&(r.events["gpt.defined"]&&r.events["gpt.defined"](n),(e=function(t,e){r.events[t]&&AdBridg.gpt.pubads().addEventListener(e,function(e){e.slot===n&&r.events[t](n,e)})})("gpt.rendered","slotRenderEnded"),e("gpt.viewed","impressionViewable"),e("gpt.visibilityChanged","slotVisibilityChanged")),n&&AdBridg.display(r.dom_id)})}if(t.length)for(var o=0;o<t.length;++o)r(t[o]);else r(t);t=function(){AdBridg.serve()}}catch(e){m.err("CmdObj fail",e)}"function"==typeof t&&setTimeout(function(){try{t.call()}catch(e){m.err("AdBridg.cmd had error: ",String(t).substr(0,30),e)}},0)}else g.push(t)};AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}r(xe)})()}}function Se(){}function Ie(e){var t=m.vp(),n=t.w,r=t.h,o=!1,a=[];for(i=e.length-1;0<=i;--i){var s=e[i][0];if(n>=s[0]&&r>=s[1]){if(o){if(o[0]>s[0])continue;if(o[0]===s[0]&&o[1]>s[1])continue}o=s,a=e[i][1]}}return a}},{"../analytics.js":10,"../auction.js":11,"../config.js":12,"../mockprebid.js":15,"../modules.js":16,"../unit.js":23,"../utils.js":24}],15:[function(e,t,n){var i=e("./utils");t.exports=function(a){for(window.pbjs.renderAd=function(e,t,n){i.log("PBJS renderAd override",t,n),(n=n||{}).pbuc=!0,window.AdBridg.render(e,t,n)},window.pbjs.que.push=AdBridg.cmd.push;window.pbjs.que.length;){var e=window.pbjs.que.shift();AdBridg.cmd.push(e)}window.pbjs.getBidResponses=function(){var t=[];return i.each(a(),function(e){t=t.concat(e.toPrebid().bidsReceived)}),t},window.pbjs.getAllWinningBids=function(){var t=[];return i.each(a(),function(e){t=t.concat(e.toPrebid().winningBids)}),t},window.pbjs.getAllPrebidWinningBids=function(){var t=[];return i.each(a(),function(e){t=t.concat(e.toPrebid().prebidWinningBids)}),t},window.pbjs.getAdserverTargeting=function(){var n={};return i.each(a(),function(e){i.each(e.toPrebid().prebidWinningBids,function(t){n[t.adUnitCode]={},i.assign(n[t.adUnitCode],t.adserverTargeting),i.each(Object.keys(t.adserverTargeting),function(e){n[t.adUnitCode][e+"_"+t.bidder]=t.adserverTargeting[e]})})}),n},window.pbjs.getBidResponsesForAdUnitCode=function(t){var n=[];return i.each(a(),function(e){i.each(e.toPrebid().bidsReceived,function(e){e.adUnitCode===t&&n.push(e)})}),n},window.pbjs.getHighestCpmBids=function(){var t=[];return i.each(a(),function(e){e=e.toPrebid().bidsReceived.reduce(function(e,t){return e.cpm===t.cpm?e.timeToRespond<t.timeToRespond?e:t:e.cpm<t.cpm?t:e});t.push(e)}),t},window.pbjs.findBidByAdId=function(e){for(var t=null,n=0;n<a().length;n+=1){for(var i=a()[n].toPrebid().bidsReceived,r=0;r<i.length;r+=1){var o=i[r];if(o.adId===e){t=o;break}}if(t)break}return t}}},{"./utils":24}],16:[function(l,e,t){function n(e){i.push(e)}var p=l("./utils.js"),i=[],r=["gpt.after_enable_services","consent.check_complete"],o={},a={},s={on:function(e,t){p.isarr(e)||(e=e.split(",")),p.each(e,function(e){o[e]?t(e):(a[e]||(a[e]=[]),a[e].push(t))})},trigger:null};s.trigger=t.trigger=p.wrapAsync(function(e){var t=arguments,n=(a[e]||[]).concat(a["*"]||[]);p.each(n,p.wrapAsync(function(e){e.apply(null,t)})),-1<r.indexOf(e)&&(o[e]=1)});var d=!1;p.onerr(p.wrapAsync(function(){return d?(console&&console.log("AdBridg nested module errors"),void p.pixel("https://adspsp.com/$CUSTOMER_PUBLIC_ID$/500/2/1/?e=errnest")):(d=!0,t.trigger("error",arguments),void(d=!1))})),t.on=p.wrapAsync(function(e,t){s.on(e,t)}),t.setup=function(e){0};try{n(new(l("./modules/dombuilder.js"))({elements:[{type:"container",active:{not_url:"gfycat.com/ifr/"},behaviour:{destroy:{pageview:!1}},id:"gfycat-1x1",script:{js:"AdBridg.cmd.push(function () {AdBridg.defineSlot('/21732935168/Gfycat_1x1', [1,1], 'gfycat-1x1')});"}},{type:"adhesion",active:function(){return!0},viewport:{max:728},behaviour:{destroy:{close_btn:{pageview:!1}}},id:"gfy-dt-adhesion-container-bottom",style:{bottom:"0px",height:"60px"},slot:{id:"gfy-dt-adhesion-slot-bottom",attributes:{"adbridg-ad-class":"gfy-m-adhesion-bottom"},style:{height:"50px",width:"320px",margin:"auto","text-align":"center",position:"relative",top:"5px","z-index":1}}}]},s)),n(new(l("./modules/amazon.js"))({allowed_sizes:["300x250","320x50","728x90"],load_apstag:!0,init:{pubID:"f3c5730e-7996-451b-a4d8-96a519cdb88a",adServer:"googletag",bidTimeout:2e3}},s)),n(new(l("./modules/emit.js"))({"gpt.render":function(e,r,t){var o,a,s,d,n,c,u=t.slot.getAdUnitPath();if(!u.match("gfycat_1x1")){if(11===r.id){var i="gfyEmpty11";if(t.isEmpty){if(AdBridg.global(i,(AdBridg.global(i)||0)+1),p.log("GfyAdhesion empty ctr: ",AdBridg.global(i)),1===r.get("imp_ctr"))return p.rec("GfyEx","A"),p.log("GfyAdhesion removed"),void l("./modules.js").trigger("dom.close","gfy-dt-adhesion-container-bottom");if(3<=AdBridg.global(i))return p.rec("GfyEx","B"),void p.log("GfyAdhesion stopping reload after 3 empties")}else AdBridg.global(i,0),p.log("GfyAdhesion reset empties to 0")}0!==t.advertiserId&&(o=function(e){return JSON.stringify(e,2)},a=r.get("dom_id"),s=t.slot,d=r.alias,u=t.slot.getAdUnitPath(),n=t.advertiserId+"."+t.creativeId+"."+t.sourceAgnosticCreativeId,p.log("Reload setup check in render event:",o({auction:d,dom_id:a,ad_unit_path:u,timeout:3e4})),c=!1,r.gfyReload=function(e){var i;c||(c=!0,p.log("Reload scheduled from ",e,":",o({auction:d,dom_id:a,ad_unit_path:u,timeout:3e4})),"AdBridg"==e&&p.err("Reload track no GPT view",o({auction:d,dom_id:a,ad_unit_path:u,timeout:3e4,creative:n})),10!==r.id||AdBridg.global("pbIdleSetup")||(AdBridg.global("pbIdleSetup",function(){AdBridg.global("pbIdle",p.dts())}),document.body.addEventListener("mousemove",AdBridg.global("pbIdleSetup"))),i=function(){if(10===r.id){var e=p.dts(),t=AdBridg.global("pbIdle");if(p.log("Reload playerbottom idle check",e,t,e-t),5<e-t){function n(){p.log("Reload playerbottom not idle"),i(),document.body.removeEventListener("mousemove",n)}return void document.body.addEventListener("mousemove",n)}}p.log("Reload queuing lazy load check:",o({auction:d,dom_id:a,ad_unit_path:u,timeout:3e4})),p.dom(a,1,0,function(){p.log("Reload executing:",o({auction:d,dom_id:a,ad_unit_path:u,timeout:3e4})),AdBridg.refresh([s])})},setTimeout(i,3e4))},p.dom(a,.5,1e3,function(){c||(p.log("Reload AdBridg view event; triggering 3sec extra: ",o({auction:d,dom_id:a,ad_unit_path:u})),setTimeout(function(){r.gfyReload&&r.gfyReload("AdBridg")},3e3))}))}}},s)),n(new(l("./modules/gamconfig.js"))({active:1,autostart:0,safeFrames:1,slots:[{dom_ad_class:"gfy-dt-sharepage-side",gpt_path:"/21732935168/gfycat_desktop",size:[[300,250]]},{dom_ad_class:"gfy-dt-sharepage-top",gpt_path:"/21732935168/Gfycat_Desktop_728x90",size:[[728,90]]},{dom_ad_class:"gfy-dt-feed-top",gpt_path:"/21732935168/Newpages_ABF",size:[[728,90]]},{dom_ad_class:"gfy-dt-feed-side",gpt_path:"/21732935168/Category_page",size:[[300,250]]},{dom_ad_class:"gfy-m-feed-top",gpt_path:"/21732935168/Gfycat_MobileSearch_320x50",size:[[320,50]]},{dom_ad_class:"gfy-dt-discover-top",gpt_path:"/21732935168/Gfycat_Discover_728x90",size:[[728,90]]},{dom_ad_class:"gfy-m-discover-top",gpt_path:"/21732935168/Gfycat_Discover_320x50",size:[[320,50]]},{dom_ad_class:"gfy-player-bottom",gpt_path:"/21732935168/Gfycat_PlayerBottom_320x50",size:[[320,50]]},{dom_ad_class:"gfy-m-adhesion-bottom",gpt_path:"/21732935168/Gfycat_Mobile_AdhesionBottom_320x50",size:[[320,50]]},{dom_ad_class:"gfy-m-sharepage",gpt_path:"/21732935168/Gfycat_Mobile_320x50",size:[[320,50]]}]},s))}catch(e){p.err("Module failed",e)}},{"./modules.js":16,"./modules/amazon.js":17,"./modules/dombuilder.js":18,"./modules/emit.js":19,"./modules/gamconfig.js":20,"./utils.js":24}],17:[function(b,e,t){var v=b("../utils.js"),o=b("../config.js"),i=(e.exports=function(c,u){function l(e){var n=[],i=c.allowed_sizes;return v.each(e,function(e,t){if(i&&-1==i.indexOf(e))return v.log("Amazon unsupported size: ",e);e=e.split("x");e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10),n.push(e)}),n}var p={},g={},a={},f=!1,r=!v.qs("adb_enable_amzn")&&c.test;"function"==typeof r&&(r=r());var e=c.load_apstag;"function"==typeof e&&(e=e());var t=!1,n=!1,m=!1;if("function"==typeof o.libSettings().nogpt&&o.libSettings().nogpt()||v.qs("adb_nogpt"))return v.log("nogpt Disabling Amazon"),void(r=n=!(e=!1));function h(){if(t)return r;var i=c.init;return(i="function"==typeof i?i(o.libSettings()):i)?(t=!0,r?(v.log("Amazon disabled. Use ?adb_enable_amzn=1 to activate."),r):window.apstag?void(i.skip_init||o.afterConsent(function(e,t){var n=e&&e.gdprApplies;if(n&&(i.params=i.params||{},i.params.gdpr={enabled:!0,consent:e.consentString||""},c.no_eu))return r=!0,void v.log("Amazon disabled for EU",e.consentString);n=t&&t.uspString,e=n&&"1---"===t.uspString;if(n&&(!e||!c.skip_ccpa_default)&&(i.params=i.params||{},i.params.us_privacy=t.uspString,"Y"===t.uspString.substr(2,1)&&(f=!0,c.no_ca)))return r=!0,void v.log("Amazon disabled for CA",t.uspString);apstag.init(i),v.log("Amazon initialized:",i)})):(e||n||(v.err("Amazon library not found."),n=!0),r=!0)):(v.log("Amazon init bypassed."),!1)}r||!e||i()||(r=t=!0),u.on("unit.config",function(e,t){if(!h()){var n=t.get("dom_id"),i=t.get("gpt_slot");if(!n||!i)return v.log("Amazon skip",n,i);var r=i.getAdUnitPath()+"",i=c.get_slot_name?c.get_slot_name(r,n,i,t):(r.match(/([^\/]+)$/)||[""])[0];if(!i)return v.err("Amazon noname: ",i,n,r);i={slotID:n,slotName:i,sizes:g[n]||l(t.all_sizes)};if(c.use_pubcid&&window.PublisherCommonId&&window.PublisherCommonId.getId&&(t=window.PublisherCommonId.getId(),i.slotParams={"pubcid.org":[t]}),p[n]=i,v.log("Amazon slot configured",i,!!g[n]),c.pub_audiences&&!m){m=!0;function o(e){a=e,v.thread(function(){b("../analytics.js").meta("iA",a)})()}var a,s,n=c.pub_audiences,d=!1;if(u.on("gamkvp.getids",function(e,t){s&&!d&&(d=!0,t.push("iA"+s),v.log("Amazon Pub Audience gamkvp.getids",s))}),n.active&&!n.active())return v.log("Amazon PA: inactive"),s="n",void o("N");v.log("Amazon PA: active");n=n.record();if(!n)return v.log("Amazon PA: no email record"),s="n",void o("Z");n={hashedRecords:[{type:n.type,record:n.value}],optOut:f};apstag.rpa(n,v.wrapAsync(function(){o(f?"X":"Y"),s="y",v.log("Amazon PA: completed")}))}}}),u.on("unit.restrict_sizes",function(e,t,n){h()||(t=t.get("dom_id"),n=l(n),g[t]=n,(t=p[t])&&(v.log("Amazon slot resize",t,n),t.sizes=n))}),u.on("gpt.destroy",function(e,t,n){h()||(v.log("Amazon slot remove",n),delete p[n],delete g[n])}),u.on("unit.pre_attach",function(e,t){if(!h()){var n=t.get("dom_id"),i=p[n];if(!i)return v.log("Amazon preload mismatch",n);var r=t.auction,o="amazon."+t.id;r.lock(o),apstag.fetchBids({slots:[i],timeout:r.max_ms},v.wrapAsync(function(){v.log("Amazon preload response",r.id,arguments);try{apstag.setDisplayBids()}catch(e){v.err("Amazon setBids",e)}r.unlock(o)}))}}),u.on("auction.start",function(e,t){var n,i,r,o;h()||(n=[],t.eachUnit(function(e){var t=e.get("dom_id"),e=p[t];e?(n.push(e),p[t]=null):v.log("Amazon no config",t)}),n.length&&(i={slots:n,timeout:t.max_ms},v.log("Amazon request",t.id,i),r="amazon."+t.id,a[r]=!0,t.lock(r),o=setTimeout(v.wrapAsync(function(){a[r]&&(a[r]=!1,t.unlock(r),v.err("Amazon incomplete at 50"))}),t.max_ms+50),apstag.fetchBids(i,v.wrapAsync(function(){v.log("Amazon response",t.id,arguments);try{apstag.setDisplayBids()}catch(e){v.err("Amazon setBids",e)}clearTimeout(o),a[r]&&(a[r]=!1,t.unlock(r))}))))})},function(){if(window.apstag)return v.log("Amazon already loaded"),!0;v.log("Loading Amazon dependency");try{n="apstag",i=window,t=document,i[n]||(i[n]={init:function(){e("i",arguments)},fetchBids:function(){e("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},dpa:function(){e("di",arguments)},rpa:function(){e("ri",arguments)},upa:function(){e("ui",arguments)},_Q:[]},(r=t.createElement("script")).async=!0,r.src="https://c.amazon-adsystem.com/aax2/apstag.js",(o=t.getElementsByTagName("script")[0]).parentNode.insertBefore(r,o))}catch(e){return v.err("Amazon load failed",e),!1}function e(e,t){i[n]._Q.push([e,t])}var n,i,t,r,o;return!0})},{"../analytics.js":10,"../config.js":12,"../utils.js":24}],18:[function(e,t,n){var x=e("../utils.js");t.exports=function(t,o){var a={},s={},l="adb_bottom_pixel";o.on("pub.spa_pv_initialize",function(){w()}),o.on("dom.close",function(e,t){t=a[t];t&&t.close_btn_id&&(t.behaviour.destroy.close_btn.pageview||(s[t.id]=t),f(t))});function m(e,t){return t=t||[],"function"==typeof e?e.apply(null,t):e}var h=function(e){var t=e;if(!0===t)return t;if(t)if("function"==typeof e)t=t&&t();else if(t.js)t=function(e){var t=e.js.split(".");if("window"===t[0]){t=t[1];return window.hasOwnProperty(t)?window[t]:void 0}x.log("GamConfig JS read fail",e)}(t);else if(t.qs)t=t&&x.qs(t.qs);else if(e.url)t=t&&x.url().href.match(new RegExp(e.url,"i"));else{if(!e.noturl)return!1;t=t&&!x.url().href.match(new RegExp(e.noturl,"i"))}return t},n=function(e){var t=!1,n=!1;if(e.min&&(t="function"==typeof e.min?e.min():e.min),e.max&&(n="function"==typeof e.max?e.max():e.max),!t&&!n)return!1;e=x.vp().w;return!!(t&&n&&t<e&&e<n)||(!n&&t<e||!t&&e<n)},i=function(){x.log("Injecting pixel at bottom of page");var e=document.getElementsByTagName("body")[0],t=document.createElement("div");t.id=l,t.style.width=t.style.height="1px",e.appendChild(t)},p=!1,b=!1,v=!1,_=function(d){d=x.deepMerge({sidebar:{attributes:{class:"adb-sidebar"},style:{position:"absolute",top:0,"text-align":"center","z-index":5,margin:"0 auto 19"}},container:{style:{"margin-bottom":"10px"}},ad:{style:{position:"sticky",top:"10px"}}},d),x.log("DomBuilderSidebar element",d),d.css_templates&&d.css_templates.length&&d.css_templates.forEach(function(e){h(e.active)&&x.deepAssign(d,e)});try{var e=document.getElementsByClassName(d.sidebar.attributes.class);if(e.length)return x.each(e,function(e){x.log("DomBuilderSidebar removing existing"),e.parentNode&&e.parentNode.removeChild(e)}),void window.requestAnimationFrame(function(){x.log("DomBuilderSidebar reentry after removal"),_(d)})}catch(e){}x.log("DomBuilderSidebar building");var c,u,i,l,p,g,f,t=d.target&&d.target.insertInto?m(d.target.insertInto):"body",e=document.querySelector(t);e?(c=y(d.sidebar),v=c,u=[],p=l=i=0,g=x.wrapAsync(function(){var e=x.where(c);p=e.c.vp.h;var t=e.c.vp.y+e.c.t,n=p;d.dock_threshold&&(d.dock_threshold.bottom_el?(e=document.querySelector(d.dock_threshold.bottom_el))?(sidebarOffsetWhere=x.where(e),n=sidebarOffsetWhere.c.vp.y+sidebarOffsetWhere.c.t,x.log('DomBuilderSidebar bottom set to top of "'+d.dock_threshold.bottom_el+'": '+n+"px")):x.log("DomBuilderSidebar bottom not found!",d.dock_threshold.bottom_el):d.dock_threshold.bottom&&(n-=d.dock_threshold.bottom)),i=l,(l=Math.floor(n-t))<i?x.err("SidebarAreaShrunk"):c.style.height=l+"px"}),f=function(e){if(!e||!u.length||v!==c)return 0;var t=m(d.final_ad_gets_extra_height,[e]);if(x.log("DomBuilderS should add height?",t),!t)return 0;var n=u[u.length-1].parentNode,i=parseInt(String(n.style.height).replace("px","")),t=i+e;return n.style.height=t+"px",x.log("DomBuilderSidebar added remaining height to final ad",{was:i,add:e,now:t}),e},x.log("DomBuilderSidebar sidebar injecting: ",d),e.appendChild(c),t=x.wrapAsync(function(){if(x.log("DomBuilderSidebar initializing",d),c.parentNode&&v===c){g();var e=Math.floor(l/p),n=!0,i=1.5*p;d.min_container_height&&(i=d.min_container_height(l,p,e,n));var r=d.max_ads||5;"function"==typeof r&&(r=r(l,e));var o=i,t=Math.floor(l/i);-1<r&&r<t&&(t=r,o=Math.floor(l/t));for(var a=0,s=x.wrapAsync(function(){if(v===c){g();var e=l-a;if(!n){if(-1<r&&u.length>=r)return x.log("DomBuilderSidebar not injecting - max ads reached",e),void(a+=f(e));var t=Math.floor(e/p);if((i=d.min_container_height(e,p,t,n))<o&&(i=o),e<o)return x.log("DomBuilderSidebar not injecting - not enough room",{avail:e,needs:i}),void(a+=f(e));o=i}t=y(d.container),e=parseInt(String(x.deepAccess(d.container,"style.margin-bottom","0")).replace("px",""));t.style.height=o-e+"px",m(d.enable_debug)&&(t.style.background="rgb(240, 170, 0)"),c.appendChild(t);e=y(d.ad);m(d.enable_debug)&&(e.style.background="rgb(0, 240, 170)"),t.appendChild(e),u.push(e),a+=Math.max(o,x.where(t).c.h),x.log("DomBuilderSidebar inject",{n:u.length,max_ads:r,view:p,sidebar:l,min_container:i,actual_container:o,remaining:l-a})}else x.err("SidebarInjectExpired")});u.length<t;)s();n=!1,x.dombuilder_injectNextSlot=s,b=function(e){c===v&&0<=u.indexOf(e)&&x.dom(e,.5,0,function(){c===v&&(x.log("DomBuilderSidebar ad "+e.id+" in view, adding next"),s())})}}else x.err("SidebarRemovedBeforeInit")}),(e=m(d.defer_build))?(x.log("DomBuilderSidebar will init after",e,"ms"),setTimeout(t,e)):window.requestAnimationFrame(t)):d.target&&d.target.ifNotFound&&(x.log("DomBuilderSidebar insert not found; calling ifNotFound"),d.target.ifNotFound(x.wrapAsync(function(){x.log("DomBuilderSidebar retrying build"),_(d)})))},r=function(e){var t,r=(t=e,Object.keys(t).map(function(e){return[e,m(t[e])]}).reduce(function(e,t){return e[t[0]]=t[1],e},{})),n=[],i="adb-sidebar",o=document.getElementById(l)||{},y=[];try{var a=document.getElementsByClassName(i);a.length&&x.each(a,function(e){e.remove()})}catch(e){}x.log("Building sidebar");var s,d,c=e.target&&e.target.insertInto?"function"==typeof e.target.insertInto?e.target.insertInto():e.target.insertInto:"body",u=document.querySelector(c),a=document.createElement("div");u?(r.css_templates&&r.css_templates.length&&r.css_templates.forEach(function(e){h(e.active)&&(r.style=x.assign(r.style,e.style||{}),r.slot.style=x.assign(r.slot.style,(e.slot||{}).style||{}))}),a.classList.add(i),c={position:"absolute",top:0,"text-align":"center","z-index":5,margin:"0 auto"},r.no_sidebar_default&&(c={}),a.style=g(x.assign(c,r.style)),c=Number.parseInt(a.style.top.replace("px","")||"0"),a.style.height=u.offsetHeight-c+"px",u.appendChild(a),(s=[].slice.apply(document.querySelectorAll("."+i))).forEach(function g(f){x.log("Injecting sticky sidebar: ",r);var t=Number.parseInt(f.style.top.replace("px","")||"0"),m=r.dock_threshold?r.dock_threshold.bottom||r.dock_threshold.top:.01;x.dom(l,m,0,function(){f.style.height=(o.offsetTop||0)-t-m+"px"});r.timeout;var h=r.max_ads||5,b=document.createElement("div"),v=document.createElement("div");"function"==typeof h&&(h=h()),v.style.position=b.style.position="sticky",v.style.paddingBottom=r.slot&&(r.slot.style||{})["padding-bottom"]||"10px",r.enable_debug&&(v.style.background="rgb(240, 170, 0)"),Object.keys(r.style||{}).forEach(function(e){b.style[e]=r.slot.style[e]}),v.style.top=r.slot.style.top||0,Object.keys(r.attributes||{}).forEach(function(e){b.setAttribute(e,r.attributes[e])}),r.clearContent&&-1===n.indexOf(f)&&(f.innerHTML="",n.push(f)),v.appendChild(b),f.appendChild(v),x.log("Injected sticky element",v),"function"==typeof r.postInject&&r.postInject(b);x.dombuilder_injectNextSlot=function(e){f.style.height=(o.offsetTop||0)-t-m+"px";var l=e.getSlotElementId(),p=e.getAdUnitPath();l===b.id&&(-1===h||y.length<=h)&&(e=function(){x.log("Scheduling next sidebar injection :",(u={dom_id:b.id,ad_unit_path:p},JSON.stringify(u,2))),y.push(l);var e=x.vp().h,t=x.vp().y,n=f.clientHeight,i=t+x.where(f).c.t,r=0,o=i;x.each(f.children,function(e,t){r+=e.offsetHeight,t<f.children.length-1&&(o+=e.offsetHeight)});var a=1.5*e,s=n-r,d=o,c=Math.max(o,t)+a,u=c-d,a=0<h?Math.max(a,Math.floor(n/h)):a;x.log("Inject calculation",{maxAds:h,numAds:y.length,heightRemaining:s,viewportHeight:e,viewportY:t,parentTop:i,parentHeight:n,thisContainerBottom:c,thisContainerTop:d,containerHeight:u,minContainerHeight:a,willAddUnit:!(s-m<Math.max(a,u))}),a&&(u=Math.max(a,u)),s-m<u||(v.style["min-height"]=u+"px",v.style.position="unset",g(f))},r.skip_lazy?e():x.dom(b.id,.5,0,e))}}),d=!0,p=function(){d&&s&&s.length&&s.forEach(function(e){var t=x.vp().w,n="function"==typeof r.viewport.min?r.viewport.min():r.viewport.min,i="function"==typeof r.viewport.max?r.viewport.max():r.viewport.max;e&&(t<n||i<t)&&(u.removeChild(e),d=!1)})}):e.target&&e.target.ifNotFound&&(x.log("Sidebar insert not found; calling ifNotFound"),e.target.ifNotFound(x.wrapAsync(function(){x.log("Retrying sidebar build"),_(e)})))};window.addEventListener("resize",function(){p&&p()}),o.on("adb.gamconfig_slot_configure",function(e,t,n,i){b&&b(i)});var d=function(r){var e={};if(r.target.rangeWithin){var t=document.querySelector(r.target.rangeWithin);if(!t)return void x.log("DomBuilder InContent inactive: range element not found",r.id,r.target.rangeWithin);e.within=t;var n=x.where(t),t=n.c.t,o=n.c.b}else if(r.target.rangeStart&&r.target.rangeEnd){var n=document.querySelector(r.target.rangeStart),i=document.querySelector(r.target.rangeEnd);if(!n||!i)return void x.log("DomBuilder InContent inactive: range elements not found",r.id,r.target.rangeStart,r.target.rangeEnd);e.start=n,e.end=i;n=x.where(n),i=x.where(i);t=n.c.t,o=i.c.t}var a,s,d,c,u,l,i=document.querySelectorAll(r.target.insertAfter);i.length?(a=r.target.distanceStart||1,s=r.target.distanceBetween||1,d=r.target.distanceEnd||1,c=t,u=x.vp().h,l=[],x.each(i,function(e){var t=x.where(e),n=t.c.b-c,i=o-t.c.b,i=u*(l.length?s:a)<n&&u*d<i;(i=i&&r.target.qualifier?r.target.qualifier(e):i)&&(c=t.c.b,l.push(e))}),l.length?(x.log("DomBuilder InContent - injecting "+l.length+" targets for",r.id),x.each(l,function(e,t){var n=x.assign({},r);n.id+="_"+(t+1);n=y(n);e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n),x.log("DomBuilder InContent - injected",n),r.afterInsert&&r.afterInsert(n)})):x.log("DomBuilder InContent inactive: not enough room for targets",r.id,{vp:u,range:o-t,breakpoints:i.length})):x.log("DomBuilder InContent inactive: range breakpoints not found",r.id,r.target.insertAfter)},c=function(e){if(e.id&&!s[e.id]&&!a[e.id]){var t=x.assign({id:e.id,style:{height:"1px",width:"1px"}},e),t=y(t);if(e.target||(e.target={appendTo:"body"}),e.target.appendTo){var n,i="function"==typeof e.target.appendTo?e.target.insertBefore():e.target.appendTo;if(!(n=document.querySelector(i)))return void x.err("DomBuilderNoCTrgt1");n.appendChild(t)}else if(e.target.insertBefore){i="function"==typeof e.target.insertBefore?e.target.insertBefore():e.target.insertBefore;if(!(n=document.querySelector(i)))return void x.err("DomBuilderNoCTrgt2");n.parentNode.insertBefore(t,n)}x.log("Injected element",e),e.afterInsert&&e.afterInsert(t),e.script&&(n=document.createElement("script"),e.script.js&&(t=document.createTextNode(e.script.js),n.appendChild(t)),document.head.appendChild(n),x.log("Injected script for element",n)),a[e.id]=e}},u=function(t){x.log("Building adhesion unit: ",t);var n,e,i,r=0;s[t.id]||a[t.id]||x.cr(t.id)||t.id&&((n={id:t.id,style:{width:"100%",position:"fixed",background:"rgba(44,62,80,.6)","z-index":1e3,opacity:1,padding:0,bottom:0},slot:t.slot}).slot.style={margin:"auto","text-align":"center",position:"relative","z-index":1},t.css_templates&&t.css_templates.length&&t.css_templates.forEach(function(e){h(e.active)&&(t.active_css_template=e,n.style=x.assign(n.style,e.container||{}),n.slot.style=x.assign(n.slot.style,e.slot||{}),r=e.injected_default_height||0)}),t.attributes&&(n.attributes=t.attributes),e=y(n),n.slot.id||(n.slot.id=x.genID("adb-adhesion-slot-")),i=y(n.slot),e.appendChild(i),document.body.appendChild(e),t.behaviour.destroy.close_btn&&(i=function(e,t){var n={style:{"line-height":"19px","z-index":2,opacity:0,cursor:"pointer",background:"rgba(44,62,80,.6)",color:"rgb(255, 255, 255)","text-align":"center",position:"absolute",top:"-20px",right:"0px",width:"20px",height:"20px","border-radius":"5px 5px 0px 0px","font-weight":"bolder","font-family":"monospace"},id:x.genID("close-btn-")};if(e.close_btn_id=n.id,e.active_css_template&&e.active_css_template.close_btn)n.style=x.assign(n.style,e.active_css_template.close_btn||{});var i=y(n);return i.innerHTML="&#x2715;",i.addEventListener("click",function(){if(!e.behaviour.destroy.close_btn.pageview){s[e.id]=e;x.cw(e.id,true)}t();document.getElementById(e.id).removeEventListener("click",f);f(e)}),i}(t,function(){document.getElementById(l).style.height="1px"}),x.prepend(e,i),o.on("gpt.render_raw",function(e,t){var t=t.slot.getSlotElementId(),t=document.getElementById(t);t&&"none"!==t.style.display&&(t=t.parentNode,a[t.id]&&a[t.id].close_btn_id&&(document.getElementById(a[t.id].close_btn_id).style.opacity=1,t=document.getElementById(t.id).clientHeight||0,document.getElementById(l).style.height=Math.max(t,r)+"px"))})),x.log("Injected element",t),a[t.id]=t)},y=function(t){var e,n=document.createElement("div");return t.id&&(n.id=t.id),t.style&&(n.style=g(t.style)),t.attributes&&(e=Object.keys(t.attributes),x.each(e,function(e){x.log("setting attribute",e,t.attributes[e]),n.setAttribute(e,t.attributes[e])})),t.children&&x.each(t.children,function(e){n.appendChild(y(e))}),n},g=function(e){for(var t=Object.keys(e),n="",i=0;i<t.length;i++)n+=t[i]+":"+e[t[i]]+";";return n},f=function(t){try{document.getElementById(t.id).remove(),x.log("Unloaded div",t),delete a[t.id]}catch(e){x.log("Unknow div to unload",t)}},w=function(){var e;document&&document.body?(x.log("Body loaded. Initialising DomBuilder module"),!(e=t).elements||!x.isarr(e.elements)||e.elements.length<1?x.log("No dom builder elements "):(x.log("Dom Builder enabled",e),e=e.elements,x.each(e,function(e){if(h(e.active))if(!e.viewport||n(e.viewport))switch(x.log("Dom Builder: Element active for this page",e),i(),e.type){case"incontent":d(e);break;case"adhesion":u(e);break;case"container":c(e);break;case"sticky_sidebar":_(e);break;case"sticky_sidebar_old":r(e);break;default:x.log("Invalid position for div",e)}else x.log("Dom Builder: Element viewport threshold not met",e);else x.log("Dom Builder: Element not active for this page",e)}))):setTimeout(w,100)};t.initialize_immediately&&w()}},{"../utils.js":24}],19:[function(e,t,n){var i=e("../utils.js");t.exports=function(t,e){e.on("*",i.wrapAsync(function(e){t[e]&&t[e].apply(null,arguments)}))}},{"../utils.js":24}],20:[function(e,t,n){function U(e){var t=e.js.split(".");if("window"==t[0]){t=t[1];return window.hasOwnProperty(t)?window[t]:void 0}N.log("GamConfig JS read fail",e)}var N=e("../utils.js"),q=e("../config.js"),M=(e("../unit.js"),0),L={};t.exports=function(n,e){var E="adbridg-ad-class",T="data-adbridg-ad-class",k="data-adbridg-ad-class-loaded",B="data-adbridg-ad-class-invalid",C="data-adbridg-ad-class-ctr",z="data-adbridg-phase",R="adbridg_ad_",j="data-adbridg-gam-path",O="data-adbridg-page-kvps",P=[],D=0;e.on("pub.spa_pv_initialize",function(){D=1}),e.on("pub.config",function(e,t){t.targeting&&(n.targeting?N.deepAssign(n.targeting,t.targeting):n.targeting=t.targeting)});function t(f,m){var t,n,o,h,b,v,y,_,w,x,e,a,r,i,S,I,A,s,d,c,u,l,p,g=f.active;(g=g&&g.js?U(g):g)&&g.url&&(new RegExp(g.url,"i"),g=N.url().href.match(g.url)),g?(N.log("GamConfig enabled",f),f.pageType&&(t=[],(n=f.pageType)&&n.js&&(n=U(n)),N.each(f.slots,function(e){e.page_type===n&&t.push(e)}),N.log("GamConfig page type slots: ",{total_slots:f.slots.length,page_type_slots:t.length,slots:t}),f.slots=t),f.collapseEmptyDivs&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().collapseEmptyDivs()}),f.centering&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().setCentering(!0)}),f.safeFrames&&AdBridg.gpt.cmd.push(function(){N.log("Requiring GPT Sandbox SafeFrames"),AdBridg.gpt.pubads().setSafeFrameConfig({sandbox:!0})}),o={},h=function(e){AdBridg.cmd.push(function(){N.each(e,function(e,t){var n=e;void 0!==(e=(e=e&&e.js?U(e):e)&&e.qs?N.qs(e.qs.match)?e.qs.value:void 0:e)?(N.log("GamConfig setting page targeting: ",t,e),AdBridg.gpt.pubads().setTargeting(t,e),o[t]=e):N.log("GamConfig targeting empty",t,e,n)})})},m.on("pub.config",function(e,t){h(t.targeting)}),f.targeting&&h(f.targeting),b=function(e,t){var n=e.getAttribute(z)||"";n&&(n+=";");t=(n+t+"@"+N.dts()+"ms").substr(0,200);200==t.length&&(t+="..."),e.setAttribute(z,t)},(e=function(){v={},y={},_={},x=!(w={}),N.each(f.slots,function(t){if(!q.libSettings().gamconfig_filter||q.libSettings().gamconfig_filter(t)){if(t.dom_ad_class)return x=!0,void(w[t.dom_ad_class]=t);if(t.inject&&!document.getElementById(t.dom_id)){var e=document.createElement("div");e.id=t.dom_id;try{document.body.appendChild(e)}catch(e){N.err("GamConfig cannot inject",t.dom_id,e)}}e=t.dom_id;v[e]||y[e]?N.err("GamConfig duplicate dom_id",e):v[e]=t}else N.log("GamConfig slot skipped by pub",t)})})(),a=function(e,t){if(v[e.id])return!0;var n,i=e.getAttribute&&(e.getAttribute(T)||e.getAttribute(E));if(w[i])return!0;if(n=(N.qs("adb_gcerr")?e.children:e.children||[]).length,t&&n)for(var r=0;r<n;++r)if(a(e.children[r],!0))return!0;return!1},r=function(){clearTimeout(S),S=setTimeout(function(){A()||c()},10)},i=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("attributes"==n.type)return a(n.target,!1)?r():void 0;for(var i=0;i<n.addedNodes.length;++i){n.addedNodes[i];if(a(n.target,!0))return r()}}},I=f.scan_interval||200,A=function(){clearTimeout(S);var u=!1;if(x)for(var u=!0,e=document.querySelectorAll("["+T+"],["+E+"]"),t=0;t<e.length;++t){var n,i,r,o,a,s=e[t],d=s.getAttribute(T)||s.getAttribute(E);d&&(!(o=q.libSettings("gamconfig_ad_class_mutate",d,s))&&!1!==o||(n=d,d=o),w[d]?(i=d.replace(/[^\w\d]+/gi,""),L[o=i]=(L[o]||0)+1,r=L[o],o=f.use_pg_in_ids?"p"+M+"_":"",s.setAttribute(C,r),s.id||(s.id=R+i+"_"+o+r),s.removeAttribute(T),s.removeAttribute(E),s.setAttribute(k,d),N.log("GamConfig - setting up ad class",s.id,d,{base:w[d],me:{dom_id:s.id,dom_ctr:r}}),o=N.deepAssign({},w[d]),(a=N.deepAssign({dom_id:s.id,dom_ctr:r},o)).targeting&&N.each(a.targeting,function(e,t){var n,i;"object"==typeof e&&e.format&&(a.targeting[t]=(n=e.format,i=r,e=n.match(/\{\{[^\}]+\}\}/g),N.each(e,function(e){var t=e.replace(/[\{\}]/g,"");"dom_ctr"!==t?"dom_ctr_zi"!==t?N.err("GamConfig unknown slot targeting format",e):n=n.replace(e,i-1):n=n.replace(e,i)}),n))}),v[s.id]=a):(!1!==d&&N.err("GamConfig invalid ad class attribute",d,n?" (original: "+n+")":""),s.removeAttribute(T),s.removeAttribute(E),s.setAttribute(B,d+(n?"("+n+")":""))))}var l=[],p=[],g=[];N.each(v,function(n,i){var r=document.getElementById(i);if(r)if(q.libSettings("gamconfig_skip_element",i,n))u=!0;else{var e=r.getAttribute(j);e&&""!=e&&(N.log("Path Override: ",j),n.gpt_path=e,delete n.gpt_path_builder);var t,o,a,s,d,c,e=r.getAttribute(O);if(e&&""!=e&&(c=e.split(/[,]+/),N.log("parse_all_page_kvp",c),t={},N.each(c,function(e){e=e.split(/[:]+/);2===e.length&&(t[e[0]]=e[1])}),N.log("Targeting map",t),h(t)),r.innerHTML="",b(r,"detected"),n.size_map&&(n.size=AdBridg.getSizes(n.size_map),delete n.size_map,!n.size.length))return g.push(i),void b(r,"vp_no_size");g.push(i),y[i]||(y[i]=!0,l.push(n),-1===P.indexOf(i)&&P.push(i),n.gpt_path_builder&&(n.gpt_path=(a=i,s=r,d=""+(o=n).gpt_path_builder,c=d.match(/\{\{[^\}]+\}\}/g),N.log("GamConfig extracted curlies: ",c),N.each(c,function(e){var t,n=e.replace(/[\{\}]/g,""),i="";n.match(/^lib\.pub\./)?(t=n.replace("lib.pub.",""),(i=(q.libSettings().pub||{})[t])||(q.libSettings().pub||{}).hasOwnProperty(t)||N.err("GamConfig PathBuilder setting not present:",e),d=d.replace(e,i)):n.match(/^lib\.adb\./)?(t=n.replace("lib.adb.",""),(i=q.libSettings("gamconfig_curly",t,o,a,s,q.libSettings())||AdBridg.global(t)||"")||N.err("Warning: GamConfig PathBuilder AdBridg global empty/not present:",t),d=d.replace(e,i)):N.err("GamConfig unsupported gpt_path_builder part:",e)}),N.log("GamConfig gpt_path_builder",o.gpt_path_builder,d),d)),n.dom_ad_class&&m.on("unit.init_config",function(e,t){t.get("dom_id")==i&&t.set("dom_ad_class",n.dom_ad_class)}),n.events={"gpt.defined":function(e){b(r,"gpt_define")},"gpt.rendered":function(e,t){b(r,"gpt_render:"+t.sourceAgnosticCreativeId)},"gpt.viewed":function(e,t){b(r,"gpt_view")}},m.trigger("adb.gamconfig_slot_configure",n,i,r)),_[i]=!0,p.push(i)}else u=!0}),N.each(g,function(e){delete v[e]});var c=q.libSettings().gamconfig_fulfillment;return l.length&&(N.log("GamConfig configuring slots",l),c?c(l):AdBridg.cmd.push(l)),p.length&&AdBridg.cmd.push(function(){N.each(p,function(e){AdBridg.display(e)})}),u&&!MutationObserver&&(S=setTimeout(A,I)),u},N.gamconfig_scanner=A,d=function(){MutationObserver?(A(),s&&c(),(s=new MutationObserver(i)).observe(document.body,{attributes:!0,attributeFilter:["id",T,E],childList:!0,subtree:!0}),N.log("GamConfig MutationObserver added")):(N.log("GamConfig polling started"),A())},u=!(c=function(){clearTimeout(S),s?(s.disconnect(),s=!1,N.log("GamConfig MutationObserver disconnected")):N.log("GamConfig polling stopped")}),m.on("pub.spa_pv_shutdown",function(){u=!0,N.log("GamConfig stopping for SPA"),e(),c(),N.each(o,function(e,t){N.log("GamConfig erasing KVP",t),AdBridg.gpt.pubads().setTargeting(t,[])});var i=[],r=[];N.each(AdBridg.gpt.pubads().getSlots(),function(e){var t,n;!q.libSettings().gamconfig_filter_destroy_slots||q.libSettings().gamconfig_filter_destroy_slots(e)?(n=e.getSlotElementId(),t=document.getElementById(n),(n=0<=P.indexOf(n))&&i.push(e),t&&n&&(r.push(t),b(t,"destroyed"),(n=t.getAttribute(T)||t.getAttribute(E)||t.getAttribute(k)||t.getAttribute(B))&&(t.removeAttribute(k),t.removeAttribute(B),t.setAttribute(T,n),(t.id||"").match(R)&&t.removeAttribute("id")))):N.log("Gamconfig not destroying this slot: ",e)}),i.length&&AdBridg.destroySlots(i),u=!(L={})}),m.on("pub.spa_pv_initialize",p=function(){clearTimeout(l),u?l=setTimeout(p,100):(N.log("GamConfig restarting SPA"),M+=1,e(),d())}),0!=f.autostart||D?d():N.log("GamConfig waiting for publisher to initialize with action=spa_pv_initialize.")):N.log("GamConfig not enabled")}function i(){document&&document.body?(N.log("Body loaded. Initialising Gamconfig module"),t(n,e)):setTimeout(i,100)}var r=q.libSettings().gamconfig_defer;if("function"==typeof r)return N.log("GamConfig waiting to initialize"),void AdBridg.cmd.push(function(){r(i)});AdBridg.cmd.push(i)}},{"../config.js":12,"../unit.js":23,"../utils.js":24}],21:[function(e,t,n){var a=e("./utils.js");function i(e){var t=this,n=e.url,i=e.config,r=e.id,o=e.callback,e=e.loaded;this.url=n,this.config=i,this.handlers={},this.id=r,this.loaded=e,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):a.err("Commands given to Renderer.push must be wrapped in a function")},this.callback=o||function(){t.loaded=!0,t.process()},a.load(n,this.callback,!0)}i.install=function(e){return new i({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded})},i.prototype.getConfig=function(){return this.config},i.prototype.setRender=function(e){this.render=e},i.prototype.setEventHandlers=function(e){this.handlers=e},i.prototype.handleVideoEvent=function(e){var t=e.id,e=e.eventName;"function"==typeof this.handlers[e]&&this.handlers[e](),a.log("Prebid Renderer event for id "+t+" type "+e)},i.prototype.process=function(){for(;0<this.cmd.length;)try{this.cmd.shift().call()}catch(e){a.err("Error processing Renderer command: ",e)}},t.exports=i},{"./utils.js":24}],22:[function(e,t,n){function m(t){var e="GET"===t.method&&("object"==typeof t.data?b.toqs(t.data,!0):t.data),e={method:t.method,url:"GET"===t.method&&e?[t.url,"?",e].join(""):t.url,withCredentials:!1!==(t.options&&t.options.withCredentials),parseResponseJson:void 0===t.parseResponseJson||t.parseResponseJson,data:"POST"===t.method&&("object"==typeof t.data?JSON.stringify(t.data):t.data),contentType:(t.options||{}).contentType,headers:(t.options&&t.options||{}).customHeaders};return d.libSettings().ajaxraw&&(e.rawProcessor=function(e){d.libSettings().ajaxraw(t,e)}),e}function i(e,t){var n=t.config.size.split("x"),t=n[0],e=(2*(n=n[1])<t?["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;}",".native-flex{display:flex;flex-direction:column;height:",n,"px;}",".native-flex-container{display:flex;flex-direction:row;flex:1}",".native-flex-content{display:flex;flex-direction:column;flex:7}",".native-image{background-image:url(",e.image.url,");flex:1;margin-right:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-flex">','<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-flex-container">','<div class="native-image"></div>','<div class="native-flex-content">','<div class="native-title">',e.title,"</div>",'<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</div>","</div>","</div>","</a>"]:["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;display:flex;flex-direction:column;height:",n,"px;}",".native-image{background-image:url(",e.image.url,");flex:2;margin-bottom:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-title">',e.title,"</div>",'<div class="native-image"></div>','<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</a>"]).join("");return e+=["<script>",'var container=Array.from(document.getElementsByTagName("script")).pop().parentElement,','body=container.querySelector(".native-body"),','body2=container.querySelector(".native-body2");',"if(container.clientHeight-container.scrollHeight)",'body.innerText="";','body2.innerText="";',"<\/script>"].join("")}function r(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,t){var n=t.split("="),t=n[0],n=n[1];return/\[\]$/.test(t)?(e[t=t.replace("[]","")]=e[t]||[],e[t].push(n)):e[t]=n||"",e},{}):{}}function o(e,t){var n=document.createElement("a");return t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e),t=t&&t.decodeSearchAsString,{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:t?n.search:r(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}var a,s,h=e("./ajax.js"),b=e("./utils.js"),d=e("./config.js"),e=e("./renderer.js"),v={auction:void 0,gdpr_consent_object:void 0},y=function(e,t){return(t.unit.settings&&t.unit.settings.nativeTemplate||i)(e,t)},_={createEidsArray:function(){var e=v.auction.findUnit(function(){return 1}),e=e&&e.toPrebidUIDs();return e&&e.userIdAsEids},JSEncrypt:0,sha256:0,formatQS:function(e){return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return t+"[]="+e}).join("&"):t+"="+e[t]}).join("&")},findIndex:function(e,t){return e.indexOf(t)},getRefererInfo:function(){return{referer:b.url().href,stack:[b.url().href],reachedTop:window.top===window,numIframes:0|!(window.top===window)}},mergeDeep:function(){var e=arguments[0];if(!e||"object"!=typeof e)return e;for(var t=1;t<arguments.length;++t){var n=arguments[t];if(n&&"object"==typeof n)for(var i in n){var r=typeof n[i];switch(r="object"===r&&Array.isArray(n[i])?"array":r){case"array":e[i]=(e[i]||[]).concat(n[i]);break;case"object":e[i]=_.utils.mergeDeep(e[i]||{},n[i]);break;default:e[i]=n[i]}}}return e},isPlainObject:function(e){return b.isobj(e)},getGptSlotInfoForAdUnitCode:function(t){var e;return(e=window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots?find(window.googletag.pubads().getSlots(),function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}):e)?{gptSlot:e.getAdUnitPath(),divId:e.getSlotElementId()}:{}},parseUrl:function(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);t=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:t?n.search:r(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}},getValue:function(e,t){return e[t]},buildUrl:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":"+e.port:""))+(e.pathname||"")+(e.search?"?"+_.formatQS(e.search||""):"")+(e.hash?"#"+e.hash:"")},isBoolean:function(e){},getParameterByName:function(e){return b.qs(e)||""},getAdUnitSizes:!1,parseQueryStringParameters:function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=t+"="+encodeURIComponent(e[t])+"&");return n},getKeys:function(e){return Object.keys(e)},insertElement:function(e,t,n,i){n=(t=t||document).getElementsByTagName(n||"head"),n=(n=!n.length?t.getElementsByTagName("body"):n)[0];if(n)return n.insertBefore(e,i?null:n.firstChild)},getDataFromLocalStorage:function(e){if(window.localStorage)return window.localStorage.getItem(e)},inIframe:function(){return!b.url().is_top},_map:function(n,i){if(!n)return[];if("function"==typeof n.map)return n.map(i);var r=[];return b.each(n,function(e,t){r.push(i(e,t,n))}),r},deepAccess:b.deepAccess,deepSetValue:function(e,t,r){return t.split(".").reduce(function(e,t,n,i){return n===i.length-1?e[t]=r:e[t]=e[t]||{}},e)},getTopWindowUrl:function(){return b.url().href},getWindowSelf:function(){return window.self},getWindowTop:function(){return window.top},isArray:function(e){return Array.isArray(e)},parseSizesInput:function(e){return e.map(function(e){return e.join("x")})},parseGPTSingleSizeArray:function(e){if(Array.isArray(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1]))return e.join("x")},_each:b.each,cookiesAreEnabled:function(){return navigator.cookieEnabled},logError:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Error |"),b.log.apply(null,e)},logWarn:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Warning |"),b.log.apply(null,e)},logMessage:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Message |"),b.log.apply(null,e)},logInfo:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Info |"),b.log.apply(null,e)},getBidIdParameter:function(e,t){return t&&t[e]||""},getUniqueIdentifierStr:(s=0,function(){return++s}),convertCamelToUnderscore:function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},convertTypes:function(i,r){return b.each(i,function(e){var t=i[e],n=i[e];r[e]="function"==typeof t?n(n):"string"===t?n&&n.toString():"number"===t?Number(n):n,isNaN(r[e])&&delete r[e]}),r},createTrackPixelHtml:b.pixelh,isEmpty:function(e){if(!e)return!0;if(Array.isArray(e)||"string"==typeof e)return!e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},transformBidderParamKeywords:function(e){var n=[];return b.each(e,function(e,t){t={key:t};Array.isArray(e)&&(t.value=e.map(function(e){return e+""})),null!=e&&(t.value=[e+""]),t.hasOwnProperty("value")&&n.push(t)}),n},tryAppendQueryString:function(e,t,n){return n?e+(t+"="+encodeURIComponent(n))+"&":e},isAllowZeroCpmBidsEnabled:function(){return!0},isFn:function(e){return"function"==typeof e},isStr:function(e){return"string"==typeof e},isEmptyStr:function(e){return""===e},assign:b.assign,isInteger:Number.isInteger||function(e){return Math.floor(e)===e&&isFinite(e)},isNumber:function(e){return"number"==typeof e},groupBy:function(e,n){return e.reduce(function(e,t){return(e[t[n]]=e[t[n]]||[]).push(t),e},{})},deepClone:function i(r){return Object.keys(r).reduce(function(e,t){var n={}.toString.call(r[t]).slice(8,-1);return e[t]="Array"===n||"Object"===n?i(r[t]):"Date"===n?new Date(r[t].getTime()):"RegExp"===n?new RegExp(r[t]):r[t],e},Array.isArray(r)?[]:{})},flatten:function(e,t){return e.concat(t)},chunk:function(e,i){return e.reduce(function(e,t,n){return n%i?e[e.length-1].push(t):e.push([t]),e},[])},fill:function(e,t){for(var n=[];n.length<t;n.push("object"==typeof e?_.utils.deepClone(e):e));return n},getMaxValueFromArray:Function.apply.bind(Math.max,0),getMinValueFromArray:Function.apply.bind(Math.min,0),isArrayOfNums:function(e,t){return e.length===(t||e.length)&&e.reduce(function(e,t){return e&&"number"==typeof t},!0)},generateUUID:b.genUUID,getBidRequest:function(e,t){for(var n=0;n<t.length;++n)for(var i=t[n],r=0;r<i.bids.length;++r){var o=i.bids[r];if(o.bidId===e||o.adId===e||o.bid_id===e)return o}b.err("shimGetBidRequestFail",e)},triggerPixel:function(e){b.uspi("S2S",e)},uniques:function(e,t,n){return n.indexOf(e)===t},contains:function(e,t){return 0<e.length&&-1!==e.indexOf(t)},getOrigin:function(){return b.url()},getDNT:function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},getCookie:b.cr,isGptPubadsDefined:function(){return window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots},isSlotMatchingAdUnitCode:function(t){return function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}},verify:null,_each:b.each,urlUtils:{parse:o},getUniqueIdentifierStr:function(){return++a},url:{type:a=0,parse:o,format:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(_.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}},BANNER:"banner",VIDEO:"video",NATIVE:"native",ADPOD:"adpod",OUTSTREAM:"outstream",INSTREAM:"instream",config:{DynamicPrefix:!0,getLegacyFpd:function(r){if("object"==typeof r){var t={};return Object.keys(r).forEach(function(i){var e="site"===i?"context":i;t[e]="context"===e||"user"===e?Object.keys(r[i]).filter(function(e){return"data"!==e}).reduce(function(e,t){var n;return"ext"===t?_.utils.mergeDeep(e,r[i][t]):((n={})[t]=r[i][t],_.utils.mergeDeep(e,n)),e},{}):r[i]}),t}},config:{},getConfig:function(e){switch(e){case"pageUrl":return b.url().href;case"bidderTimeout":return v.auction.max_ms;case"consentManagement.cmpApi":return v.gdpr_consent_object.cmpApi;case"rubicon.singleRequest":return!0;case"ortb2":return{site:{},user:v.auction.findUnit(function(){return 1}).toPrebidUIDs()};case"priceGranularity":return"custom";case"yahoossp.endpoint":return"https://c2shb.ssp.yahoo.com/bidRequest";case"customPriceBucket":return{buckets:(d.libSettings().bid_strategy||"").split(",").map(function(e){var t=e.split(":"),e=t[1].split("-").map(Number);return{precision:2,increment:t[0],min:e[0],max:e[1]}})};default:return b.deepAccess(_.config.config,e)}},bidders:null,js:null,setDefaults:function(e){if("object"!=typeof e)return b.err("defaults must be an object, received",e);b.assign(_.config.config,e)},vastXml:null,vastUrl:null,align:null,closeButton:null,collapse:null,label:null,position:null,rubicon:null},parse:o,registerBidder:function(){},userSync:{registerSync:function(e,t,n){var i="image"===e||"img"===e?b.uspi:"iframe"===e?b.uspf:void 0;i?i(t,n):b.err(["Unknown sync type: ",e," from ",t].join(""))}},includes:function(e,t){return-1!==e.indexOf(t)},find:function(e,t){return e.filter(t)[0]},Renderer:e,loadExternalScript:function(e,t){b.log("module "+t+"is loading external JavaScript"),b.load(e,null,!0)},ajax:function(e,i,t,n){b.ajax(b.assign({},n,{data:t,url:e}),function(e,t,n){e&&i.error?i.error(e.err,e):i.success?i.success(t,n):i(t)})},getIabSubCategory:function(){return null},auctionManager:{getAdUnits:function(){return v.PBJSObjects.bidRequests}},getStorageManager:function(){var i=b.wrapAsync(function(e,t,n){n=n();return"function"==typeof t?t(n):n});return{findSimilarCookies:function(r,e){return i("findSimilarCookies",e,function(){for(var e=[],t=document.cookie.split(";");t.length;){var n=t.pop(),i=(i=n.indexOf("="))<0?n.length:i;0<=decodeURIComponent(n.slice(0,i).replace(/^\s+/,"")).indexOf(r)&&e.push(decodeURIComponent(n.slice(i+1)))}return e})},getCookie:function(e,t){return i("getCookie",t,function(){return b.cr(e)})},setCookie:function(r,o,a,s,d,e){return i("setCookie",e,function(){var e=d&&""!==d?" ;domain="+encodeURIComponent(d):"",t=a&&""!==a?" ;expires="+a:"",n=null!=s&&"none"==s.toLowerCase()?"; Secure":"",i=s?"; SameSite="+s:"";document.cookie=r+"="+encodeURIComponent(o)+t+"; path=/"+e+i+n})},cookiesAreEnabled:function(e){return i("cookiesAreEnabled",e,function(){return b.cookies})},hasLocalStorage:function(e){return i("hasLocalStorage",e,function(){try{return!!window.localStorage}catch(e){}})},localStorageIsEnabled:function(e){return i("localStorageIsEnabled",e,function(){try{if(localStorage.setItem("adb.cookieTest","1"),"1"===localStorage.getItem("adb.cookieTest"))return!0}catch(e){}return!1})},setDataInLocalStorage:function(e,t,n){return i("setDataInLocalStorage",n,function(){try{window.localStorage.setItem(e,t)}catch(e){}})},getDataFromLocalStorage:function(e,t){return i("getDataFromLocalStorage",t,function(){try{return window.localStorage.getItem(e)}catch(e){}return null})},removeDataFromLocalStorage:function(e,t){return i("removeDataFromLocalStorage",t,function(){try{window.localStorage.removeItem(e)}catch(e){}})}}},getGlobal:function(){return AdBridg.globals},CONSTANTS:{EVENTS:{AUCTION_DEBUG:"a",AD_RENDER_FAILED:"b"}},events:{on:function(e){b.log("PBJS Event subscription",e)}},hasDeviceAccess:function(){return!0},validateStorageEnforcement:function(e,t,n,i){i({valid:!1})}};_.utils=_,t.exports={wrap:function(g){var f={};return function(c,u,e,l,p){this.gdprSupport=g.gdprSupport,this.uspSupport=g.uspSupport,this.settings=e,this.buildPrebidParams=function(e){return t=g.unitIDKey,n=g.floorKey,i=g.floorStr,r=e,delete(e=b.deepAssign({},r.params)).adjust,e[t]=r.bidder_unit_id,"string"==typeof e[t]&&-1===["undertone","yieldmo","pubmatic","conversant","deepintent"].indexOf(r.bidder_name)&&e[t].match(/^\d+$/)&&(e[t]=parseInt(e[t])),r.bidder_name.match(/^(index|ix)/)&&(e.bidFloorCur="USD"),"string"==typeof e.size&&(e.size=b.sizeStrToArr(e.size)),n&&(e[n]=r.min_cpm,i&&(e[n]=e[n].toFixed(2))),!e.video&&r.mediaTypes.video&&(e.video=b.copy(r.mediaTypes.video)),e;var t,n,i,r},this.getPrebidReqCtr=function(e){return(f[e]||0)+1},p&&p.on("pub.spa_pv_shutdown",function(){f={}}),this.onBidWon=b.wrapAsync(function(e){var t=g.spec;"function"==typeof t.onBidWon&&(b.log("Adapter onBidWon",c,e),t.onBidWon(e))}),this.onSetTarget=b.wrapAsync(function(e){var t=g.spec;"function"==typeof t.onSetTargeting&&(b.log("Adapter onSetTarget",c,e),t.onSetTargeting(e))}),this.execute=function(i){var t={};i.eachBidRequest(c,function(e){e=e.toPrebidAdUnitCode();t[e]||(t[e]=!0,f[e]=(f[e]||0)+1)}),v.auction=i,v.gdpr_consent_object=l,v.alias=c;var r=i.toPrebidBidderReq(c);p.trigger("bidder.requested",r,i),g.floorKey&&g.floorStr&&r.bids.forEach(function(e){e.params[g.floorKey]=String(e.params[g.floorKey])}),r.bidderCode.match("Sovrn")&&b.each(r.bids,function(e){e.params&&e.params.size&&(e.mediaTypes.banner.sizes=[e.params.size])}),r.start=(new Date).getTime();var e={bidderRequest:r,bidRequests:r.bids};v.PBJSObjects=e,b.each(e.bidRequests,function(e){try{g.spec.isBidRequestValid(e)}catch(e){b.log("Adapter BR invalid",e)}});var o=b.wrapAsync(g.spec.buildRequests,void 0,g.spec)(e.bidRequests,e.bidderRequest);Array.isArray(o)||(o=[o]);function a(){Object.keys(d).map(function(e){return d[e]}).filter(function(e){return!e.found}).forEach(function(e){e.unit.addEmptyBid(e.config)}),p.trigger("bidder.done",r,c,i),b.mock()?b.logl("mock","bypass usync"):[].concat(g.spec.getUserSyncs&&b.wrapAsync(g.spec.getUserSyncs,void 0,g.spec)({syncEnabled:!0,pixelEnabled:!0,iframeEnabled:!0},s.map(function(e){return{body:e||{}}}))||[]).forEach(function(e){_.userSync.registerSync(e.type,u,e.url)})}var n,s=[],d=(n={},i.eachBidRequest(c,function(e,t){n[t.id]={config:t,unit:e}}),n);if(b.mock()){e=Math.floor(Math.random()*(i.ajax_ms-250))+50;return b.logl("mock","bypass bidders",e),void setTimeout(a,e)}"function"==typeof g.spec.onTimeout&&i.onHalt(function(){var t=[];b.each(r.bids,function(e){i.getBidRequest(e.bidId).responses.length||(e={bidId:e.bidId,bidder:e.bidder,adUnitCode:e.adUnitCode,auctionId:e.auctionId,params:[e.params],timeout:i.max_ms},b.log("AdBridg bid object for timeout calculation",c,e),t.push(e))}),t.length&&(b.log("Adapter onTimeout",c,t),g.spec.onTimeout(t))}),o.map(m).forEach(function(e,n){e.max_ms=i.ajax_ms,h(e,b.wrapAsync(function(e,t){s.push(t),!e&&t&&(t=b.wrapAsync(g.spec.interpretResponse,void 0,g.spec)({body:t},o[n]),(t=!Array.isArray(t)?[t].filter(Boolean):t).forEach(function(e){var t,n,i=d[e.requestId];if(!i)return b.err(["unrequested response from",c,":",JSON.stringify(e)].join(" "));e.requestTimestamp=r.start,e.responseTimestamp=(new Date).getTime(),e.timeToRespond=e.responseTimestamp-e.requestTimestamp,t=e,n=i.config,t.ad||t.native||t.renderer||(t.vastUrl||t.vastXml)&&n.renderer?(n=i,(e=e).currency&&!e.originalCurrency&&(e.originalCurrency=e.currency),e={creative:e.ad||(e.native?y(e.native,n):void 0),vastUrl:e.vastUrl,vastXml:e.vastXml,cpm:e.cpm,width:e.native?0|n.config.size.split("x")[0]:e.width,height:e.native?0|n.config.size.split("x")[1]:e.height,extras:{dealid:e.dealId||e.dealid,crid:e.creativeId||e.creativeid,ttl:e.ttl,cur:e.currency,nr:e.netRevenue,mediaType:e.mediaType},render:e.renderer&&e.renderer.render&&e.renderer.render.bind(e.renderer,e),rawbid:e},i.unit.addBid(i.config,e)):i.unit.addEmptyBid(i.config),i.found=!0})),s.length===o.length&&a()}))})}}},polyfills:_}},{"./ajax.js":9,"./config.js":12,"./renderer.js":21,"./utils.js":24}],23:[function(e,t,n){var k=e("./utils"),B=e("./analytics"),C=e("./modules"),z=e("./config");t.exports=function(e){this.id=0,this.alias="",this.size="",this.other_sizes=[],this.min_cpm=0,this.max_ms=0,this.dom_ad_class="",this.settings={},this.unique_id=k.genID("U"),this.uuid=k.genUUID(),this.auction=!1,this.all_sizes=[],this.original_sizes=[];var y=this,s={},_={},l=0,r={},w=[],p={},i=!1,x=!1,t=!1,S=!1,g=!1,o=[];this.init=function(){e&&(y.set(e),C.trigger("unit.init_config",y))},this.restrictSizesTo=function(e){y.all_sizes=y.original_sizes,k.logl("sz","Unit",y.alias,"restrict sizes to",JSON.stringify(e)," old _allowed_sizes",JSON.stringify(g)),g=e,o.length&&y.allowSizes(o);for(var t,n,i=[],r=y.all_sizes.length-1;0<r;--r)-1===g.indexOf(y.all_sizes[r])&&(t=y.all_sizes[r],y.all_sizes.splice(r,1),0<=(n=y.other_sizes.indexOf(t))&&y.other_sizes.splice(n,1),i.push(t));a(),k.logl("sz","Unit",y.alias,"removed sizes",JSON.stringify(i),"allowed sizes",JSON.stringify(g)),C.trigger("unit.restrict_sizes",y,g,i)},this.allowSizes=function(e){o=[],k.each(e,function(e){k.logl("sz","Unit size added",y.alias,e),g&&-1==g.indexOf(e)&&g.push(e),-1==o.indexOf(e)&&o.push(e),-1==y.other_sizes.indexOf(e)&&y.other_sizes.push(e),-1==y.all_sizes.indexOf(e)&&y.all_sizes.push(e),a()}),k.logl("sz","Unit",y.alias,"allowed sizes",o),C.trigger("unit.allow_sizes",y,o)},this.configure=function(e){var t,n=k.qs("adb_maxms");for(t in n&&(e.max_ms=n),e)"unique_id"!=t&&"auction"!=t&&("settings"!=t?y.hasOwnProperty(t)&&"function"!=typeof y[t]&&(y[t]=JSON.parse(JSON.stringify(e[t]))):k.each(e[t],function(e,t){y.settings[t]=e}));y.all_sizes=[y.size].concat(y.other_sizes),y.original_sizes=[].concat(y.all_sizes),k.logl("sz","Unit definition original_sizes=",JSON.stringify(y.original_sizes),"size=",JSON.stringify(y.size),"other_sizes=",JSON.stringify(y.other_sizes)),k.qs("adb_force_bidder")&&(y.min_cpm=0),a(),C.trigger("unit.config",y)},this.addBidder=function(e,t){p[e]=t},this.eachBidder=function(e){for(var t in p)p.hasOwnProperty(t)&&s[t]&&e(t,p[t])},this.hasBidReqConf=function(){return 0<l},this.addBidReqConf=function(d,e,t){var c,u={id:k.genID("BR"),uuid:k.genUUID(),unit:y,adjust:1,bidder_name:d,bidder_id:e.bidder_id,bidder_unit_id:e.bidder_unit_id,min_cpm:y.min_cpm,size:y.size,other_sizes:y.other_sizes,all_sizes:[],responses:[],late_responses:[],test:e.test,toPrebid:function(){var e=y.auction.getBdrReqId(d),t=y.toPrebidUIDs(),n=k.copy(y.settings.mediaTypes),i=f(n,u.all_sizes);n.banner&&(n.banner.sizes=i);var r=y.toPrebidAdUnitCode();c=c||p[d].getPrebidReqCtr(r);var o=y.get("imp_ctr")||1,a=y.get("gpt_slot"),s={};a&&(s={ext:{data:{adserver:{name:"gam",adslot:a=a.getAdUnitPath()},pbadslot:a=a+"#"+r},gpid:a}});s=k.assign({src:"client",adUnitCode:r,adbconfig:y.alias,auctionId:y.auction.uuid,bidId:u.id,bidder:d,bidderRequestId:e,bidderRequestsCount:c,bidderWinsCount:0,bidRequestsCount:o,mediaTypes:n,params:u.params,sizes:i,transactionId:y.uuid,ortb2Imp:s,renderer:y.settings.renderer},t),t=u.mediaTypes.native||u.nativeParams;return t&&(s.nativeParams=t),s}};if(p[d]){k.deepAssign(u,y.settings,p[d].settings,e.settings),u.params=k.deepAssign({},p[d].settings,e.settings),1!=u.adjust&&(u.min_cpm=Number((u.min_cpm/u.adjust).toFixed(2)));var n=[],i=!1;if("function"==typeof e.mutate&&n.push({n:"BidReq",f:e.mutate}),"function"==typeof p[d].mutate&&n.push({n:"Bidder",f:p[d].mutate}),k.each(n,function(e){e.f(u,t)||(i=!0,k.log(e.n+" mutate rejected BR: ",u))}),!i)if(!u.test||k.qsab(d,u.bidder_id,!0)){if(e.settings.size?(u.other_sizes=[],u.size=e.settings.size):"string"==typeof u.other_sizes&&(u.other_sizes=u.other_sizes?u.other_sizes.split(","):[]),g){var r=[];0<=g.indexOf(u.size)&&r.push(u.size);for(var o=0;o<u.other_sizes.length;++o){var a=u.other_sizes[o];0<=g.indexOf(a)&&r.push(a)}if(!r.length)return void(g.length&&k.log("Unit ",y.alias," skipped configuration for ",u.bidder_name," because it does not support any of these sizes: ",g));u.size=r[0],u.other_sizes=r.slice(1)}u.all_sizes=[u.size].concat(u.other_sizes),k.logl("sz","Bid request sizes:",u.bidder_name,u.bidder_unit_id,{size:u.size,other:u.other_sizes,all:u.all_sizes}),s[d]||(s[d]=[]),s[d].push(u),_[u.id]=u,++l,u.params=p[d].buildPrebidParams(u),C.trigger("unit.config_brc",y,u)}else k.log("Test configuration skipped: ",u)}else k.err("BR missing bidder",d)},this.eachBidReqConf=function(e,t){"function"==typeof e&&(t=e,e=!1),e?k.each(s[e],t):k.each(_,t)},this.getBidReqConf=function(e){return _[e]||!1},this.getBid=function(e){for(var t=0;t<w.length;++t)if(w[t].id===e)return w[t];return!1},this.set=function(e,t){if("object"!=typeof e)r[e]=t;else for(var n in e)e.hasOwnProperty(n)&&y.set(n,e[n])},this.setImpData=function(e,t,n){var i=y.get("adb_imp_data")||{};i[e]=n&&i[e]||t,y.set("adb_imp_data",i)},this.get=function(e){return r[e]},this.halt=function(){x=!0},this.onReady=function(e){t=e,I()};var I=function(){S&&t&&setTimeout(function(){t(y)},0)};this.markEmpty=function(e){y.eachBidReqConf(e,function(e){e.responses.length||y.addEmptyBid(e)})},this.addEmptyBid=function(e){if("number"==typeof e||"string"==typeof e){var t=e;if(!(e=_[t]))return void k.err("Could not find bid req: ",t)}e.responses.length||x&&e.late_responses.length||y.addBid(e,{})};var A=function(e,t){return e._bid_cpm==t._bid_cpm&&e.width==t.width&&e.height==t.height&&e.creative==t.creative};this.bidRendered=function(e,t){var n,i=e.config.bidder_name;p[i]?((n=e.pbjsBid).status="rendered",p[i].onBidWon&&p[i].onBidWon(n),C.trigger("bid.render",e,t)):k.err("uBidRender.notFound",i,y.id)},this.gptTargetSet=function(e){var t=e.config.bidder_name;p[t]?((e=e.pbjsBid).status="targetingSet",p[t].onSetTarget&&p[t].onSetTarget(e)):k.err("gptTargetSet.notFound",t,y.id)};var n=!(this.addBid=function(e,t){if(!e||!y.getBidReqConf(e.id))return k.err("Bid request from ",e.bidder_name,"not found on unit",y.id),!1;C.trigger("bid.mutate_raw",t,e);var n=t.config&&t.config.unit&&t.config.unit.unique_id,i=Number(parseFloat(t.cpm).toFixed(2))||0,r=Number(t.width)||0,o=Number(t.height)||0,a=t.creative||"",s=t.creative_url||"",d=t.extras||{},c=t.force||!1,u=t.render,l=t.vastUrl,p=t.vastXml,g=t.rawbid;i||(t.empty=!0);var f=Number((i*e.adjust).toFixed(2)),m=e.min_cpm;!n&&0<m&&f<m&&(f=0);var h=z.libSettings().pubchkcreativefn;a&&"function"==typeof h&&!h(e,t,z.libSettings())&&(k.log("Creative blocked: ",e.bidder_id,r,o,f,d),f=0);var b=n?t.ts:k.dts(),v=n?t.ms:Math.round(b-y.auction.ts),h=y.id+"."+k.genID("B"),l={id:h=g&&g.adId?g.adId:h,ms:v,ts:b,config:e,viable:!x,cpm:f,_min_cpm:m,_bid_cpm:i,force:c,width:r,height:o,creative:a,creative_url:s,extras:d,render:u,vastUrl:l,vastXml:p,rawbid:g};if(n&&((l._origin=t)._pool||(t._pool=[]),t._pool.push(l)),E(l),function(e,t){for(var n=0;n<e.responses.length;++n)if(A(t,e.responses[n]))return!0;for(n=0;n<e.late_responses.length;++n)if(A(t,e.late_responses[n]))return!0;return!1}(e,l))return k.log("Unit ",y.alias,"ignored duplicate bid from ",e.bidder_name," on BR ",e.id,": ",l.ms,l.width+"x"+l.height,l.cpm.toFixed(2)),!1;p=l.viable?"":"late ";return!l.cpm&&0<l._bid_cpm?(g=1!=e.adjust?" * "+e.adjust+" = "+Number((l._bid_cpm*e.adjust).toFixed(2)):"",p+="below-floor ("+l._bid_cpm+g+" < "+l._min_cpm+") "):t.empty&&(p+="empty "),k.log("Unit",y.alias,"got",p+"bid"+(n?" (pooled from "+n+")":""),"from",e.bidder_name,"on BR",e.id,": ",l.ms,l.width+"x"+l.height,l.cpm.toFixed(2)),C.trigger("bid.ready",l),l.pbjsBid&&T(l),l.viable?(e.responses.push(l),w.push(l),C.trigger("bid.response",l),function(){if(!x){for(var e in _){e=_[e];if(e.responses&&!e.responses.length)return}S=!0,I()}}()):(e.late_responses.push(l),B.lateBid(l)),l});this.getWinner=function(){return n||(n=!0,"function"==typeof z.libSettings().filter_bid&&k.wrapAsync(z.libSettings().filter_bid),k.each(w,function(e){C.trigger("bid.auction_close_filter",y,e),e.blocked&&(e.cpm=0,k.log("Bid filtered out",y.alias,e.config.bidder_name,"reason:",e.blocked));var t=e.width+"x"+e.height;if(e.cpm&&g&&-1==g.indexOf(t)&&(!z.libSettings().bypass_size_check||-1==z.libSettings().bypass_size_check.bidder.indexOf(e.config.bidder_name))){var n=e._origin?"(pooled bid from "+e._origin.config.unit.unique_id+")":"";return k.log("Unit ",y.alias,"rejected",n,e.config.bidder_name,"invalid size",t),void(e._origin||k.err("U",y.id," B",e.config.bidder_id+"."+e.config.bidder_unit_id,t,g))}t=e.cpm&&(!i||e.cpm>i.cpm||e.cpm==i.cpm&&.5<Math.random());i&&i.force&&(t=!1),(e.force||t)&&(i=e)}),i&&(k.log("Unit ",y.alias,"set winner to ",i.config.bidder_name,i._origin&&"(pooled bid from "+i._origin.config.unit.unique_id+")"||"",i.width+"x"+i.height,i.cpm.toFixed(2)),C.trigger("bid.auction_winner",i))),i},this.toPrebidUIDs=function(){var i=!1;return k.each(r,function(e,t){var n=t.match(/^userId\.(.+)$/),t=t.match(/^userIdAsEids\.(.+)$/);!n&&!t||i||(i={userId:{},userIdAsEids:[]}),n&&(i.userId[n[1]]=e),t&&i.userIdAsEids.push(e)}),i&&i.userIdAsEids.sort(function(e,t){return e.name<t.name?1:-1}),i&&i.userId.pubcid&&(i.crumbs={pubcid:i.userId.pubcid}),i||{}};var a=function(){y.settings.mediaTypes||(y.settings.mediaTypes={}),y.settings.mediaTypes.banner={sizes:y.all_sizes.filter(Boolean).map(k.sizeStrToArr)}},f=function(e,t){for(var n=e.banner?k.copy(e.banner.sizes):[],i=n.length-1;0<=i;--i)-1===t.indexOf(n[i].join("x"))&&(debugit=!0,n.splice(i,1));if(e.video){var r=e.video.playerSize;k.isarr(r[0])||(r=[r]);for(i=0;i<r.length;++i){var o=r[i].join("x");-1===t.indexOf(o)&&n.push(r[i])}}return n},d=function(e,t){return k.toRange(e,t).kv.split("-").shift()},c=function(e){var t=!e&&"0.00";return{pbLg:t||d(e,".5:0-5"),pbMg:t||d(e,".1:0-20"),pbHg:t||d(e,".01:0-20"),pbDg:t||d(e,".01:0-2.99;.05:3-7.5;.5:8-20"),pbAg:t||d(e,".05:0-4.95;.1:5-9.5;.5:10-20"),pbCg:t||d(e,z.libSettings().bid_strategy)}},E=function(e){var t,n=e.config.toPrebid();e.rawbid&&e.viable?(t=k.deepAssign({currency:"USD",originalCurrency:"USD"},e.rawbid,{source:"client",statusMessage:"Bid available",cpm:e.cpm,originalCpm:e._bid_cpm,bidderCode:n.bidder,bidder:n.bidder,requestId:n.bidId,adUnitCode:n.adUnitCode,adbconfig:n.adbconfig,auctionId:n.auctionId,adId:e.id,mediaType:e.rawbid.mediaType,creativeId:e.rawbid.creativeId,netRevenue:e.rawbid.netRevenue,width:e.width,height:e.height}),e.pbjsBidO=k.deepAssign({},t),e.pbjsBid=t):e.pbjsNoBid=n},T=function(e){var t=e.width+"x"+e.height,n=c(e.pbjsBid.cpm),i=e.rawbid&&e.rawbid.adserverTargeting||{};k.assign(e.pbjsBid,n,{size:t,adserverTargeting:k.assign({hb_bidder:e.pbjsBid.bidderCode,hb_adid:e.pbjsBid.adId,hb_pb:n.pbMg,hb_size:t,hb_source:"client",hb_format:e.rawbid.mediaType||"banner"},i)})};this.toPrebidAdUnitCode=function(){return y.get("dom_id")||y.unique_id},this.toPrebidAdUnit=function(){var e=k.copy(this.settings.mediaTypes),t=f(e,this.all_sizes),n=this.toPrebidUIDs(),i=[];return this.eachBidReqConf(function(e){i.push(k.assign({bidder:e.bidder_name,params:e.params},n))}),{code:this.toPrebidAdUnitCode(),adbconfig:this.alias,sizes:t,mediaTypes:e,bids:i,transactionId:this.uuid}},this.toPrebidResults=function(){var t={noBids:[],bidsReceived:[],winningBids:[],prebidWinningBids:[]};return k.each(w,function(e){e.pbjsBid&&(t.bidsReceived.push(e.pbjsBid),"rendered"===e.pbjsBid.status?t.winningBids.push(e.pbjsBid):"targetingSet"===e.pbjsBid.status&&t.prebidWinningBids.push(e.pbjsBid)),e.pbjsNoBid&&t.noBids.push(e.pbjsNoBid)}),t},this.init()}},{"./analytics":10,"./config":12,"./modules":16,"./utils":24}],24:[function(e,t,x){var n;x.wrapAsync=function(e,t,n){return function(){try{return e.apply(n||this,arguments)}catch(e){t?t(e):x.err("Caught AsyncErr: ",e)}}},x.thread=function(t){return t=x.wrapAsync(t),function(){var e=arguments;setTimeout(function(){t.apply(this,e)},0)}},x.attempt=function(e,t){try{return e()}catch(e){}return t};function i(e){return{loading:1,interactive:2,complete:3}[e=e||document.readyState]||0}var r=1,o=(new Date).getTime(),a=function(){try{o-=Math.round(performance.now()),a=function(){return i()+"T"+Math.round(performance.now()).toString(36)},n=[r,o.toString(36),a()]}catch(e){a=function(){return i()+"T"+Math.max(0,(new Date).getTime()-o).toString(36)},n=[r=0,o.toString(36),i()+"T0"]}};a();function f(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),n}function s(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)}x.on=f,x.off=s,f(document,"readystatechange",function(){3==i()&&s(document,"readystatechange",arguments.callee),n.push(a())}),x.perfts=function(){return a()},x.pgts=function(){return n},x.dts=function(){return r?Number(performance.now().toFixed(2)):Number(Math.max(0,(new Date).getTime()-o).toFixed(2))};var d=0;x.genID=function(e){return(e||"")+ ++d+Math.random().toString(16).substr(2)},x.vp=function(){var e,t,n,i=document;try{e=window.innerWidth,t=window.innerHeight,n=window.pageYOffset,window_x=window.pageXOffset}catch(e){}return{w:e||i.documentElement&&i.documentElement.clientWidth||i.body&&i.body.clientWidth||0,h:t||i.documentElement&&i.documentElement.clientHeight||i.body&&i.body.clientHeight||0,y:n||i.body&&i.body.scrollTop||0,x:window_x||i.body&&i.body.scrollLeft||0}},x.cr=function(e){var e=String(document.cookie).match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return e=e?decodeURIComponent(e[2]):""},x.cw=function(e,t,n){exp_string=0<(n=n||1)?"max-age="+86400*n:"max-age=-99999";t=e+"="+encodeURIComponent(t)+";"+exp_string+";path=/;domain="+window.location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1");document.cookie=t},x.lr=function(t){var e,n="",i="";try{(i=localStorage.getItem(t))&&(i=JSON.parse(i),e=(new Date).getTime(),i.e&&parseInt(i.e,36)<e?x.logl("ls","LS expired",t,i,e):(x.logl("ls","LS read",t,i),n=i.v))}catch(e){x.logl("ls","LS read fail",t,i,e)}return n},x.lw=function(t,n,i){try{var e,r={v:n};i&&(e=(new Date).getTime(),r.s=e.toString(36),r.e=Math.round(e+864e5*i).toString(36)),r=JSON.stringify(r),localStorage.setItem(t,r),x.logl("ls","LS written",t,n,i,r)}catch(e){x.logl("ls","LS write fail",t,n,i,e)}},x.sr=function(t){try{return sessionStorage.getItem(t)}catch(e){x.logl("ss","SS read fail",t,e)}return""},x.sw=function(t,n){try{sessionStorage.setItem(t,n),x.logl("ss","SS written",t,n)}catch(e){x.logl("ss","SS write fail",t,n,e)}};try{var c="adbct";x.cw(c,1),x.cookies=!!x.cr(c),x.cw(c,"",-1)}catch(e){}try{x.safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}catch(e){}x.https=!("https:"!=location.protocol),x.genUUID=function(e){try{return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,x.genUUID)}catch(e){return 0}},x.qs=function(e){e=new RegExp(e+"=([^&]+)");return(String(window.location.search).match(e)||[]).pop()};var u=x.qs("adb_force_bidder"),l=x.qs("adb_allow_bidder"),p=[];u&&"*"!=u&&(p=p.concat(u.split(","))),l&&"*"!=l&&(p=p.concat(l.split(","))),x.qsab=function(e,t,n){return t=String(t),"*"==l||"*"==u||(!n&&!u||0<=p.indexOf(t)||0<=p.indexOf(e))},x.qsappend=function(e,t,n,i){return i&&!t?"":"&"+e+"="+(t=n?encodeURIComponent(t):t)},x.toqs=function(e,n){var i="";return x.each(e,function(e,t){x.isarr(e)?x.each(e,function(e){i+=x.qsappend(t+"[]",e,n)}):i+=x.qsappend(t,e,n)}),i.replace(/^\&/,"")},x.each=function(e,t){if(e&&0!==e.length)if(e.length)for(var n=0;n<e.length;++n)t(e[n],n);else for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},x.sizeStrToArr=function(e){return x.isarr(e)?e:"string"==typeof e?e.split("x").map(Number):(x.err("BadSizeConvert",e),e)},x.resize_element=function(e,t,n){e.style.width&&String(e.style.width).replace("px","")==t||(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")==n||(e.style.height=n+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=n&&e.setAttribute("height",n)},x.resize_iframe=function(e,t,n,i){try{for(var r=e.document.getElementsByTagName("iframe")||[],o=0;o<r.length;++o)try{if(r[o].contentDocument===t)return x.resize_element(r[o],n,i),void(e!==top&&x.resize_iframe(e.parent,e.document,n,i))}catch(e){}}catch(e){x.err("Error resizing window to "+n+"x"+i,e)}x.err("Failed to resize window to "+n+"x"+i)},x.url=function(){var t,n,i,r,o,e=top,a=window,s=document,d=!1;try{d=window.parent===window}catch(e){}try{t=e.location.host,n=e.location.pathname+e.location.search+e.location.hash,href=e.location.href,i=e.document.referrer,r=e.document.title,o=e.location.protocol}catch(e){try{t=(String(s.referrer).match(/^[^\/]+\/\/([^\/]+)/)||[]).pop(),n=(String(s.referrer).match(/^[^\/]+\/\/[^\/]+(\/.+)$/)||[]).pop(),o=(String(s.referrer).match(/^https?\:/)||[]).pop(),href=s.referrer,r=i=""}catch(e){}}return t&&n||(t=a.location.host,n=a.location.pathname+a.location.search+a.location.hash,o=a.location.protocol,href=a.location.href,i=s.referrer),{domain:t,page:n,href:href,referrer:i,title:r,is_top:d,protocol:o}},x.random=function(e,t){return Math.floor(Math.random()*(t-e))+e},x.pixel=function(e,t){t=t?(new Date).getTime():Math.random();document.createElement("img").src=e+"&rnd="+t},x.pixelh=function(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;"><img src="'+encodeURI(e)+'"></div>':""},x.pixelf=function(e,t,n){return e?(t&&(e=encodeURI(e)),"<iframe "+(n=n?'sandbox="'+n+'"':"")+' id="'+x.genID("IPF")+'" src="'+e+'" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0p;width:0p;display:none;" scrolling="no"></iframe>'):""};var g,m=[],h={};x.uspf=x.wrapAsync(function(e,t){x.logl("px","UserSync qF",e,h[e],5,t),h[e]=(h[e]||0)+1,5<h[e]||m.push({a:e,t:"f",u:t})}),x.uspi=x.wrapAsync(function(e,t){x.logl("px","UserSync qI",e,h[e],5,t),h[e]=(h[e]||0)+1,5<h[e]||m.push({a:e,t:"i",u:t})});var b=!0,v=!0,y=500,_=!(x.cfusp=function(e,t,n){e||(b=!1),t||(v=!1),n&&(y=n),x.log("UserSync set: ",{image:b,iframe:v,delay:y})});x.cfuspfn=function(e){_=e};var w=x.wrapAsync(function(){if(clearTimeout(g),m.length){var e=Math.floor(Math.random()*m.length),t=m[e];if(m.splice(e,1),_&&!_(t))return x.logl("px","UserSync not sent (pub): ",t),w();if(v&&"f"==t.t){e=document.createElement("div");e.innerHTML=x.pixelf(t.u,!1,"allow-scripts allow-same-origin"),document.body.appendChild(e.firstChild),x.logl("px","UserSync (F): ",t.a,t.u)}else{if(!b||"i"!=t.t)return x.logl("px","UserSync not sent (!): ",t),w();document.createElement("img").src=t.u,x.logl("px","UserSync (I): ",t.a,t.u)}g=setTimeout(w,50)}});x.qdusp=function(){if(x.logl("px","UserSync Q",m,y,b,v,x.safari,x.cookies),x.safari||!x.cookies)return x.logl("px","UserSync skipped",x.safari,x.cookies);clearTimeout(g),g=setTimeout(w,y)};var S={};x.load=function(e,t,n,i){if(t=t?x.wrapAsync(t):function(){},!n||!S[e]){n&&(S[e]||(S[e]={ready:!1,cbs:[t]}),t=function(){S[e].ready=!0,x.each(S[e].cbs,function(e){e()})});var r=document.createElement("script");return r.type="text/javascript",r.async=!0,r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t())}:r.onload=t,r.src=e,(i||document.body||document.head).appendChild(r),r}S[e].ready?t():S[e].cbs.push(t)},x.loadCached=function(e,t){x.load(e,t,!0)},x.iiframe=function(e){var t=document.createElement("iframe");return t.id=x.genID("IIF"),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",t.src=void 0===e?"about:blank":e,t.style.display="none",t},x.prepend=function(e,t){return"string"==typeof t&&(t=document.createElement(t)),e.prepend?e.prepend(t):e.children.length?e.insertBefore(t,e.children[0]):e.appendChild(t),t},x.isarr=function(e){return"[object Array]"===Object.prototype.toString.call(e)};var I=!(x.isobj=function(e){return"[object Object]"===Object.prototype.toString.call(e)});x.isdebug=function(){return I},x.setdebug=function(e){e&&(I=e,document.cookie="adb_debug="+I+";path=/;domain=."+location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1"))},x.setdebug(x.qs("adb_debug")||x.cr("adb_debug")),x.log=function(){if(I){var e=Array.prototype.slice.apply(arguments);e.unshift("AdBridg | "+x.dts().toFixed(2));try{console.log.apply(console,e)}catch(e){}}},x.logl=function(e){I==e&&x.log.apply(x,["log::",e].concat(Array.prototype.slice.apply(arguments,[1])))};var A,E=[];x.err=function(){var t=Array.prototype.slice.apply(arguments);if(I){var e=[].concat(t);e.unshift("AdBridg | "+x.dts().toFixed(2)+" | ERROR: ");try{console.log.apply(console,e)}catch(e){}}A&&!(t=A(t))||E.length&&x.each(E,function(e){e.apply(null,t)})},x.onerr=function(e){E.push(e)};var T=!(x.wraperr=function(e){A=e});x.mock=function(e){return e&&(String(e).match(/^(native|small|large)$/)?(x.log("-- system mock engaged: ",e),T=e):x.err("MockValueInvalid",e)),T},x.mock(x.qs("adb_mock"));var k=!1,B=[];x.onrec=function(e){for(k=e;B.length;)k(B.shift())},x.rec=function(e){k?k(e):B.push(e)};var C={};x.toRange=function(e,t){e=Math.round(100*e);for(var n=function(e){if(!C[e=e||".05:.05-10"]){C[e]=[];for(var t=e.split(","),n=0;n<t.length;++n){var i=t[n].split(":"),r=i[1].split("-"),r={increment:Math.round(100*parseFloat(i[0])),upper:Math.round(100*parseFloat(r[1])),final:!1};n==t.length-1&&(r.final=r.upper-r.increment),C[e].push(r)}}return C[e]}(t),i=0;i<n.length;++i){var r=n[i];if(r.final&&e>=r.upper-r.increment)return{r:parseFloat(((r.final+r.increment)/100).toFixed(2)),kv:(r.final/100).toFixed(2)+"-"};if(!(e>=r.upper)){var o=Math.floor(e/r.increment)*r.increment/100,a=parseFloat((o+r.increment/100).toFixed(2)),r=a-.01;return{r:a,kv:Math.max(.01,o).toFixed(2)+"-"+r.toFixed(2)}}}};function z(e){return 61<e?z(e/62|0)+z(e%62):35<e?String.fromCharCode(e+29):9<e?String.fromCharCode(e+87):-1<e?e+"":e<0?"-"+z(-e):"NaN"}x.b62=z,x.fb62=function(e){for(var t=0,n=e.length-1,i=n;0<=i;i--){var r=e.charCodeAt(i),o=i===n?1:Math.pow(62,n-i);if(96<r&&r<123)t+=o*(r-87);else if(64<r&&r<91)t+=o*(r-29);else{if(!(47<r&&r<58))return NaN;t+=o*(r-48)}}return t},x.dom=x.wrapAsync(function(e,t,n,i,r,o){R.add(e,t,n,i,r,o)}),x.undom=x.wrapAsync(function(e,t){R.remove(e,t)}),x.lzrescan=x.wrapAsync(function(e){R.rescan(e)});var R=new function(){var t,s,d={},c=0,u=[],n=!1,i=!1,l=!1;this.add=function(e,t,n,i,r,o){var a;e instanceof Node&&((a=e).id||(a.id=x.genID("adb_auto_")),e=a.id),d[e]=d[e]||[],d[e].push({c:i,d:t,t:n,i:e,f:r,x:o}),c+=1,g()},this.remove=function(e,t){var n,i=d[e]||[];if(t)for(n=i.length-1;0<=n;--n)i[n].c===t&&d[e].splice(n,1);for(t&&i.length||delete d[e],n=u.length-1;0<=n;--n)t&&u[n].c!==t||u.splice(n,1)},this.rescan=function(e){x.logl("lz","Lazy explicit rescan"),e&&(s=e),t=setTimeout(g,0)},f(window,"scroll",function(){l=!0,!t&&c&&(x.logl("lz","Lazy scroll wait",100),t=setTimeout(g,100))});function p(e,t){if(e.f&&!e.f(e,t,l))return x.logl("lz","Lazy blocked",e,l),!1;if(t.in){if(!e.x)return x.logl("lz","Lazy cannot measure el",e,t),!1;var n=document.getElementById(e.i);if(!n)return x.logl("lz","Lazy collapse check - cannot read el",e,t),!1;var i=(n||{}).parentNode;if(!i)return x.logl("lz","Lazy collapse check - cannot read parent",e,t),!1;var r=x.where(i);if(!r.in)return x.logl("lz","Lazy collapse check - parent invis",e,t,r),!1;r=document.createElement("span");r.style="position:absolute;display:block;width:1px;height:1px;",i.insertBefore(r,n);n=x.where(r);i.removeChild(r),x.logl("lz","Lazy collapse check - using replacement coords",JSON.stringify({coords:t,replacement:n})),t=n}return 0<e.d&&e.d<1?0===t.d&&(0===t.c.h||0===t.c.w)||t.v>e.d:t.d<=e.d}var g=x.thread(function(){var a,e=x.dts();clearTimeout(t),t=!1,n||e-i<50?t=setTimeout(g,50):(n=!0,i=e,x.logl("lz","Lazy measure",e),a=[],x.each(d,function(e,t){var n=x.where(t);if(!n)return x.logl("lz","Lazy no dom",t);for(var i=e.length-1;0<=i;--i){var r=e[i],o=p(r,n);x.logl("lz","Lazy check",JSON.stringify({el:t,coords:n,reqdist:r.d,criteria:o,seenscr:l})),!o&&s&&(o=s(r,n))&&x.logl("lz","Lazy allowed",t),o&&(--c,e.splice(i,1),u.push(r),x.logl("lz","Lazy to duration",t))}e.length||a.push(t)}),x.each(a,function(e){delete d[e]}),e=function(e){for(var t=!1,n=u.length-1;0<=n;--n){var i=u[n],r=i.i;if(x.logl("lz","Lazy check time",i,r," has scroll event: ",l),i.tx){if(!p(i,x.where(r))){x.logl("lz","Lazy back to distance",r),i.tx=0,u.splice(n,1),d[r]=d[r]||[],d[r].push(i),c+=1;continue}}else i.tx=e+i.t;var o=i.tx-e;o<=0?(x.logl("lz","Lazy execute",r),u.splice(n,1),x.thread(i.c)(r)):t=t?Math.min(1+o,t):1+o}return t}(e)||100,u.length&&(x.logl("lz","Lazy duration wait",e),t=setTimeout(g,e)),n=!1)})};x.obox=function(e,t){t={top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left),right:Math.min(e.right,t.right)};return t.width=Math.round(t.right-t.left),t.height=Math.round(t.bottom-t.top),t.area=Math.round(t.width*t.height),t},x.opct=function(e,t,n,i,r){var o=x.obox(t,{top:0,bottom:n.h,left:0,right:n.w}),a=o.area,s=a/(Math.round(t.width)*Math.round(t.height)),d={o:0,p:0,v:s,e:{}};if(!a)return d;var n=o.left+o.width/2,t=o.top+o.height/2,c={mm:[n,t],tl:[o.left+5,o.top+5],br:[o.right-5,o.bottom-5]};7<=r&&(c.tm=[n,o.top+5],c.tr=[o.right-5,o.top+5],c.bl=[o.left+5,o.bottom-5],c.bm=[n,o.bottom-5]),9<=r&&(c.mr=[o.right,t],c.ml=[o.left,t]);var u,l=[];for(u in c)if(c.hasOwnProperty(u)){var p=c[u],g=document.elementFromPoint(p[0],p[1]);if(i&&g&&(((p=document.getElementById(i))===g||g.contains(p)||p.contains(g))&&(g=!1)),g&&g!==e&&!e.contains(g)&&!g.contains(e)){var f=x.obox(o,g.getBoundingClientRect()),m=0,h=0,b=g,v=b.parentNode;if(!v.contains(e)){for(m+=1;v.parentNode&&!v.parentNode.contains(e);)m+=1,v=v.parentNode;for(;v!==b;){var y=x.obox(o,v.getBoundingClientRect()),_=y.area==f.area;(y.area>f.area||_&&h<m)&&(f=y,g=v,h=m);for(var y=v,w=0;w<v.children.length;++w)if(v.children[w]===b||v.children[w].contains(b)){--m,v=v.children[w];break}if(v===y)break}}if(-1===l.indexOf(g)&&(l.push(g),d.e[u]={el:g,p:f.area,o:f.area/a},d.p+=f.area,d.o=Math.min(1,d.p/a),d.v=d.o?(1-d.o)*s:s,1===d.o))break}}return d},x.where=function(e,t,n){if(!(e="string"==typeof e?document.getElementById(e):e))return!1;var i=e.getBoundingClientRect(),r=x.vp(),o=i.top,a=i.height,s=i.top+a,d="in_viewport",c=0,u=1,l=0<i.width&&0<a,p=0,g=j(e);g&&(p=1,d="unknown"),o<0?(c=s<0?Math.abs(s):0,d=((u=0<s&&l?s/a:0)?"partially_":"")+"above_viewport"):s>r.h?(c=o>r.h?o-r.h:0,d=((u=o<r.h&&l?(r.h-o)/a:0)?"partially_":"")+"below_viewport"):l||(u=0);l=null;return{i:g,p:d,d:c,v:u,in:p,o:l=t&&u&&!p?x.opct(e,i,r,n):l,c:{vp:r,t:o,l:i.left,h:a,w:i.width,b:s}}},x.assign=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},x.copy=function(e){if(x.isarr(e)){for(var t=[],n=0;n<e.length;++n)t.push(x.copy(e[n]));return t}return"object"==typeof e?x.deepAssign({},e):e},x.deepAssign=function(e){if(!e)return e;for(var n=Object(e),t=1;t<arguments.length;t++)x.each(arguments[t],function(e,t){n[t]=x.copy(e)});return n},x.deepMerge=function(e){if(!e)return e;for(var n=Object(e),t=1;t<arguments.length;t++)x.each(arguments[t],function(e,t){n[t]="object"==typeof e?x.deepMerge(n[t]||{},e):x.copy(e)});return n},x.deepAccess=function(e,t,n){e=t.split(".").reduce(function(e,t){return(e||{})[t]},e);return!e&&n?n:e},x.deepEq=function(i,r,o,a){if(a=a||"",(o=o||[]).some(function(e){return e===a}))return!0;if("function"==typeof r&&r(i))return!0;if("object"!=typeof i||"object"!=typeof r||null==i||null==r)return i===r||{p:a,o1:i,o2:r};var e=Object.keys(Object.assign({},i,r)).reduce(function(e,t){var n=a?a+"."+t:t,n=x.deepEq(i[t],r[t],o,n);return n&&n.hasOwnProperty("p")&&n.hasOwnProperty("o1")&&n.hasOwnProperty("o2")?e.push(n):!0!==n&&(e=e.concat(n)),e},[]);return 0===e.length||e};var j=function(e){try{if(!e)return"no_dom_el";var t=window.getComputedStyle&&window.getComputedStyle(e)||{};if("none"==t.display)return"display_none";if("hidden"==t.visibility)return"vis_hidden"}catch(e){x.err("get_invis_fail")}return!1};x.dom_invisible=x.wrapAsync(function(e){var t=document.getElementById(e),n=j(t);if(n)return"el_"+n;for(var i=0;t.parentNode&&(t=t.parentNode)!==document.body;)if(i+=1,n=j(t))return"anc_"+i+"_"+n;return!1})},{}]},{},[14]);